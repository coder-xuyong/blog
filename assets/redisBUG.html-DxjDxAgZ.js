import{_ as s,c as e,e as t,a,b as r,o as n}from"./app-BXBW-sfJ.js";const o={};function l(d,i){return n(),e("div",null,[i[0]||(i[0]=t("p",null,"redis 使用过程中的bug记录",-1)),a(" more "),i[1]||(i[1]=r(`<h1 id="redisbug" tabindex="-1"><a class="header-anchor" href="#redisbug"><span>redisBUG</span></a></h1><p>标签（空格分隔）： redis</p><hr><h2 id="windows环境" tabindex="-1"><a class="header-anchor" href="#windows环境"><span>Windows环境</span></a></h2><p>1、Could not connect to Redis at 127.0.0.1:6379: 由于目标计算机积极拒绝，无法连接。<br> \`\`</p><p>2、报错如下</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">D:\\Redis-x64-5.0.14.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">redis-server.exe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.windows.conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[7948] 29 Jan 10:06:50.399 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[7948] 29 Jan 10:06:50.399 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Redis version=5.0.14.1, bits=64, commit=ec77f72d, modified=0, pid=7948, just started</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[7948] 29 Jan 10:06:50.400 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Configuration loaded</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[7948] 29 Jan 10:06:50.402 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Could not create server TCP listening socket 127.0.0.1:6379: bind: 操作成功完成。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解决：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-cli.exe</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 进入客户端</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 关闭该redis服务</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">exit</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">       # 退出</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server.exe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.windows.conf</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 重新启动reids 服务</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="misconf-redis-is-configured-to-save-rdb-snapshots-but-it-is-currently-not-able-to-persist-on-disk-commands-that-may-modify-the-data-set-are-disabled-because-this-instance-is-configured-to-report-errors-during-writes-if-rdb-snapshotting-fails-stop-writes-on-bgsave-error-option-please-check-the-redis-logs-for-details-about-the-rdb-error" tabindex="-1"><a class="header-anchor" href="#misconf-redis-is-configured-to-save-rdb-snapshots-but-it-is-currently-not-able-to-persist-on-disk-commands-that-may-modify-the-data-set-are-disabled-because-this-instance-is-configured-to-report-errors-during-writes-if-rdb-snapshotting-fails-stop-writes-on-bgsave-error-option-please-check-the-redis-logs-for-details-about-the-rdb-error"><span>MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.</span></a></h2><p>Redis配置为保存RDB快照，但它当前无法在磁盘上持久化。可以修改数据集的命令被禁用，因为此实例配置为在RDB快照失败时报告写入期间的错误（停止对bgsave error的写入选项）</p><p>原因是因为强制关闭 Redis 快照导致不能持久化（之前部署Redis的机器断电过，猜测是因为这个导致的）</p><p>解决方案就是重启Redis后，登录进去，将stop-writes-on-bgsave-error设置为no</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop-writes-on-bgsave-error</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>但需要注意的是，执行这个命令只能暂时解决无法 set 的问题，具体的问题还是要看 Redis 的 log 信息详细排查错误才行</p>`,15))])}const p=s(o,[["render",l],["__file","redisBUG.html.vue"]]),c=JSON.parse('{"path":"/posts/redis/redisBUG.html","title":"redis 使用过程中的bug记录","lang":"zh-CN","frontmatter":{"title":"redis 使用过程中的bug记录","icon":"pen-to-square","date":"2023-06-01T00:00:00.000Z","lastUpdated":true,"category":["redis"],"tag":["java","spring","springboot","redis"],"description":"redis 使用过程中的bug记录","head":[["meta",{"property":"og:url","content":"https://coder-xuyong.github.io/blog/posts/redis/redisBUG.html"}],["meta",{"property":"og:site_name","content":"coder-xuyong"}],["meta",{"property":"og:title","content":"redis 使用过程中的bug记录"}],["meta",{"property":"og:description","content":"redis 使用过程中的bug记录"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-22T14:03:31.000Z"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"spring"}],["meta",{"property":"article:tag","content":"springboot"}],["meta",{"property":"article:tag","content":"redis"}],["meta",{"property":"article:published_time","content":"2023-06-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-22T14:03:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"redis 使用过程中的bug记录\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-06-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-22T14:03:31.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuyong\\",\\"url\\":\\"https://github.com/coder-xuyong\\"}]}"]]},"headers":[{"level":2,"title":"Windows环境","slug":"windows环境","link":"#windows环境","children":[]},{"level":2,"title":"MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.","slug":"misconf-redis-is-configured-to-save-rdb-snapshots-but-it-is-currently-not-able-to-persist-on-disk-commands-that-may-modify-the-data-set-are-disabled-because-this-instance-is-configured-to-report-errors-during-writes-if-rdb-snapshotting-fails-stop-writes-on-bgsave-error-option-please-check-the-redis-logs-for-details-about-the-rdb-error","link":"#misconf-redis-is-configured-to-save-rdb-snapshots-but-it-is-currently-not-able-to-persist-on-disk-commands-that-may-modify-the-data-set-are-disabled-because-this-instance-is-configured-to-report-errors-during-writes-if-rdb-snapshotting-fails-stop-writes-on-bgsave-error-option-please-check-the-redis-logs-for-details-about-the-rdb-error","children":[]}],"git":{"createdTime":1734876211000,"updatedTime":1734876211000,"contributors":[{"name":"coder-xuyong","username":"coder-xuyong","email":"1299461580@qq.com","commits":1,"url":"https://github.com/coder-xuyong"}]},"readingTime":{"minutes":1.42,"words":427},"filePathRelative":"posts/redis/redisBUG.md","localizedDate":"2023年6月1日","excerpt":"<p>redis 使用过程中的bug记录</p>\\n","autoDesc":true}');export{p as comp,c as data};
