import{_ as i,c as a,b as e,o as n}from"./app-DqoBs-db.js";const l={};function t(h,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="zookeeper-命令" tabindex="-1"><a class="header-anchor" href="#zookeeper-命令"><span>ZooKeeper 命令</span></a></h1><blockquote><p>ZooKeeper 命令用于在 ZooKeeper 服务上执行操作。</p></blockquote><h2 id="启动服务和启动命令行" tabindex="-1"><a class="header-anchor" href="#启动服务和启动命令行"><span>启动服务和启动命令行</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bin/zkServer.sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动命令行，不指定服务地址则默认连接到localhost:2181</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bin/zkCli.sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hadoop001:2181</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查看节点列表" tabindex="-1"><a class="header-anchor" href="#查看节点列表"><span>查看节点列表</span></a></h2><h3 id="ls-命令" tabindex="-1"><a class="header-anchor" href="#ls-命令"><span><code>ls</code> 命令</span></a></h3><p><code>ls</code> 命令用于查看某个路径下目录列表。</p><p>【语法】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>说明：</p><ul><li><strong>path</strong>：代表路径。</li></ul></blockquote><p>【示例】</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>[zk: localhost:2181(CONNECTED) 0] ls /</span></span>
<span class="line"><span>[cluster, controller_epoch, brokers, storm, zookeeper, admin,  ...]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ls2-命令" tabindex="-1"><a class="header-anchor" href="#ls2-命令"><span><code>ls2</code> 命令</span></a></h3><p><code>ls2</code> 命令用于查看某个路径下目录列表，它比 ls 命令列出更多的详细信息。</p><p>【语法】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>说明：</p><ul><li><strong>path</strong>：代表路径。</li></ul></blockquote><p>【示例】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 1] ls2 /</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[cluster, controller_epoch, brokers, storm, zookeeper, admin, ....]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ctime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Thu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 01</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 08:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1970</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Thu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 01</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 08:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1970</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x130</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cversion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 19</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aclVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ephemeralOwner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataLength</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">numChildren</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 11</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="节点的增删改查" tabindex="-1"><a class="header-anchor" href="#节点的增删改查"><span>节点的增删改查</span></a></h2><h3 id="get-命令" tabindex="-1"><a class="header-anchor" href="#get-命令"><span><code>get</code> 命令</span></a></h3><p><code>get</code> 命令用于获取节点数据和状态信息。</p><p>【语法】</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>get path [watch]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>说明：</p><ul><li><strong>path</strong>：代表路径。</li><li><strong>[watch]</strong>：对节点进行事件监听。</li></ul></blockquote><p>【示例】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 31] get /hadoop</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">123456</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   #节点数据</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ctime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Fri</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> May</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:03:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2019</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Fri</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> May</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:03:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2019</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cversion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aclVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ephemeralOwner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataLength</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">numChildren</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>说明：</p><p>节点各个属性如下表。其中一个重要的概念是 Zxid(ZooKeeper Transaction Id)，ZooKeeper 节点的每一次更改都具有唯一的 Zxid，如果 Zxid1 小于 Zxid2，则 Zxid1 的更改发生在 Zxid2 更改之前。</p><table><thead><tr><th><strong>状态属性</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>cZxid</td><td>数据节点创建时的事务 ID</td></tr><tr><td>ctime</td><td>数据节点创建时的时间</td></tr><tr><td>mZxid</td><td>数据节点最后一次更新时的事务 ID</td></tr><tr><td>mtime</td><td>数据节点最后一次更新时的时间</td></tr><tr><td>pZxid</td><td>数据节点的子节点最后一次被修改时的事务 ID</td></tr><tr><td>cversion</td><td>子节点的更改次数</td></tr><tr><td>dataVersion</td><td>节点数据的更改次数</td></tr><tr><td>aclVersion</td><td>节点的 ACL 的更改次数</td></tr><tr><td>ephemeralOwner</td><td>如果节点是临时节点，则表示创建该节点的会话的 SessionID；如果节点是持久节点，则该属性值为 0</td></tr><tr><td>dataLength</td><td>数据内容的长度</td></tr><tr><td>numChildren</td><td>数据节点当前的子节点个数</td></tr></tbody></table></blockquote><h3 id="stat-命令" tabindex="-1"><a class="header-anchor" href="#stat-命令"><span><code>stat</code> 命令</span></a></h3><p><code>stat</code> 命令用于查看节点状态信息。它的返回值和 <code>get</code> 命令类似，但不会返回节点数据。</p><p>【语法】</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>stat path [watch]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>path</strong>：代表路径。</li><li><strong>[watch]</strong>：对节点进行事件监听。</li></ul><p>【示例】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 32] stat /hadoop</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ctime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Fri</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> May</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:03:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2019</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Fri</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> May</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:03:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2019</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cversion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aclVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ephemeralOwner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataLength</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">numChildren</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="create-命令" tabindex="-1"><a class="header-anchor" href="#create-命令"><span><code>create</code> 命令</span></a></h3><p><code>create</code> 命令用于创建节点并赋值。</p><p>【语法】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [-s] [-e] path data acl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>说明：</p><ul><li><strong>[-s][-e]</strong>：-s 和 -e 都是可选的，-s 代表顺序节点，-e 代表临时节点，注意其中 -s 和 -e 可以同时使用的，并且临时节点不能再创建子节点。 <ul><li>默认情况下，所有 znode 都是持久的。</li><li>顺序节点保证 znode 路径将是唯一的。</li><li>临时节点会在会话过期或客户端断开连接时被自动删除。</li></ul></li><li><strong>path</strong>：指定要创建节点的路径，比如 <strong>/hadoop</strong>。</li><li><strong>data</strong>：要在此节点存储的数据。</li><li><strong>acl</strong>：访问权限相关，默认是 world，相当于全世界都能访问。</li></ul></blockquote><p>【示例】创建持久节点</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 4] create /hadoop 123456</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Created</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /hadoop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】创建有序节点，此时创建的节点名为指定节点名 + 自增序号：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 23] create -s /a  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;aaa&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Created</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /a0000000022</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 24] create -s /b  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;bbb&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Created</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /b0000000023</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 25] create -s /c  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ccc&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Created</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /c0000000024</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】创建临时节点：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 26] create -e /tmp  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;tmp&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Created</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /tmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="set-命令" tabindex="-1"><a class="header-anchor" href="#set-命令"><span><code>set</code> 命令</span></a></h3><p><code>set</code> 命令用于修改节点存储的数据。</p><p>【语法】</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>set path data [version]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>说明：</p><ul><li><strong>path</strong>：节点路径。</li><li><strong>data</strong>：需要存储的数据。</li><li><strong>[version]</strong>：可选项，版本号(可用作乐观锁)。</li></ul></blockquote><p>【示例】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 33] set /hadoop 345</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ctime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Fri</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> May</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:03:06</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2019</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14c</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Fri</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> May</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:13:05</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2019</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pZxid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x14b</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cversion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 注意更改后此时版本号为 1，默认创建时为 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aclVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ephemeralOwner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataLength</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">numChildren</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以基于版本号进行更改，此时类似于乐观锁机制，当你传入的数据版本号 (dataVersion) 和当前节点的数据版本号不符合时，zookeeper 会拒绝本次修改：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 34] set /hadoop 678 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> No</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> valid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /hadoop</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    #无效的版本号</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="delete-命令" tabindex="-1"><a class="header-anchor" href="#delete-命令"><span><code>delete</code> 命令</span></a></h3><p><code>delete</code> 命令用于删除某节点。</p><p>【语法】</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>delete path [version]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>说明：</p><ul><li><strong>path</strong>：节点路径。</li><li><strong>[version]</strong>：可选项，版本号（同 set 命令）。和更新节点数据一样，也可以传入版本号，当你传入的数据版本号 (dataVersion) 和当前节点的数据版本号不符合时，zookeeper 不会执行删除操作。</li></ul></blockquote><p>【示例】</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 36] delete /hadoop 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> No</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> valid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /hadoop</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   #无效的版本号</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 37] delete /hadoop 1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 38]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>delete</code> 命令不能删除带有子节点的节点。如果想要删除节点及其子节点，可以使用 <code>deleteall path</code></p><h2 id="监听器" tabindex="-1"><a class="header-anchor" href="#监听器"><span>监听器</span></a></h2><p>针对每个节点的操作，都会有一个监听者（watcher）。</p><ul><li>当监听的某个对象（znode）发生了变化，则触发监听事件。</li><li>zookeeper 中的监听事件是一次性的，触发后立即销毁。</li><li>父节点，子节点的增删改都能够触发其监听者（watcher）</li><li>针对不同类型的操作，触发的 watcher 事件也不同： <ul><li>父节点 Watcher 事件 <ul><li>创建父节点触发：NodeCreated</li><li>修改节点数据触发：NodeDatachanged</li><li>删除节点数据触发：NodeDeleted</li></ul></li><li>子节点 Watcher 事件 <ul><li>创建子节点触发：NodeChildrenChanged</li><li>删除子节点触发：NodeChildrenChanged</li><li>修改子节点不触发事件</li></ul></li></ul></li></ul><h3 id="get-path" tabindex="-1"><a class="header-anchor" href="#get-path"><span>get path</span></a></h3><p>使用 <code>get path -w</code> 注册的监听器能够在节点内容发生改变的时候，向客户端发出通知。需要注意的是 zookeeper 的触发器是一次性的 (One-time trigger)，即触发一次后就会立即失效。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 4] get /hadoop -w</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 5] set /hadoop 45678</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WATCHER::</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WatchedEvent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> state:SyncConnected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type:NodeDataChanged</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> path:/hadoop</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #节点值改变</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>get path [watch] 在当前版本已废弃</p></blockquote><h3 id="stat-path" tabindex="-1"><a class="header-anchor" href="#stat-path"><span>stat path</span></a></h3><p>使用 <code>stat path -w</code> 注册的监听器能够在节点状态发生改变的时候，向客户端发出通知。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 7] stat path -w</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 8] set /hadoop 112233</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WATCHER::</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WatchedEvent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> state:SyncConnected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type:NodeDataChanged</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> path:/hadoop</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #节点值改变</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>stat path [watch] 在当前版本已废弃</p></blockquote><h3 id="ls-ls2-path" tabindex="-1"><a class="header-anchor" href="#ls-ls2-path"><span>ls\\ls2 path</span></a></h3><p>使用 <code>ls path -w</code> 或 <code>ls2 path -w</code> 注册的监听器能够监听该节点下所有<strong>子节点</strong>的增加和删除操作。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 9] ls /hadoop -w</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[zk: localhost:2181(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">CONNECTED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 10] create  /hadoop/yarn </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;aaa&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WATCHER::</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WatchedEvent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> state:SyncConnected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type:NodeChildrenChanged</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> path:/hadoop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ls path [watch] 和 ls2 path [watch] 在当前版本已废弃</p></blockquote><h2 id="辅助命令" tabindex="-1"><a class="header-anchor" href="#辅助命令"><span>辅助命令</span></a></h2><p>使用 <code>help</code> 可以查看所有命令帮助信息。</p><p>使用 <code>history</code> 可以查看最近 10 条历史记录。</p><h2 id="zookeeper-四字命令" tabindex="-1"><a class="header-anchor" href="#zookeeper-四字命令"><span>zookeeper 四字命令</span></a></h2><table><thead><tr><th>命令</th><th>功能描述</th></tr></thead><tbody><tr><td>conf</td><td>打印服务配置的详细信息。</td></tr><tr><td>cons</td><td>列出连接到此服务器的所有客户端的完整连接/会话详细信息。包括接收/发送的数据包数量，会话 ID，操作延迟，上次执行的操作等信息。</td></tr><tr><td>dump</td><td>列出未完成的会话和临时节点。这只适用于 Leader 节点。</td></tr><tr><td>envi</td><td>打印服务环境的详细信息。</td></tr><tr><td>ruok</td><td>测试服务是否处于正确状态。如果正确则返回“imok”，否则不做任何相应。</td></tr><tr><td>stat</td><td>列出服务器和连接客户端的简要详细信息。</td></tr><tr><td>wchs</td><td>列出所有 watch 的简单信息。</td></tr><tr><td>wchc</td><td>按会话列出服务器 watch 的详细信息。</td></tr><tr><td>wchp</td><td>按路径列出服务器 watch 的详细信息。</td></tr></tbody></table><blockquote><p>更多四字命令可以参阅官方文档：<a href="https://zookeeper.apache.org/doc/current/zookeeperAdmin.html" target="_blank" rel="noopener noreferrer">https://zookeeper.apache.org/doc/current/zookeeperAdmin.html</a></p></blockquote><p>使用前需要使用 <code>yum install nc</code> 安装 nc 命令，使用示例如下：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@hadoop001 bin]# echo stat | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2181</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Zookeeper</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">built</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 06/29/2018</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 04:05</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Clients:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> /0:0:0:0:0:0:0:1:50584[1](queued</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=0,recved=371,sent=371</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> /0:0:0:0:0:0:0:1:50656[0](queued</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=0,recved=1,sent=0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Latency</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> min/avg/max:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0/0/19</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Received:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 372</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sent:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 371</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Connections:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Outstanding:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Zxid:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x150</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Mode:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> standalone</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> count:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 167</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://www.runoob.com/w3cnote/zookeeper-bs-command.html" target="_blank" rel="noopener noreferrer">Zookeeper 客户端基础命令使用</a></li></ul>`,88)]))}const p=i(l,[["render",t],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/pages/13c5e2/","title":"ZooKeeper命令","lang":"zh-CN","frontmatter":{"title":"ZooKeeper命令","date":"2022-02-19T13:27:21.000Z","order":3,"categories":["分布式","分布式协同","ZooKeeper"],"tags":["分布式","分布式协同"],"permalink":"/pages/13c5e2/","description":"ZooKeeper 命令 ZooKeeper 命令用于在 ZooKeeper 服务上执行操作。 启动服务和启动命令行 查看节点列表 ls 命令 ls 命令用于查看某个路径下目录列表。 【语法】 说明： path：代表路径。 【示例】 ls2 命令 ls2 命令用于查看某个路径下目录列表，它比 ls 命令列出更多的详细信息。 【语法】 说明： path：...","head":[["meta",{"property":"og:url","content":"https://coder-xuyong.github.io/blog/pages/13c5e2/"}],["meta",{"property":"og:site_name","content":"coder-xuyong"}],["meta",{"property":"og:title","content":"ZooKeeper命令"}],["meta",{"property":"og:description","content":"ZooKeeper 命令 ZooKeeper 命令用于在 ZooKeeper 服务上执行操作。 启动服务和启动命令行 查看节点列表 ls 命令 ls 命令用于查看某个路径下目录列表。 【语法】 说明： path：代表路径。 【示例】 ls2 命令 ls2 命令用于查看某个路径下目录列表，它比 ls 命令列出更多的详细信息。 【语法】 说明： path：..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-10T02:14:26.000Z"}],["meta",{"property":"article:tag","content":"分布式"}],["meta",{"property":"article:tag","content":"分布式协同"}],["meta",{"property":"article:published_time","content":"2022-02-19T13:27:21.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-10T02:14:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ZooKeeper命令\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-02-19T13:27:21.000Z\\",\\"dateModified\\":\\"2025-06-10T02:14:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuyong\\",\\"url\\":\\"https://github.com/coder-xuyong\\"}]}"]]},"headers":[{"level":2,"title":"启动服务和启动命令行","slug":"启动服务和启动命令行","link":"#启动服务和启动命令行","children":[]},{"level":2,"title":"查看节点列表","slug":"查看节点列表","link":"#查看节点列表","children":[{"level":3,"title":"ls 命令","slug":"ls-命令","link":"#ls-命令","children":[]},{"level":3,"title":"ls2 命令","slug":"ls2-命令","link":"#ls2-命令","children":[]}]},{"level":2,"title":"节点的增删改查","slug":"节点的增删改查","link":"#节点的增删改查","children":[{"level":3,"title":"get 命令","slug":"get-命令","link":"#get-命令","children":[]},{"level":3,"title":"stat 命令","slug":"stat-命令","link":"#stat-命令","children":[]},{"level":3,"title":"create 命令","slug":"create-命令","link":"#create-命令","children":[]},{"level":3,"title":"set 命令","slug":"set-命令","link":"#set-命令","children":[]},{"level":3,"title":"delete 命令","slug":"delete-命令","link":"#delete-命令","children":[]}]},{"level":2,"title":"监听器","slug":"监听器","link":"#监听器","children":[{"level":3,"title":"get path","slug":"get-path","link":"#get-path","children":[]},{"level":3,"title":"stat path","slug":"stat-path","link":"#stat-path","children":[]},{"level":3,"title":"ls\\\\ls2 path","slug":"ls-ls2-path","link":"#ls-ls2-path","children":[]}]},{"level":2,"title":"辅助命令","slug":"辅助命令","link":"#辅助命令","children":[]},{"level":2,"title":"zookeeper 四字命令","slug":"zookeeper-四字命令","link":"#zookeeper-四字命令","children":[]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"git":{"createdTime":1749521666000,"updatedTime":1749521666000,"contributors":[{"name":"XuYong","username":"XuYong","email":"1299461580@qq.com","commits":1,"url":"https://github.com/XuYong"}]},"readingTime":{"minutes":6.97,"words":2090},"filePathRelative":"posts/15.分布式/11.分布式协同/02.ZooKeeper/03.ZooKeeper命令.md","localizedDate":"2022年2月19日","excerpt":"\\n<blockquote>\\n<p>ZooKeeper 命令用于在 ZooKeeper 服务上执行操作。</p>\\n</blockquote>\\n<h2>启动服务和启动命令行</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 启动服务</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">bin/zkServer.sh</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> start</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 启动命令行，不指定服务地址则默认连接到localhost:2181</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">bin/zkCli.sh</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -server</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> hadoop001:2181</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{p as comp,d as data};
