import{_ as s,c as a,b as e,o as n}from"./app-CtFWtWSS.js";const l={};function h(t,i){return n(),a("div",null,i[0]||(i[0]=[e(`<h1 id="hive-运维" tabindex="-1"><a class="header-anchor" href="#hive-运维"><span>Hive 运维</span></a></h1><h2 id="hive-安装" tabindex="-1"><a class="header-anchor" href="#hive-安装"><span>Hive 安装</span></a></h2><h3 id="下载并解压" tabindex="-1"><a class="header-anchor" href="#下载并解压"><span>下载并解压</span></a></h3><p>下载所需版本的 Hive，这里我下载版本为 <code>cdh5.15.2</code>。下载地址：<a href="http://archive.cloudera.com/cdh5/cdh/5/" target="_blank" rel="noopener noreferrer">http://archive.cloudera.com/cdh5/cdh/5/</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 下载后进行解压</span></span>
<span class="line"><span> tar -zxvf hive-1.1.0-cdh5.15.2.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置环境变量" tabindex="-1"><a class="header-anchor" href="#配置环境变量"><span>配置环境变量</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># vim /etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>添加环境变量：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>export HIVE_HOME=/usr/app/hive-1.1.0-cdh5.15.2</span></span>
<span class="line"><span>export PATH=$HIVE_HOME/bin:$PATH</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>使得配置的环境变量立即生效：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># source /etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="修改配置" tabindex="-1"><a class="header-anchor" href="#修改配置"><span>修改配置</span></a></h3><p><strong>1. <a href="http://hive-env.sh" target="_blank" rel="noopener noreferrer">hive-env.sh</a></strong></p><p>进入安装目录下的 <code>conf/</code> 目录，拷贝 Hive 的环境配置模板 <code>flume-env.sh.template</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cp hive-env.sh.template hive-env.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改 <code>hive-env.sh</code>，指定 Hadoop 的安装路径：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>HADOOP_HOME=/usr/app/hadoop-2.6.0-cdh5.15.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>2. hive-site.xml</strong></p><p>新建 hive-site.xml 文件，内容如下，主要是配置存放元数据的 MySQL 的地址、驱动、用户名和密码等信息：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>&lt;?xml version=&quot;1.0&quot;?&gt;</span></span>
<span class="line"><span>&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;configuration&gt;</span></span>
<span class="line"><span>  &lt;property&gt;</span></span>
<span class="line"><span>    &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span></span>
<span class="line"><span>    &lt;value&gt;jdbc:mysql://hadoop001:3306/hadoop_hive?createDatabaseIfNotExist=true&lt;/value&gt;</span></span>
<span class="line"><span>  &lt;/property&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;property&gt;</span></span>
<span class="line"><span>    &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span></span>
<span class="line"><span>    &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</span></span>
<span class="line"><span>  &lt;/property&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;property&gt;</span></span>
<span class="line"><span>    &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span></span>
<span class="line"><span>    &lt;value&gt;root&lt;/value&gt;</span></span>
<span class="line"><span>  &lt;/property&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;property&gt;</span></span>
<span class="line"><span>    &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span></span>
<span class="line"><span>    &lt;value&gt;root&lt;/value&gt;</span></span>
<span class="line"><span>  &lt;/property&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;/configuration&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="拷贝数据库驱动" tabindex="-1"><a class="header-anchor" href="#拷贝数据库驱动"><span>拷贝数据库驱动</span></a></h3><p>将 MySQL 驱动包拷贝到 Hive 安装目录的 <code>lib</code> 目录下, MySQL 驱动的下载地址为：<a href="https://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/downloads/connector/j/</a>。</p><h3 id="初始化元数据库" tabindex="-1"><a class="header-anchor" href="#初始化元数据库"><span>初始化元数据库</span></a></h3><ul><li><p>当使用的 hive 是 1.x 版本时，可以不进行初始化操作，Hive 会在第一次启动的时候会自动进行初始化，但不会生成所有的元数据信息表，只会初始化必要的一部分，在之后的使用中用到其余表时会自动创建；</p></li><li><p>当使用的 hive 是 2.x 版本时，必须手动初始化元数据库。初始化命令：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># schematool 命令在安装目录的 bin 目录下，由于上面已经配置过环境变量，在任意位置执行即可</span></span>
<span class="line"><span>schematool -dbType mysql -initSchema</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>这里我使用的是 CDH 的 <code>hive-1.1.0-cdh5.15.2.tar.gz</code>，对应 <code>Hive 1.1.0</code> 版本，可以跳过这一步。</p><h3 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h3><p>由于已经将 Hive 的 bin 目录配置到环境变量，直接使用以下命令启动，成功进入交互式命令行后执行 <code>show databases</code> 命令，无异常则代表搭建成功。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># hive</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-install-2.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>在 Mysql 中也能看到 Hive 创建的库和存放元数据信息的表</p><figure><img src="https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-mysql-tables.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="hiveserver2-beeline" tabindex="-1"><a class="header-anchor" href="#hiveserver2-beeline"><span>HiveServer2/beeline</span></a></h2><p>Hive 内置了 HiveServer 和 HiveServer2 服务，两者都允许客户端使用多种编程语言进行连接，但是 HiveServer 不能处理多个客户端的并发请求，因此产生了 HiveServer2。</p><p>HiveServer2（HS2）允许远程客户端可以使用各种编程语言向 Hive 提交请求并检索结果，支持多客户端并发访问和身份验证。HS2 是由多个服务组成的单个进程，其包括基于 Thrift 的 Hive 服务（TCP 或 HTTP）和用于 Web UI 的 Jetty Web 服务。</p><p>HiveServer2 拥有自己的 CLI 工具——Beeline。Beeline 是一个基于 SQLLine 的 JDBC 客户端。由于目前 HiveServer2 是 Hive 开发维护的重点，所以官方更加推荐使用 Beeline 而不是 Hive CLI。以下主要讲解 Beeline 的配置方式。</p><h3 id="修改-hadoop-配置" tabindex="-1"><a class="header-anchor" href="#修改-hadoop-配置"><span>修改 Hadoop 配置</span></a></h3><p>修改 hadoop 集群的 core-site.xml 配置文件，增加如下配置，指定 hadoop 的 root 用户可以代理本机上所有的用户。</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;hadoop.proxyuser.root.hosts&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;*&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;hadoop.proxyuser.root.groups&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;*&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>之所以要配置这一步，是因为 hadoop 2.0 以后引入了安全伪装机制，使得 hadoop 不允许上层系统（如 hive）直接将实际用户传递到 hadoop 层，而应该将实际用户传递给一个超级代理，由该代理在 hadoop 上执行操作，以避免任意客户端随意操作 hadoop。如果不配置这一步，在之后的连接中可能会抛出 <code>AuthorizationException</code> 异常。</p><blockquote><p>关于 Hadoop 的用户代理机制，可以参考：<a href="https://blog.csdn.net/u012948976/article/details/49904675#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E8%A7%A3%E8%AF%BB" target="_blank" rel="noopener noreferrer">hadoop 的用户代理机制</a> 或 <a href="http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Superusers.html" target="_blank" rel="noopener noreferrer">Superusers Acting On Behalf Of Other Users</a></p></blockquote><h3 id="启动-hiveserver2" tabindex="-1"><a class="header-anchor" href="#启动-hiveserver2"><span>启动 hiveserver2</span></a></h3><p>由于上面已经配置过环境变量，这里直接启动即可：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># nohup hiveserver2 &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="使用-beeline" tabindex="-1"><a class="header-anchor" href="#使用-beeline"><span>使用 beeline</span></a></h3><p>可以使用以下命令进入 beeline 交互式命令行，出现 <code>Connected</code> 则代表连接成功。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">beeline</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jdbc:hive2://hadoop001:10000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="beeline-选项" tabindex="-1"><a class="header-anchor" href="#beeline-选项"><span>Beeline 选项</span></a></h3><p>Beeline 拥有更多可使用参数，可以使用 <code>beeline --help</code> 查看，完整参数如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Usage:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> org.apache.hive.cli.beeline.BeeLine</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">database</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ur</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">l&gt;               </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> JDBC</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> URL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                              reconnect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> saved</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (in </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">conjunction</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> !save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">usernam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> as</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">passwor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;                   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> as</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clas</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">s&gt;               </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> class</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">init</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">script</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> initialization</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">quer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">y&gt;                      </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">query</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> that</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> should</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> executed</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">script</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> that</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> should</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> executed</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   -w</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (or) --password-file &lt;password file&gt;  the password file to read password from</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   --hiveconf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> property=value</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       Use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> value</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> given</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> property</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   --hivevar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name=value</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            hive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> variable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> value</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                                   This</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Hive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> specific</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> settings</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> variables</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                                   can</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> session</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> level</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> referenced</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Hive</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                                   commands</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> queries.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --property-file</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">property-file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> read</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connection</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (url, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">driver,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> password</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) from</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --color</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]            control whether color is used </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> display</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --showHeader</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]       show column names in query results</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --headerInterval</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ROWS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;          </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> interval</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> between</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> which</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> heades</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> are</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> displayed</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --fastConnect</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]      skip building table/column list </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tab-completion</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --autoCommit</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]       enable/disable automatic transaction commit</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --verbose</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]          show verbose error messages and debug info</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --showWarnings</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]     display connection warnings</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --showNestedErrs</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]   display nested errors</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --numberFormat</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[pattern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]        format numbers using DecimalFormat pattern</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --force</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]            continue running script even after errors</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --maxWidth</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MAXWIDTH</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">             the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> width</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --maxColumnWidth</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MAXCOLWIDTH</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> width</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> when</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> displaying</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> columns</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --silent</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]           be more silent</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --autosave</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]         automatically save preferences</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --outputformat</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[table/vertical/csv2/tsv2/dsv/csv/tsv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  format mode </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result display</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --incrementalBufferRows</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NUMROWS</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rows</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> buffer</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> when</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> printing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rows</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stdout,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                                   defaults</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">only</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> applicable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> if</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --incremental=true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                                   and</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --outputformat=table</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --truncateTable</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]    truncate table column when it exceeds length</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --delimiterForDSV</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">DELIMITER</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     specify</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delimiter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delimiter-separated</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> values</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> output</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (default: |)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --isolation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">LEVEL</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">               set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> transaction</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> isolation</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> level</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --nullemptystring</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]  set to true to get historic behavior of printing null as empty string</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --maxHistoryRows</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MAXHISTORYROWS</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maximum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rows</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> store</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> beeline</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> history.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   --convertBinaryArrayToString</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[true/false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]    display binary column data as string or as byte array</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   --help</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                          display</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> message</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="常用参数" tabindex="-1"><a class="header-anchor" href="#常用参数"><span>常用参数</span></a></h3><p>在 Hive CLI 中支持的参数，Beeline 都支持，常用的参数如下。更多参数说明可以参见官方文档 <a href="https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline%E2%80%93NewCommandLineShell" target="_blank" rel="noopener noreferrer">Beeline Command Options</a></p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>-u</code></td><td>数据库地址</td></tr><tr><td><code>-n</code></td><td>用户名</td></tr><tr><td><code>-p</code></td><td>密码</td></tr><tr><td>-d</td><td>驱动 (可选)</td></tr><tr><td><code>-e</code>*</td><td>执行 SQL 命令</td></tr><tr><td><code>-f</code>*</td><td>执行 SQL 脚本</td></tr><tr><td><code>-i (or)--init</code></td><td>在进入交互模式之前运行初始化脚本</td></tr><tr><td><code>--property-file</code></td><td>指定配置文件</td></tr><tr><td><code>--hiveconf property=value</code></td><td>指定配置属性</td></tr><tr><td><code>--hivevar name=value</code></td><td>用户自定义属性，在会话级别有效</td></tr></tbody></table><p>示例： 使用用户名和密码连接 Hive</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">beeline</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jdbc:hive2://localhost:10000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> username</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> password</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="hive-命令" tabindex="-1"><a class="header-anchor" href="#hive-命令"><span>Hive 命令</span></a></h2><h3 id="help" tabindex="-1"><a class="header-anchor" href="#help"><span>Help</span></a></h3><p>使用 <code>hive -H</code> 或者 <code>hive --help</code> 命令可以查看所有命令的帮助，显示如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">usage:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -d,--define</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">key=valu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;          </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Variable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> subsitution</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                                  commands.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> e.g.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A=B</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --define</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A=B</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --定义用户自定义变量</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    --database</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">databasenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;     </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Specify</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> database</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 指定使用的数据库</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">quoted-query-strin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">g&gt;         </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> line</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 执行指定的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SQL</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">filenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                    </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> files</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   --执行</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 脚本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -H,--help</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                        Print</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> help</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> information</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 打印帮助信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    --hiveconf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">property=valu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> value</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> given</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> property</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    --自定义配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    --hivevar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">key=valu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;         </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Variable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> subsitution</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --自定义变量</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                                  commands.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> e.g.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --hivevar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> A=B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">filenam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                    </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Initialization</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --在进入交互模式之前运行初始化脚本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -S,--silent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                      Silent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> interactive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    --静默模式</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -v,--verbose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     Verbose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (echo </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">executed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  --详细模式</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="交互式命令行" tabindex="-1"><a class="header-anchor" href="#交互式命令行"><span>交互式命令行</span></a></h3><p>直接使用 <code>Hive</code> 命令，不加任何参数，即可进入交互式命令行。</p><h3 id="执行-sql-命令" tabindex="-1"><a class="header-anchor" href="#执行-sql-命令"><span>执行 SQL 命令</span></a></h3><p>在不进入交互式命令行的情况下，可以使用 <code>hive -e</code>执行 SQL 命令。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;select * from emp&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><a href="https://github.com/heibaiying/BigData-Notes/blob/master/pictures/hive-e.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-e.png" alt="img" tabindex="0" loading="lazy"></a><figcaption>img</figcaption></figure><h3 id="执行-sql-脚本" tabindex="-1"><a class="header-anchor" href="#执行-sql-脚本"><span>执行 SQL 脚本</span></a></h3><p>用于执行的 sql 脚本可以在本地文件系统，也可以在 HDFS 上。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 本地文件系统</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/file/simple.sql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># HDFS文件系统</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hdfs://hadoop001:8020/tmp/simple.sql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>simple.sql</code> 内容如下：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> emp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="配置-hive-变量" tabindex="-1"><a class="header-anchor" href="#配置-hive-变量"><span>配置 Hive 变量</span></a></h3><p>可以使用 <code>--hiveconf</code> 设置 Hive 运行时的变量。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;select * from emp&#39;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--hiveconf </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hive.exec.scratchdir=/tmp/hive_scratch</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--hiveconf </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mapred.reduce.tasks=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>hive.exec.scratchdir：指定 HDFS 上目录位置，用于存储不同 map/reduce 阶段的执行计划和这些阶段的中间输出结果。</p></blockquote><h3 id="配置文件启动" tabindex="-1"><a class="header-anchor" href="#配置文件启动"><span>配置文件启动</span></a></h3><p>使用 <code>-i</code> 可以在进入交互模式之前运行初始化脚本，相当于指定配置文件启动。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/file/hive-init.conf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中 <code>hive-init.conf</code> 的内容如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive.exec.mode.local.auto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>hive.exec.mode.local.auto 默认值为 false，这里设置为 true ，代表开启本地模式。</p></blockquote><h3 id="用户自定义变量" tabindex="-1"><a class="header-anchor" href="#用户自定义变量"><span>用户自定义变量</span></a></h3><p><code>--define</code>和 <code>--hivevar</code>在功能上是等价的，都是用来实现自定义变量，这里给出一个示例:</p><p>定义变量：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --define</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  n=ename</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --hiveconf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --hivevar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> j=job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在查询中引用自定义变量：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 以下两条语句等价</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">select</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> emp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">select</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">hivevar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> emp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 以下两条语句等价</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">select</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">j</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> emp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">select</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">hivevar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">j</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> emp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果如下：</p><figure><a href="https://github.com/heibaiying/BigData-Notes/blob/master/pictures/hive-n-j.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-n-j.png" alt="img" tabindex="0" loading="lazy"></a><figcaption>img</figcaption></figure><h2 id="hive-配置" tabindex="-1"><a class="header-anchor" href="#hive-配置"><span>Hive 配置</span></a></h2><p>可以通过三种方式对 Hive 的相关属性进行配置，分别介绍如下：</p><h3 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h3><p>方式一为使用配置文件，使用配置文件指定的配置是永久有效的。Hive 有以下三个可选的配置文件：</p><ul><li><code>hive-site.xml</code> - Hive 的主要配置文件；</li><li><code>hivemetastore-site.xml</code> - 关于元数据的配置；</li><li><code>hiveserver2-site.xml</code> - 关于 HiveServer2 的配置。</li></ul><p>示例如下,在 hive-site.xml 配置 <code>hive.exec.scratchdir</code>：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;hive.exec.scratchdir&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;/tmp/mydir&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">description</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Scratch space for Hive jobs&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">description</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hiveconf" tabindex="-1"><a class="header-anchor" href="#hiveconf"><span>hiveconf</span></a></h3><p>方式二为在启动命令行 (Hive CLI / Beeline) 的时候使用 <code>--hiveconf</code> 指定配置，这种方式指定的配置作用于整个 Session。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --hiveconf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive.exec.scratchdir=/tmp/mydir</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="set" tabindex="-1"><a class="header-anchor" href="#set"><span>set</span></a></h3><p>方式三为在交互式环境下 (Hive CLI / Beeline)，使用 set 命令指定。这种设置的作用范围也是 Session 级别的，配置对于执行该命令后的所有命令生效。set 兼具设置参数和查看参数的功能。如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>0: jdbc:hive2://hadoop001:10000&gt; set hive.exec.scratchdir=/tmp/mydir;</span></span>
<span class="line"><span>No rows affected (0.025 seconds)</span></span>
<span class="line"><span>0: jdbc:hive2://hadoop001:10000&gt; set hive.exec.scratchdir;</span></span>
<span class="line"><span>+----------------------------------+--+</span></span>
<span class="line"><span>|               set                |</span></span>
<span class="line"><span>+----------------------------------+--+</span></span>
<span class="line"><span>| hive.exec.scratchdir=/tmp/mydir  |</span></span>
<span class="line"><span>+----------------------------------+--+</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置优先级" tabindex="-1"><a class="header-anchor" href="#配置优先级"><span>配置优先级</span></a></h3><p>配置的优先顺序如下 (由低到高)：<br><code>hive-site.xml</code> - &gt;<code>hivemetastore-site.xml</code>- &gt; <code>hiveserver2-site.xml</code> - &gt;<code>-- hiveconf</code>- &gt; <code>set</code></p><h3 id="配置参数" tabindex="-1"><a class="header-anchor" href="#配置参数"><span>配置参数</span></a></h3><p>Hive 可选的配置参数非常多，在用到时查阅官方文档即可<a href="https://cwiki.apache.org/confluence/display/Hive/AdminManual+Configuration" target="_blank" rel="noopener noreferrer">AdminManual Configuration</a></p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://github.com/heibaiying/BigData-Notes" target="_blank" rel="noopener noreferrer">BigData-Notes</a></li></ul>`,106)]))}const k=s(l,[["render",h],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/pages/94f791/","title":"hive-ops","lang":"zh-CN","frontmatter":{"title":"hive-ops","date":"2020-02-24T21:14:47.000Z","order":7,"categories":["大数据","hive"],"tags":["大数据","Hive","运维"],"permalink":"/pages/94f791/","description":"Hive 运维 Hive 安装 下载并解压 下载所需版本的 Hive，这里我下载版本为 cdh5.15.2。下载地址：http://archive.cloudera.com/cdh5/cdh/5/ 配置环境变量 添加环境变量： 使得配置的环境变量立即生效： 修改配置 1. hive-env.sh 进入安装目录下的 conf/ 目录，拷贝 Hive 的环...","head":[["meta",{"property":"og:url","content":"https://coder-xuyong.github.io/blog/pages/94f791/"}],["meta",{"property":"og:site_name","content":"coder-xuyong"}],["meta",{"property":"og:title","content":"hive-ops"}],["meta",{"property":"og:description","content":"Hive 运维 Hive 安装 下载并解压 下载所需版本的 Hive，这里我下载版本为 cdh5.15.2。下载地址：http://archive.cloudera.com/cdh5/cdh/5/ 配置环境变量 添加环境变量： 使得配置的环境变量立即生效： 修改配置 1. hive-env.sh 进入安装目录下的 conf/ 目录，拷贝 Hive 的环..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-install-2.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-10T02:14:26.000Z"}],["meta",{"property":"article:tag","content":"大数据"}],["meta",{"property":"article:tag","content":"Hive"}],["meta",{"property":"article:tag","content":"运维"}],["meta",{"property":"article:published_time","content":"2020-02-24T21:14:47.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-10T02:14:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"hive-ops\\",\\"image\\":[\\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-install-2.png\\",\\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-mysql-tables.png\\",\\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-e.png\\",\\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-n-j.png\\"],\\"datePublished\\":\\"2020-02-24T21:14:47.000Z\\",\\"dateModified\\":\\"2025-06-10T02:14:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuyong\\",\\"url\\":\\"https://github.com/coder-xuyong\\"}]}"]]},"headers":[{"level":2,"title":"Hive 安装","slug":"hive-安装","link":"#hive-安装","children":[{"level":3,"title":"下载并解压","slug":"下载并解压","link":"#下载并解压","children":[]},{"level":3,"title":"配置环境变量","slug":"配置环境变量","link":"#配置环境变量","children":[]},{"level":3,"title":"修改配置","slug":"修改配置","link":"#修改配置","children":[]},{"level":3,"title":"拷贝数据库驱动","slug":"拷贝数据库驱动","link":"#拷贝数据库驱动","children":[]},{"level":3,"title":"初始化元数据库","slug":"初始化元数据库","link":"#初始化元数据库","children":[]},{"level":3,"title":"启动","slug":"启动","link":"#启动","children":[]}]},{"level":2,"title":"HiveServer2/beeline","slug":"hiveserver2-beeline","link":"#hiveserver2-beeline","children":[{"level":3,"title":"修改 Hadoop 配置","slug":"修改-hadoop-配置","link":"#修改-hadoop-配置","children":[]},{"level":3,"title":"启动 hiveserver2","slug":"启动-hiveserver2","link":"#启动-hiveserver2","children":[]},{"level":3,"title":"使用 beeline","slug":"使用-beeline","link":"#使用-beeline","children":[]},{"level":3,"title":"Beeline 选项","slug":"beeline-选项","link":"#beeline-选项","children":[]},{"level":3,"title":"常用参数","slug":"常用参数","link":"#常用参数","children":[]}]},{"level":2,"title":"Hive 命令","slug":"hive-命令","link":"#hive-命令","children":[{"level":3,"title":"Help","slug":"help","link":"#help","children":[]},{"level":3,"title":"交互式命令行","slug":"交互式命令行","link":"#交互式命令行","children":[]},{"level":3,"title":"执行 SQL 命令","slug":"执行-sql-命令","link":"#执行-sql-命令","children":[]},{"level":3,"title":"执行 SQL 脚本","slug":"执行-sql-脚本","link":"#执行-sql-脚本","children":[]},{"level":3,"title":"配置 Hive 变量","slug":"配置-hive-变量","link":"#配置-hive-变量","children":[]},{"level":3,"title":"配置文件启动","slug":"配置文件启动","link":"#配置文件启动","children":[]},{"level":3,"title":"用户自定义变量","slug":"用户自定义变量","link":"#用户自定义变量","children":[]}]},{"level":2,"title":"Hive 配置","slug":"hive-配置","link":"#hive-配置","children":[{"level":3,"title":"配置文件","slug":"配置文件","link":"#配置文件","children":[]},{"level":3,"title":"hiveconf","slug":"hiveconf","link":"#hiveconf","children":[]},{"level":3,"title":"set","slug":"set","link":"#set","children":[]},{"level":3,"title":"配置优先级","slug":"配置优先级","link":"#配置优先级","children":[]},{"level":3,"title":"配置参数","slug":"配置参数","link":"#配置参数","children":[]}]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"git":{"createdTime":1749521666000,"updatedTime":1749521666000,"contributors":[{"name":"XuYong","username":"XuYong","email":"1299461580@qq.com","commits":1,"url":"https://github.com/XuYong"}]},"readingTime":{"minutes":8.23,"words":2470},"filePathRelative":"posts/16.大数据/02.hive/07.Hive运维.md","localizedDate":"2020年2月24日","excerpt":"\\n<h2>Hive 安装</h2>\\n<h3>下载并解压</h3>\\n<p>下载所需版本的 Hive，这里我下载版本为 <code>cdh5.15.2</code>。下载地址：<a href=\\"http://archive.cloudera.com/cdh5/cdh/5/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">http://archive.cloudera.com/cdh5/cdh/5/</a></p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span># 下载后进行解压</span></span>\\n<span class=\\"line\\"><span> tar -zxvf hive-1.1.0-cdh5.15.2.tar.gz</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{k as comp,r as data};
