import{_ as s,c as a,b as e,o as l}from"./app-DDhL-jNO.js";const n={};function h(t,i){return l(),a("div",null,i[0]||(i[0]=[e(`<h1 id="hdfs-运维" tabindex="-1"><a class="header-anchor" href="#hdfs-运维"><span>HDFS 运维</span></a></h1><h2 id="hdfs-命令" tabindex="-1"><a class="header-anchor" href="#hdfs-命令"><span>HDFS 命令</span></a></h2><h3 id="显示当前目录结构" tabindex="-1"><a class="header-anchor" href="#显示当前目录结构"><span>显示当前目录结构</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 显示当前目录结构</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ls</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 递归显示当前目录结构</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ls</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -R</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 显示根目录下内容</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建目录" tabindex="-1"><a class="header-anchor" href="#创建目录"><span>创建目录</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 创建目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -mkdir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 递归创建目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除操作" tabindex="-1"><a class="header-anchor" href="#删除操作"><span>删除操作</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 删除文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 递归删除目录和文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -R</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="导入文件到-hdfs" tabindex="-1"><a class="header-anchor" href="#导入文件到-hdfs"><span>导入文件到 HDFS</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 二选一执行即可</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [localsrc] [dst]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -copyFromLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [localsrc] [dst]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="从-hdfs-导出文件" tabindex="-1"><a class="header-anchor" href="#从-hdfs-导出文件"><span>从 HDFS 导出文件</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 二选一执行即可</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [dst] [localsrc]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -copyToLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [dst] [localsrc]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看文件内容" tabindex="-1"><a class="header-anchor" href="#查看文件内容"><span>查看文件内容</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 二选一执行即可</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -cat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="显示文件的最后一千字节" tabindex="-1"><a class="header-anchor" href="#显示文件的最后一千字节"><span>显示文件的最后一千字节</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -tail</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 和Linux下一样，会持续监听文件内容变化 并显示文件的最后一千字节</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="拷贝文件" tabindex="-1"><a class="header-anchor" href="#拷贝文件"><span>拷贝文件</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -cp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [src] [dst]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="移动文件" tabindex="-1"><a class="header-anchor" href="#移动文件"><span>移动文件</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hdfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -mv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [src] [dst]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="统计当前目录下各文件大小" tabindex="-1"><a class="header-anchor" href="#统计当前目录下各文件大小"><span>统计当前目录下各文件大小</span></a></h3><ul><li>默认单位字节</li><li>-s : 显示所有文件大小总和，</li><li>-h : 将以更友好的方式显示文件大小（例如 64.0m 而不是 67108864）</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>hdfs dfs -du &lt;path&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="合并下载多个文件" tabindex="-1"><a class="header-anchor" href="#合并下载多个文件"><span>合并下载多个文件</span></a></h3><ul><li>-nl 在每个文件的末尾添加换行符（LF）</li><li>-skip-empty-file 跳过空文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>hdfs dfs -getmerge</span></span>
<span class="line"><span># 示例 将HDFS上的hbase-policy.xml和hbase-site.xml文件合并后下载到本地的/usr/test.xml</span></span>
<span class="line"><span>hdfs dfs -getmerge -nl  /test/hbase-policy.xml /test/hbase-site.xml /usr/test.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="统计文件系统的可用空间信息" tabindex="-1"><a class="header-anchor" href="#统计文件系统的可用空间信息"><span>统计文件系统的可用空间信息</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>hdfs dfs -df -h /</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="更改文件复制因子" tabindex="-1"><a class="header-anchor" href="#更改文件复制因子"><span>更改文件复制因子</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>hdfs dfs -setrep [-R] [-w] &lt;numReplicas&gt; &lt;path&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>更改文件的复制因子。如果 path 是目录，则更改其下所有文件的复制因子</li><li>-w : 请求命令是否等待复制完成</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 示例</span></span>
<span class="line"><span>hdfs dfs -setrep -w 3 /user/hadoop/dir1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="权限控制" tabindex="-1"><a class="header-anchor" href="#权限控制"><span>权限控制</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 权限控制和Linux上使用方式一致</span></span>
<span class="line"><span># 变更文件或目录的所属群组。 用户必须是文件的所有者或超级用户。</span></span>
<span class="line"><span>hdfs dfs -chgrp [-R] GROUP URI [URI ...]</span></span>
<span class="line"><span># 修改文件或目录的访问权限  用户必须是文件的所有者或超级用户。</span></span>
<span class="line"><span>hdfs dfs -chmod [-R] &lt;MODE[,MODE]... | OCTALMODE&gt; URI [URI ...]</span></span>
<span class="line"><span># 修改文件的拥有者  用户必须是超级用户。</span></span>
<span class="line"><span>hdfs dfs -chown [-R] [OWNER][:[GROUP]] URI [URI ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件检测" tabindex="-1"><a class="header-anchor" href="#文件检测"><span>文件检测</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>hdfs dfs -test - [defsz]  URI</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可选选项：</p><ul><li>-d：如果路径是目录，返回 0。</li><li>-e：如果路径存在，则返回 0。</li><li>-f：如果路径是文件，则返回 0。</li><li>-s：如果路径不为空，则返回 0。</li><li>-r：如果路径存在且授予读权限，则返回 0。</li><li>-w：如果路径存在且授予写入权限，则返回 0。</li><li>-z：如果文件长度为零，则返回 0。</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 示例</span></span>
<span class="line"><span>hdfs dfs -test -e filename</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="hdfs-安全模式" tabindex="-1"><a class="header-anchor" href="#hdfs-安全模式"><span>HDFS 安全模式</span></a></h2><h3 id="什么是安全模式" tabindex="-1"><a class="header-anchor" href="#什么是安全模式"><span>什么是安全模式？</span></a></h3><ul><li>安全模式是 HDFS 的一种特殊状态，在这种状态下，HDFS 只接收读数据请求，而不接收写入、删除、修改等变更请求。</li><li>安全模式是 HDFS 确保 Block 数据安全的一种保护机制。</li><li>Active NameNode 启动时，HDFS 会进入安全模式，DataNode 主动向 NameNode 汇报可用 Block 列表等信息，在系统达到安全标准前，HDFS 一直处于“只读”状态。</li></ul><h3 id="何时正常离开安全模式" tabindex="-1"><a class="header-anchor" href="#何时正常离开安全模式"><span>何时正常离开安全模式</span></a></h3><ul><li>Block 上报率：DataNode 上报的可用 Block 个数 / NameNode 元数据记录的 Block 个数</li><li>当 Block 上报率 &gt;= 阈值时，HDFS 才能离开安全模式，默认阈值为 0.999</li><li>不建议手动强制退出安全模式</li></ul><h3 id="触发安全模式的原因" tabindex="-1"><a class="header-anchor" href="#触发安全模式的原因"><span>触发安全模式的原因</span></a></h3><ul><li>NameNode 重启</li><li>NameNode 磁盘空间不足</li><li>Block 上报率低于阈值</li><li>DataNode 无法正常启动</li><li>日志中出现严重异常</li><li>用户操作不当，如：<strong>强制关机（特别注意！）</strong></li></ul><h3 id="故障排查" tabindex="-1"><a class="header-anchor" href="#故障排查"><span>故障排查</span></a></h3><ul><li>找到 DataNode 不能正常启动的原因，重启 DataNode</li><li>清理 NameNode 磁盘</li><li>谨慎操作，有问题找星环，以免丢失数据</li></ul><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" target="_blank" rel="noopener noreferrer">HDFS 官方文档</a></li><li><a href="https://www.cnblogs.com/caiyisen/p/7395843.html" target="_blank" rel="noopener noreferrer">HDFS 知识点总结</a></li></ul>`,50)]))}const r=s(n,[["render",h],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/pages/90aeb6/","title":"HDFS 运维","lang":"zh-CN","frontmatter":{"title":"HDFS 运维","date":"2020-02-24T21:14:47.000Z","order":2,"categories":["大数据","hadoop","hdfs"],"tags":["大数据","Hadoop","HDFS"],"permalink":"/pages/90aeb6/","description":"HDFS 运维 HDFS 命令 显示当前目录结构 创建目录 删除操作 导入文件到 HDFS 从 HDFS 导出文件 查看文件内容 显示文件的最后一千字节 拷贝文件 移动文件 统计当前目录下各文件大小 默认单位字节 -s : 显示所有文件大小总和， -h : 将以更友好的方式显示文件大小（例如 64.0m 而不是 67108864） 合并下载多个文件 -...","head":[["meta",{"property":"og:url","content":"https://coder-xuyong.github.io/blog/pages/90aeb6/"}],["meta",{"property":"og:site_name","content":"coder-xuyong"}],["meta",{"property":"og:title","content":"HDFS 运维"}],["meta",{"property":"og:description","content":"HDFS 运维 HDFS 命令 显示当前目录结构 创建目录 删除操作 导入文件到 HDFS 从 HDFS 导出文件 查看文件内容 显示文件的最后一千字节 拷贝文件 移动文件 统计当前目录下各文件大小 默认单位字节 -s : 显示所有文件大小总和， -h : 将以更友好的方式显示文件大小（例如 64.0m 而不是 67108864） 合并下载多个文件 -..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-10T02:14:26.000Z"}],["meta",{"property":"article:tag","content":"大数据"}],["meta",{"property":"article:tag","content":"Hadoop"}],["meta",{"property":"article:tag","content":"HDFS"}],["meta",{"property":"article:published_time","content":"2020-02-24T21:14:47.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-10T02:14:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"HDFS 运维\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-02-24T21:14:47.000Z\\",\\"dateModified\\":\\"2025-06-10T02:14:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuyong\\",\\"url\\":\\"https://github.com/coder-xuyong\\"}]}"]]},"headers":[{"level":2,"title":"HDFS 命令","slug":"hdfs-命令","link":"#hdfs-命令","children":[{"level":3,"title":"显示当前目录结构","slug":"显示当前目录结构","link":"#显示当前目录结构","children":[]},{"level":3,"title":"创建目录","slug":"创建目录","link":"#创建目录","children":[]},{"level":3,"title":"删除操作","slug":"删除操作","link":"#删除操作","children":[]},{"level":3,"title":"导入文件到 HDFS","slug":"导入文件到-hdfs","link":"#导入文件到-hdfs","children":[]},{"level":3,"title":"从 HDFS 导出文件","slug":"从-hdfs-导出文件","link":"#从-hdfs-导出文件","children":[]},{"level":3,"title":"查看文件内容","slug":"查看文件内容","link":"#查看文件内容","children":[]},{"level":3,"title":"显示文件的最后一千字节","slug":"显示文件的最后一千字节","link":"#显示文件的最后一千字节","children":[]},{"level":3,"title":"拷贝文件","slug":"拷贝文件","link":"#拷贝文件","children":[]},{"level":3,"title":"移动文件","slug":"移动文件","link":"#移动文件","children":[]},{"level":3,"title":"统计当前目录下各文件大小","slug":"统计当前目录下各文件大小","link":"#统计当前目录下各文件大小","children":[]},{"level":3,"title":"合并下载多个文件","slug":"合并下载多个文件","link":"#合并下载多个文件","children":[]},{"level":3,"title":"统计文件系统的可用空间信息","slug":"统计文件系统的可用空间信息","link":"#统计文件系统的可用空间信息","children":[]},{"level":3,"title":"更改文件复制因子","slug":"更改文件复制因子","link":"#更改文件复制因子","children":[]},{"level":3,"title":"权限控制","slug":"权限控制","link":"#权限控制","children":[]},{"level":3,"title":"文件检测","slug":"文件检测","link":"#文件检测","children":[]}]},{"level":2,"title":"HDFS 安全模式","slug":"hdfs-安全模式","link":"#hdfs-安全模式","children":[{"level":3,"title":"什么是安全模式？","slug":"什么是安全模式","link":"#什么是安全模式","children":[]},{"level":3,"title":"何时正常离开安全模式","slug":"何时正常离开安全模式","link":"#何时正常离开安全模式","children":[]},{"level":3,"title":"触发安全模式的原因","slug":"触发安全模式的原因","link":"#触发安全模式的原因","children":[]},{"level":3,"title":"故障排查","slug":"故障排查","link":"#故障排查","children":[]}]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"git":{"createdTime":1749521666000,"updatedTime":1749521666000,"contributors":[{"name":"XuYong","username":"XuYong","email":"1299461580@qq.com","commits":1,"url":"https://github.com/XuYong"}]},"readingTime":{"minutes":3.39,"words":1018},"filePathRelative":"posts/16.大数据/01.hadoop/01.hdfs/02.HDFS运维.md","localizedDate":"2020年2月24日","excerpt":"\\n<h2>HDFS 命令</h2>\\n<h3>显示当前目录结构</h3>\\n<div class=\\"language-shell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"shell\\" data-title=\\"shell\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 显示当前目录结构</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">hdfs</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dfs</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -ls</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &lt;</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">pat</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">h&gt;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 递归显示当前目录结构</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">hdfs</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dfs</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -ls</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -R</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &lt;</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">pat</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">h&gt;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 显示根目录下内容</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">hdfs</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dfs</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -ls</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{r as comp,k as data};
