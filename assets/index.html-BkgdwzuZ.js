import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,b as i,o as a}from"./app-DauXykSd.js";const o={};function l(s,t){return a(),n("div",null,t[0]||(t[0]=[i('<h1 id="mongodb-索引" tabindex="-1"><a class="header-anchor" href="#mongodb-索引"><span>MongoDB 索引</span></a></h1><h2 id="mongodb-索引简介" tabindex="-1"><a class="header-anchor" href="#mongodb-索引简介"><span>MongoDB 索引简介</span></a></h2><h3 id="索引的作用" tabindex="-1"><a class="header-anchor" href="#索引的作用"><span>索引的作用</span></a></h3><p><strong>MongoDB 在 collection 数据级别上定义索引</strong>。</p><p>索引通常能够极大的提高查询的效率。如果<strong>没有索引</strong>，MongoDB 在读取数据时<strong>必须扫描 collection 中的每个 document</strong> 并选取那些符合查询条件的记录。</p><p>这种扫描全集合的查询是非常低效的，特别是在处理大量的数据时。查询可能要花费几十秒甚至几分钟，这种性能开销是不可接受的。</p><p>索引是特殊的数据结构，索引存储在一个易于遍历读取的数据集合中，索引是对数据库表中一列或多列的值进行排序的一种结构。</p><figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200921210621.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="createindex-方法" tabindex="-1"><a class="header-anchor" href="#createindex-方法"><span>createIndex() 方法</span></a></h3><p><strong>MongoDB 使用 <code>createIndex()</code> 方法来创建索引</strong>。</p><p><code>createIndex()</code> 语法如下：</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">db</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">collection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">( &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">key</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> and</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> index</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> type</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> specification</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;, &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>createIndex()</code> 可选参数列表如下：</p><table><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">background</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">建索引过程会阻塞其它数据库操作，background 可指定以后台方式创建索引，即增加 &quot;background&quot; 可选参数。 &quot;background&quot; 默认值为<strong>false</strong>。</td></tr><tr><td style="text-align:left;">unique</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">建立的索引是否唯一。指定为 true 创建唯一索引。默认值为<strong>false</strong>.</td></tr><tr><td style="text-align:left;">name</td><td style="text-align:left;">string</td><td style="text-align:left;">索引的名称。如果未指定，MongoDB 的通过连接索引的字段名和排序顺序生成一个索引名称。</td></tr><tr><td style="text-align:left;">dropDups</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">**3.0+版本已废弃。**在建立唯一索引时是否删除重复记录,指定 true 创建唯一索引。默认值为 <strong>false</strong>.</td></tr><tr><td style="text-align:left;">sparse</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">对文档中不存在的字段数据不启用索引；这个参数需要特别注意，如果设置为 true 的话，在索引字段中不会查询出不包含对应字段的文档.。默认值为 <strong>false</strong>.</td></tr><tr><td style="text-align:left;">expireAfterSeconds</td><td style="text-align:left;">integer</td><td style="text-align:left;">指定一个以秒为单位的数值，完成 TTL 设定，设定集合的生存时间。</td></tr><tr><td style="text-align:left;">v</td><td style="text-align:left;">index version</td><td style="text-align:left;">索引的版本号。默认的索引版本取决于 mongod 创建索引时运行的版本。</td></tr><tr><td style="text-align:left;">weights</td><td style="text-align:left;">document</td><td style="text-align:left;">索引权重值，数值在 1 到 99,999 之间，表示该索引相对于其他索引字段的得分权重。</td></tr><tr><td style="text-align:left;">default_language</td><td style="text-align:left;">string</td><td style="text-align:left;">对于文本索引，该参数决定了停用词及词干和词器的规则的列表。 默认为英语</td></tr><tr><td style="text-align:left;">language_override</td><td style="text-align:left;">string</td><td style="text-align:left;">对于文本索引，该参数指定了包含在文档中的字段名，语言覆盖默认的 language，默认值为 language.</td></tr></tbody></table><p>【示例】使用 name 作为索引，并且按照降序排序</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>db.collection.createIndex( { name: -1 } )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><strong>官方</strong><ul><li><a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB 官网</a></li><li><a href="https://github.com/mongodb/mongo" target="_blank" rel="noopener noreferrer">MongoDB Github</a></li><li><a href="https://university.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB 官方免费教程</a></li></ul></li><li><strong>教程</strong><ul><li><a href="https://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="noopener noreferrer">MongoDB 教程</a></li><li><a href="https://time.geekbang.org/course/intro/100040001" target="_blank" rel="noopener noreferrer">MongoDB 高手课</a></li></ul></li></ul>',18)]))}const g=e(o,[["render",l]]),h=JSON.parse('{"path":"/pages/10c674/","title":"MongoDB 索引","lang":"zh-CN","frontmatter":{"title":"MongoDB 索引","date":"2020-09-21T21:22:57.000Z","order":7,"categories":["数据库","文档数据库","MongoDB"],"tags":["数据库","文档数据库","MongoDB","索引"],"permalink":"/pages/10c674/","description":"MongoDB 索引 MongoDB 索引简介 索引的作用 MongoDB 在 collection 数据级别上定义索引。 索引通常能够极大的提高查询的效率。如果没有索引，MongoDB 在读取数据时必须扫描 collection 中的每个 document 并选取那些符合查询条件的记录。 这种扫描全集合的查询是非常低效的，特别是在处理大量的数据时。查...","head":[["meta",{"property":"og:url","content":"https://coder-xuyong.github.io/blog/pages/10c674/"}],["meta",{"property":"og:site_name","content":"coder-xuyong"}],["meta",{"property":"og:title","content":"MongoDB 索引"}],["meta",{"property":"og:description","content":"MongoDB 索引 MongoDB 索引简介 索引的作用 MongoDB 在 collection 数据级别上定义索引。 索引通常能够极大的提高查询的效率。如果没有索引，MongoDB 在读取数据时必须扫描 collection 中的每个 document 并选取那些符合查询条件的记录。 这种扫描全集合的查询是非常低效的，特别是在处理大量的数据时。查..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/dunwu/images/master/snap/20200921210621.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-18T02:31:38.000Z"}],["meta",{"property":"article:tag","content":"数据库"}],["meta",{"property":"article:tag","content":"文档数据库"}],["meta",{"property":"article:tag","content":"MongoDB"}],["meta",{"property":"article:tag","content":"索引"}],["meta",{"property":"article:published_time","content":"2020-09-21T21:22:57.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-18T02:31:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MongoDB 索引\\",\\"image\\":[\\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200921210621.svg\\"],\\"datePublished\\":\\"2020-09-21T21:22:57.000Z\\",\\"dateModified\\":\\"2025-02-18T02:31:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuyong\\",\\"url\\":\\"https://github.com/coder-xuyong\\"}]}"]]},"headers":[{"level":2,"title":"MongoDB 索引简介","slug":"mongodb-索引简介","link":"#mongodb-索引简介","children":[{"level":3,"title":"索引的作用","slug":"索引的作用","link":"#索引的作用","children":[]},{"level":3,"title":"createIndex() 方法","slug":"createindex-方法","link":"#createindex-方法","children":[]}]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"git":{"createdTime":1739845898000,"updatedTime":1739845898000,"contributors":[{"name":"XuYong","username":"XuYong","email":"1299461580@qq.com","commits":1,"url":"https://github.com/XuYong"}]},"readingTime":{"minutes":2.33,"words":700},"filePathRelative":"posts/02.database/04.文档数据库/01.MongoDB/07.MongoDB索引.md","localizedDate":"2020年9月21日","excerpt":"\\n<h2>MongoDB 索引简介</h2>\\n<h3>索引的作用</h3>\\n<p><strong>MongoDB 在 collection 数据级别上定义索引</strong>。</p>\\n<p>索引通常能够极大的提高查询的效率。如果<strong>没有索引</strong>，MongoDB 在读取数据时<strong>必须扫描 collection 中的每个 document</strong> 并选取那些符合查询条件的记录。</p>\\n<p>这种扫描全集合的查询是非常低效的，特别是在处理大量的数据时。查询可能要花费几十秒甚至几分钟，这种性能开销是不可接受的。</p>\\n<p>索引是特殊的数据结构，索引存储在一个易于遍历读取的数据集合中，索引是对数据库表中一列或多列的值进行排序的一种结构。</p>","autoDesc":true}');export{g as comp,h as data};
