import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as a,o as l}from"./app-CM-ymGG-.js";const n={};function t(h,i){return l(),e("div",null,i[0]||(i[0]=[a(`<h2 id="mysql-错误剖析" tabindex="-1"><a class="header-anchor" href="#mysql-错误剖析"><span>MySQL 错误剖析</span></a></h2><p>每个 MySQL 错误都由标识错误的以下部分组成：</p><p><code>ERROR NUMBER</code> 是标识每个错误的唯一编号。<br><code>SQLSTATE</code> 是标识 SQL 错误情况的代码。<br><code>ERROR MESSAGE</code> 以人类可读的格式描述错误。<br> 下面是一个 MySQL 错误示例：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1146</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (42S02): Table </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;test.no_such_table&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> doesn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;t exist</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在上面的示例中：</p><ul><li>1146 是错误号</li><li>42S02 是 SQLSTATE</li><li>表 &#39;test.no_such_table&#39; 不存在是错误消息</li></ul><h2 id="用户-root-localhost-的访问被拒绝-使用密码-yes" tabindex="-1"><a class="header-anchor" href="#用户-root-localhost-的访问被拒绝-使用密码-yes"><span>用户 &#39;root&#39;@&#39;localhost&#39; 的访问被拒绝（使用密码：YES）</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1045:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Access</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> denied</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;root&#39;@&#39;localhost&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>任何使用 MySQL 的人都可能至少遇到过一次。<br> 此错误可能有多种原因，例如用户名和/或密码错误，或缺少对数据库的权限。</p><p>此错误表示 MySQL 服务器在尝试使用提供的密码从 &#39;localhost&#39; 服务器进行连接时拒绝了对 &#39;root&#39; 用户的访问。</p><p>💡要解决此问题，请仔细检查密码并确保用户具有必要的权限。<br> 您可以重置密码或授予解决此问题所需的权限。</p><h2 id="lost-connection-to-mysql-server-during-query" tabindex="-1"><a class="header-anchor" href="#lost-connection-to-mysql-server-during-query"><span>Lost connection to MySQL server during query</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2013:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Lost</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connection</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MySQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> during</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> query</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>当您的 MySQL 客户端和数据库服务器之间的连接超时时，会发生此错误。<br> 从本质上讲，查询返回数据花费的时间太长，因此连接被断开。<br> 这可能是由于各种原因造成的，例如网络问题或服务器超时。</p><p>💡 要解决此问题，请考虑调整 MySQL 服务器配置以增加连接超时值或调查网络稳定性。</p><h2 id="too-many-connections" tabindex="-1"><a class="header-anchor" href="#too-many-connections"><span>Too many connections</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1040:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Too</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> many</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>当 MySQL 服务器达到其允许的最大连接数限制时，会出现此错误。</p><p>💡 要解决此问题，您可以增加 MySQL 配置文件中的 max_connections 设置，或者优化应用程序以使用更少的连接。</p><h2 id="mysql-server-has-gone-away" tabindex="-1"><a class="header-anchor" href="#mysql-server-has-gone-away"><span>MySQL server has gone away</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2006</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (HY000): MySQL server has gone away</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此错误表示 MySQL 服务器意外终止了连接。<br> 这可能是由于各种原因造成的，包括长时间运行的查询或服务器超时。</p><p>💡 要防止这种情况，您可以在 MySQL 配置中调整 wait_timeout 和 interactive_timeout 设置。</p><h2 id="mysql-client-ran-out-of-memory" tabindex="-1"><a class="header-anchor" href="#mysql-client-ran-out-of-memory"><span>MySQL client ran out of memory</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2008:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MySQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> client</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ran</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> memory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>当 MySQL 客户端消耗的内存超过可用内存时，会发生此错误。</p><p>💡 要解决此问题，您可能需要优化查询、限制结果集或为 MySQL 客户端分配更多内存。</p><h2 id="the-table-is-full" tabindex="-1"><a class="header-anchor" href="#the-table-is-full"><span>The table is full</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1114</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (HY000): The table is full</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果发生 table-full 错误，则可能是磁盘已满或表已达到其最大大小。<br> MySQL 数据库的有效最大表大小通常由操作系统对文件大小的限制决定，而不是由 MySQL 内部限制决定。</p><p>💡 要解决此问题，您可以：</p><ul><li>增加 MEMORY 表允许的最大大小</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">max_heap_table_size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2G</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmp_table_size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>切换到 InnoDB 存储引擎</li><li>检查磁盘空间并增加可用空间：</li></ul><h2 id="you-have-an-error-in-your-sql-syntax" tabindex="-1"><a class="header-anchor" href="#you-have-an-error-in-your-sql-syntax"><span>You have an error in your SQL syntax</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1064</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (42000): You have an error in your SQL syntax</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这意味着 MySQL 由于语法问题而无法理解您的查询。通常，问题的原因是忘记将某些文本或值括在反引号或引号中。例如，而不是在 MySQL 查询中使用数据库名称，因为它应该是 。my-database<code>my-database</code></p><p>错误消息甚至会更进一步，并指出语法开始无效的位置，您可以将其用作寻找问题的起点。</p><p>💡 仔细检查您的查询，确保所有 SQL 语句的格式正确并遵循 MySQL 的语法规则。</p><h2 id="packet-too-large" tabindex="-1"><a class="header-anchor" href="#packet-too-large"><span>Packet too large</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Packet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> too</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> large</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>当 MySQL 客户端或 mysqld 服务器获取的数据包大于max_allowed_packet字节，它会发出 Packet too large 错误并关闭连接。</p><p>1 GB 数据包大小是可以传输到 MySQL 服务器或客户端或从 MySQL 服务器或客户端传输的最大数据包大小。如果 MySQL 服务器或客户端收到大于 max_allowed_packet 字节的数据包，则发出 ER_NET_PACKET_TOO_LARGE 错误并关闭连接。</p><p>💡 您可以通过调整 MySQL 配置文件中的 max_allowed_packet 设置来解决此问题。</p><h2 id="communication-errors-and-aborted-connections" tabindex="-1"><a class="header-anchor" href="#communication-errors-and-aborted-connections"><span>Communication Errors and Aborted Connections</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Communication</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Errors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aborted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Connections</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果您在错误日志中发现如下错误。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">010301</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 14:38:23</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Aborted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connection</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 854</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> db:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;users&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;simplebackups&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这意味着发生了以下情况：</p><ul><li>客户端程序未调用mysql_close（）before 退出。</li><li>客户睡得超过wait_timeout或interactive_timeout无需执行任何请求。</li><li>客户端程序在传输过程中突然结束。</li></ul><h2 id="can-t-create-write-to-file" tabindex="-1"><a class="header-anchor" href="#can-t-create-write-to-file"><span>Can’t create/write to file</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Can’t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create/write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>当 MySQL 无法创建或写入文件时，通常会发生此错误，通常是由于权限不足或磁盘空间不足。<br> 💡 确保 MySQL 用户具有必要的文件权限，并检查可用磁盘空间以解决此问题。</p><h2 id="commands-out-of-sync" tabindex="-1"><a class="header-anchor" href="#commands-out-of-sync"><span>Commands out of sync</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ERROR:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Commands</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果您在客户端代码中收到此错误，则表示您以错误的顺序调用客户端函数。<br> 例如，如果您正在使用mysql_use_result（）并尝试在调用mysql_free_result（）.</p><p>💡 确保您的应用程序遵循正确的执行和获取查询结果的顺序，以避免此错误。</p><h2 id="packet-for-query-is-too-large错误" tabindex="-1"><a class="header-anchor" href="#packet-for-query-is-too-large错误"><span>Packet for query is too large错误</span></a></h2><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" data-title="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>在mysql安装目录中找到my.ini配置文件</span></span>
<span class="line"><span>在最后添加 max_allowed_packet=10485760</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>数值可以 MB为单位，16M</p><h2 id="索引失效" tabindex="-1"><a class="header-anchor" href="#索引失效"><span>索引失效</span></a></h2><p>eg：假设age是整数类型，但是却使用字符串类型</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SELECT</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> FROM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WHERE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> age</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;20&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>MySQL 需要在查询时转换 &#39;20&#39; 为整数类型，可能会导致索引无法使用。 某个电商平台就有这么一个类似的bug，导致下单超时崩盘30分钟。</p><h2 id="mysql-5-7-解决group-by出现的问题" tabindex="-1"><a class="header-anchor" href="#mysql-5-7-解决group-by出现的问题"><span>MySql 5.7 解决GROUP BY出现的问题</span></a></h2><p>报错如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1055</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Expression</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #1 of SElECT list is not in GRoUp BY clause and contains nonaggregated column &#39;projhigh.project node.i whicn is not functionally dependent on columns in GROup BY clause; this is incompatible with sql mode=only_full_group_by</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>引起的原因是：这个错误一般发生在mysql 5.7以及 5.7以上的版本中，其原因是mysql的默认配置中,sql_mode=&quot;ONLY_FULL_GROUP_BY&quot; 这个配置严格执行了 &#39;SQL92标准&#39;,所以很高网站维护人员在升级mysql版本时，都会修改 sql_mode 的配置，使其能兼容。</p><p>解决方法1，重启mysql后会失效：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 查看ONLY_FULL_GROUP_BY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 校验规则是否开启</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SELECT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> @@GLOBAL.sql_mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SELECT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> @@SESSION.sql_mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第一个sql语句的结果，使用自己查询的结果</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 第二个sql语句的结果</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 关闭only_full_group_by的规则校验</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> @@GLOBAL.sql_mode=&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO, NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> @@SESSION.sql_mode=&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO, NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解决方法2：<br> 修改配置文件 my.ini</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [mysqld] 下面添加代码：</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sql_mode</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>重启mysql服务。</p><p>注意：</p><p>1、不同的系统，mysql 的配置文件名以及路径不同</p><p>2、Mac或Linux文件 /etc/my.cnf</p><p>3、windows 在数据库安装目录下的 my.ini</p><h2 id="lock-wait-timeout-exceeded-try-restarting-transaction" tabindex="-1"><a class="header-anchor" href="#lock-wait-timeout-exceeded-try-restarting-transaction"><span>Lock wait timeout exceeded; try restarting transaction</span></a></h2><p>这是 MySQL 数据库中的一个常见错误，通常发生在使用 InnoDB 存储引擎的事务中。它的含义是：某个事务在尝试获取锁资源时，等待时间超过了数据库配置的阈值（innodb_lock_wait_timeout，默认 50 秒），因此被强制终止</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><blockquote><p><a href="https://simplebackups.com/blog/extensive-mysql-common-errors-list/#the-anatomy-of-mysql-errors" target="_blank" rel="noopener noreferrer">https://simplebackups.com/blog/extensive-mysql-common-errors-list/#the-anatomy-of-mysql-errors</a></p></blockquote>`,81)]))}const k=s(n,[["render",t],["__file","02.mysql常见错误.html.vue"]]),o=JSON.parse(`{"path":"/2025/01/13/02.mysql%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF.html","title":"mysql 常见错误汇总","lang":"zh-CN","frontmatter":{"title":"mysql 常见错误汇总","icon":"pen-to-square","date":"2025-01-13T00:00:00.000Z","cover":"https://fastcdn.mihoyo.com/content-v2/hk4e/127622/e03b719f827eba22de2b3e4de1778f19_443214802071996334.png","lastUpdated":true,"author":[{"name":"xuyong","url":"https://github.com/coder-xuyong"}],"category":["mysql"],"tag":["sql"],"order":3,"permalinkPattern":":year/:month/:day/:slug.html","description":"MySQL 错误剖析 每个 MySQL 错误都由标识错误的以下部分组成： ERROR NUMBER 是标识每个错误的唯一编号。 SQLSTATE 是标识 SQL 错误情况的代码。 ERROR MESSAGE 以人类可读的格式描述错误。 下面是一个 MySQL 错误示例： 在上面的示例中： 1146 是错误号 42S02 是 SQLSTATE 表 'te...","head":[["meta",{"property":"og:url","content":"https://coder-xuyong.github.io/blog/2025/01/13/02.mysql%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF.html"}],["meta",{"property":"og:site_name","content":"coder-xuyong"}],["meta",{"property":"og:title","content":"mysql 常见错误汇总"}],["meta",{"property":"og:description","content":"MySQL 错误剖析 每个 MySQL 错误都由标识错误的以下部分组成： ERROR NUMBER 是标识每个错误的唯一编号。 SQLSTATE 是标识 SQL 错误情况的代码。 ERROR MESSAGE 以人类可读的格式描述错误。 下面是一个 MySQL 错误示例： 在上面的示例中： 1146 是错误号 42S02 是 SQLSTATE 表 'te..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://fastcdn.mihoyo.com/content-v2/hk4e/127622/e03b719f827eba22de2b3e4de1778f19_443214802071996334.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-01T08:12:55.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://fastcdn.mihoyo.com/content-v2/hk4e/127622/e03b719f827eba22de2b3e4de1778f19_443214802071996334.png"}],["meta",{"name":"twitter:image:alt","content":"mysql 常见错误汇总"}],["meta",{"property":"article:author","content":"xuyong"}],["meta",{"property":"article:tag","content":"sql"}],["meta",{"property":"article:published_time","content":"2025-01-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-01T08:12:55.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"mysql 常见错误汇总\\",\\"image\\":[\\"https://fastcdn.mihoyo.com/content-v2/hk4e/127622/e03b719f827eba22de2b3e4de1778f19_443214802071996334.png\\"],\\"datePublished\\":\\"2025-01-13T00:00:00.000Z\\",\\"dateModified\\":\\"2025-03-01T08:12:55.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuyong\\",\\"url\\":\\"https://github.com/coder-xuyong\\"}]}"]]},"headers":[{"level":2,"title":"MySQL 错误剖析","slug":"mysql-错误剖析","link":"#mysql-错误剖析","children":[]},{"level":2,"title":"用户 'root'@'localhost' 的访问被拒绝（使用密码：YES）","slug":"用户-root-localhost-的访问被拒绝-使用密码-yes","link":"#用户-root-localhost-的访问被拒绝-使用密码-yes","children":[]},{"level":2,"title":"Lost connection to MySQL server during query","slug":"lost-connection-to-mysql-server-during-query","link":"#lost-connection-to-mysql-server-during-query","children":[]},{"level":2,"title":"Too many connections","slug":"too-many-connections","link":"#too-many-connections","children":[]},{"level":2,"title":"MySQL server has gone away","slug":"mysql-server-has-gone-away","link":"#mysql-server-has-gone-away","children":[]},{"level":2,"title":"MySQL client ran out of memory","slug":"mysql-client-ran-out-of-memory","link":"#mysql-client-ran-out-of-memory","children":[]},{"level":2,"title":"The table is full","slug":"the-table-is-full","link":"#the-table-is-full","children":[]},{"level":2,"title":"You have an error in your SQL syntax","slug":"you-have-an-error-in-your-sql-syntax","link":"#you-have-an-error-in-your-sql-syntax","children":[]},{"level":2,"title":"Packet too large","slug":"packet-too-large","link":"#packet-too-large","children":[]},{"level":2,"title":"Communication Errors and Aborted Connections","slug":"communication-errors-and-aborted-connections","link":"#communication-errors-and-aborted-connections","children":[]},{"level":2,"title":"Can’t create/write to file","slug":"can-t-create-write-to-file","link":"#can-t-create-write-to-file","children":[]},{"level":2,"title":"Commands out of sync","slug":"commands-out-of-sync","link":"#commands-out-of-sync","children":[]},{"level":2,"title":"Packet for query is too large错误","slug":"packet-for-query-is-too-large错误","link":"#packet-for-query-is-too-large错误","children":[]},{"level":2,"title":"索引失效","slug":"索引失效","link":"#索引失效","children":[]},{"level":2,"title":"MySql 5.7 解决GROUP BY出现的问题","slug":"mysql-5-7-解决group-by出现的问题","link":"#mysql-5-7-解决group-by出现的问题","children":[]},{"level":2,"title":"Lock wait timeout exceeded; try restarting transaction","slug":"lock-wait-timeout-exceeded-try-restarting-transaction","link":"#lock-wait-timeout-exceeded-try-restarting-transaction","children":[]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"createdTime":1736756291000,"updatedTime":1740816775000,"contributors":[{"name":"XuYong","username":"XuYong","email":"1299461580@qq.com","commits":8,"url":"https://github.com/XuYong"}]},"readingTime":{"minutes":6.19,"words":1858},"filePathRelative":"posts/pre02.mysql/02.mysql常见错误.md","localizedDate":"2025年1月13日","excerpt":"<h2>MySQL 错误剖析</h2>\\n<p>每个 MySQL 错误都由标识错误的以下部分组成：</p>\\n<p><code>ERROR NUMBER</code> 是标识每个错误的唯一编号。<br>\\n<code>SQLSTATE</code> 是标识 SQL 错误情况的代码。<br>\\n<code>ERROR MESSAGE</code> 以人类可读的格式描述错误。<br>\\n下面是一个 MySQL 错误示例：</p>\\n<div class=\\"language-shell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"shell\\" data-title=\\"shell\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">ERROR</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1146</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> (42S02): Table </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">'test.no_such_table'</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> doesn</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">'t exist</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{k as comp,o as data};
