import{_ as i,c as a,b as n,o as l}from"./app-MqdbryXy.js";const h={};function e(t,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h1 id="arthas-快速入门" tabindex="-1"><a class="header-anchor" href="#arthas-快速入门"><span>Arthas 快速入门</span></a></h1><blockquote><p><code>Arthas</code> 是 Alibaba 开源的 Java 诊断工具 。</p></blockquote><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p><code>Arthas</code>可以解决的问题：</p><ol><li>这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？</li><li>我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？</li><li>遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？</li><li>线上遇到某个用户的数据处理有问题，但线上同样无法 debug，线下无法重现！</li><li>是否有一个全局视角来查看系统的运行状况？</li><li>有什么办法可以监控到 JVM 的实时运行状态？</li></ol><p><code>Arthas</code>支持 JDK 6+，支持 Linux/Mac/Windows，采用命令行交互模式，同时提供丰富的 <code>Tab</code> 自动补全功能，进一步方便进行问题的定位和诊断。</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><h3 id="使用arthas-boot-推荐" tabindex="-1"><a class="header-anchor" href="#使用arthas-boot-推荐"><span>使用<code>arthas-boot</code>（推荐）</span></a></h3><p>下载<code>arthas-boot.jar</code>，然后用<code>java -jar</code>的方式启动：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>wget https://alibaba.github.io/arthas/arthas-boot.jar</span></span>
<span class="line"><span>java -jar arthas-boot.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>打印帮助信息：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>java -jar arthas-boot.jar -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>如果下载速度比较慢，可以使用 aliyun 的镜像：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>java -jar arthas-boot.jar --repo-mirror aliyun --use-http</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>如果从 github 下载有问题，可以使用 gitee 镜像</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>wget https://arthas.gitee.io/arthas-boot.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="使用as-sh" tabindex="-1"><a class="header-anchor" href="#使用as-sh"><span>使用<code>as.sh</code></span></a></h3><p>Arthas 支持在 Linux/Unix/Mac 等平台上一键安装，请复制以下内容，并粘贴到命令行中，敲 <code>回车</code> 执行即可：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>curl -L https://alibaba.github.io/arthas/install.sh | sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>上述命令会下载启动脚本文件 <code>as.sh</code> 到当前目录，你可以放在任何地方或将其加入到 <code>$PATH</code> 中。</p><p>直接在 shell 下面执行<code>./as.sh</code>，就会进入交互界面。</p><p>也可以执行<code>./as.sh -h</code>来获取更多参数信息。</p><ul><li><p>如果从 github 下载有问题，可以使用 gitee 镜像</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>curl -L https://arthas.gitee.io/install.sh | sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="全量安装" tabindex="-1"><a class="header-anchor" href="#全量安装"><span>全量安装</span></a></h3><p>最新版本，点击下载：<a href="http://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&amp;g=com.taobao.arthas&amp;a=arthas-packaging&amp;e=zip&amp;c=bin&amp;v=LATEST" target="_blank" rel="noopener noreferrer">下载地址</a></p><p>解压后，在文件夹里有<code>arthas-boot.jar</code>，直接用<code>java -jar</code>的方式启动：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>java -jar arthas-boot.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>打印帮助信息：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>java -jar arthas-boot.jar -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="基础使用" tabindex="-1"><a class="header-anchor" href="#基础使用"><span>基础使用</span></a></h2><h3 id="启动-demo" tabindex="-1"><a class="header-anchor" href="#启动-demo"><span>启动 Demo</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://alibaba.github.io/arthas/arthas-demo.jar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> arthas-demo.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>arthas-demo</code>是一个简单的程序，每隔一秒生成一个随机数，再执行质因式分解，并打印出分解结果。</p><p><code>arthas-demo</code>源代码：<a href="https://github.com/alibaba/arthas/blob/master/demo/src/main/java/demo/MathGame.java" target="_blank" rel="noopener noreferrer">查看</a></p><h3 id="启动-arthas" tabindex="-1"><a class="header-anchor" href="#启动-arthas"><span>启动 arthas</span></a></h3><p>在命令行下面执行（使用和目标进程一致的用户启动，否则可能 attach 失败）：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>wget https://alibaba.github.io/arthas/arthas-boot.jar</span></span>
<span class="line"><span>java -jar arthas-boot.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>执行该程序的用户需要和目标进程具有相同的权限。比如以<code>admin</code>用户来执行：<code>sudo su admin &amp;&amp; java -jar arthas-boot.jar</code> 或 <code>sudo -u admin -EH java -jar arthas-boot.jar</code>。</li><li>如果 attach 不上目标进程，可以查看<code>~/logs/arthas/</code> 目录下的日志。</li><li>如果下载速度比较慢，可以使用 aliyun 的镜像：<code>java -jar arthas-boot.jar --repo-mirror aliyun --use-http</code></li><li><code>java -jar arthas-boot.jar -h</code> 打印更多参数信息。</li></ul><p>选择应用 java 进程：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> arthas-boot.jar</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">* [1]: 35542</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  [2]</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 71560</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> arthas-demo.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Demo 进程是第 2 个，则输入 2，再输入<code>回车/enter</code>。Arthas 会 attach 到目标进程上，并输出日志：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[INFO] Try to attach process 71560</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[INFO] Attach process 71560 success.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[INFO] arthas-client connect 127.0.0.1 3658</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ,---.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ,------.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ,--------.,--.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ,--.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ,---.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   ,---.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  O</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\ </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|  </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.--.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;&#39;--.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  .--&#39;|  &#39;--&#39;  | /  O  \\ &#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   .-&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">|  .-.  ||  &#39;--&#39;.&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   |  |   |  </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.--.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ||  </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.-.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  |</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|  | |  ||  |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">\\</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\ </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   |  |   |  |  |  ||  | |  |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.-</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&#39;    |</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">\`--&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--&#39;\`--&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;--&#39;   \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&#39;   \`--&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--&#39;\`--&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&#39;\`-----&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wiki:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://alibaba.github.io/arthas</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">version:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3.0.5.20181127201536</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pid:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 71560</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">time: 2018-11-28 19:16:24</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看-dashboard" tabindex="-1"><a class="header-anchor" href="#查看-dashboard"><span>查看 dashboard</span></a></h3><p>输入<a href="https://alibaba.github.io/arthas/dashboard.html" target="_blank" rel="noopener noreferrer">dashboard</a>，按<code>回车/enter</code>，会展示当前进程的信息，按<code>ctrl+c</code>可以中断执行。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dashboard</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   GROUP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          PRIORI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> STATE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  %CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   INTERRU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DAEMON</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">17</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     pool-2-thread-1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      WAITIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 67</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">27</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Timer-for-arthas-dashb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     RUNNAB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">11</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     AsyncAppender-Worker-a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      WAITIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Attach</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Listener</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      RUNNAB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Finalizer</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      WAITIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Reference</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Handler</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     WAITIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Signal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dispatcher</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      RUNNAB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">26</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     as-command-execute-dae</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     TIMED_</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">13</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     job-timeout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      TIMED_</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   true</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   main</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      TIMED_</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">14</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     nioEventLoopGroup-2-1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     RUNNAB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">18</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     nioEventLoopGroup-2-2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     RUNNAB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">23</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     nioEventLoopGroup-2-3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     RUNNAB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">15</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     nioEventLoopGroup-3-1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     RUNNAB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       0:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    false</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   false</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   total</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> max</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    usage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GC</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">heap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               32M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    155M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1820M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1.77%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gc.ps_scavenge.count</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps_eden_space</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      14M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    65M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   672M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   2.21%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gc.ps_scavenge.time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 166</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps_survivor_space</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  4M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     5M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    5M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps_old_gen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         12M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    85M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1365M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0.91%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gc.ps_marksweep.count</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nonheap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            20M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    23M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           gc.ps_marksweep.time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">( </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">code_cache</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         3M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     5M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    240M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1.32%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ms</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Runtime</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">os.name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                Mac</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> OS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> X</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">os.version</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             10.13.4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           1.8.0_162</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java.home</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              /Library/Java/JavaVir</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                       tualMachines/jdk1.8.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                       _162.jdk/Contents/Hom</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                       e/jre</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通过-thread-命令来获取到arthas-demo进程的-main-class" tabindex="-1"><a class="header-anchor" href="#通过-thread-命令来获取到arthas-demo进程的-main-class"><span>通过 thread 命令来获取到<code>arthas-demo</code>进程的 Main Class</span></a></h3><p><code>thread 1</code>会打印线程 ID 1 的栈，通常是 main 函数的线程。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> thread</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;main(&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> demo.MathGame.main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MathGame.java:17</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通过-jad-来反编译-main-class" tabindex="-1"><a class="header-anchor" href="#通过-jad-来反编译-main-class"><span>通过 jad 来反编译 Main Class</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">$ jad </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">demo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MathGame</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ClassLoader</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sun</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">misc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Launcher$AppClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">3d4eac69</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  +-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sun</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">misc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Launcher$ExtClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">66350f69</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Location</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">tmp</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">arthas</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">demo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">jar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * Decompiled with CFR 0_132.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> demo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.io.PrintStream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.ArrayList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.Iterator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.Random</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.concurrent.TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MathGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Random</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> random </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Random</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> illegalArgumentCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        MathGame</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> game</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MathGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        do</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            game</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> number</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> random</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nextInt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">primeFactors</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">primeFactors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(number);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            MathGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(number, primeFactors);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;illegalArgumentCount:%3d, &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">illegalArgumentCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">primeFactors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        StringBuffer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sb</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StringBuffer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> number </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;=&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Iterator</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">iterator</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> primeFactors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iterator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">iterator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hasNext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> factor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> iterator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">next</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(factor).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;*&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">charAt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;*&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deleteCharAt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sb);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> primeFactors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (number </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            ++</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">illegalArgumentCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> IllegalArgumentException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;number is: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> number </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;, need &gt;= 2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ArrayList</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> number) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (number </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(i);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                number </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                continue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            ++i;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Affect</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(row</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">cnt</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) cost in </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">970</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ms</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch"><span>watch</span></a></h3><p>通过<a href="https://alibaba.github.io/arthas/watch.html" target="_blank" rel="noopener noreferrer">watch</a>命令来查看<code>demo.MathGame#primeFactors</code>函数的返回值：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> watch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> demo.MathGame</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> primeFactors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> returnObj</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Press</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ctrl+C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> abort.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Affect(class-cnt:1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> method-cnt:1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) cost in 107 ms.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2018-11-28</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 19:22:30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; [cost</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">1.715367ms] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">null</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2018-11-28</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 19:22:31</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; [cost</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">0.185203ms] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">null</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2018-11-28</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 19:22:32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; [cost</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">19.012416ms] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">@ArrayList[</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[5],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[47],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[2675531],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2018-11-28</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 19:22:33</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; [cost</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">0.311395ms] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">@ArrayList[</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[2],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[5],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[317],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[503],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[887],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2018-11-28</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 19:22:34</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; [cost</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">10.136007ms] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">@ArrayList[</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[2],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[2],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[3],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[3],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[31],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[717593],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2018-11-28</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 19:22:35</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; [cost</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">29.969732ms] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">@ArrayList[</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[5],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[29],</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    @Integer[7651739],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更多的功能可以查看<a href="https://alibaba.github.io/arthas/advanced-use.html" target="_blank" rel="noopener noreferrer">进阶使用</a>。</p><h3 id="退出-arthas" tabindex="-1"><a class="header-anchor" href="#退出-arthas"><span>退出 arthas</span></a></h3><p>如果只是退出当前的连接，可以用<code>quit</code>或者<code>exit</code>命令。Attach 到目标进程上的 arthas 还会继续运行，端口会保持开放，下次连接时可以直接连接上。</p><p>如果想完全退出 arthas，可以执行<code>shutdown</code>命令。</p><h2 id="进阶使用" tabindex="-1"><a class="header-anchor" href="#进阶使用"><span>进阶使用</span></a></h2><h3 id="基础命令" tabindex="-1"><a class="header-anchor" href="#基础命令"><span>基础命令</span></a></h3><ul><li>help——查看命令帮助信息</li><li><a href="https://alibaba.github.io/arthas/cat.html" target="_blank" rel="noopener noreferrer">cat</a>——打印文件内容，和 linux 里的 cat 命令类似</li><li><a href="https://alibaba.github.io/arthas/pwd.html" target="_blank" rel="noopener noreferrer">pwd</a>——返回当前的工作目录，和 linux 命令类似</li><li>cls——清空当前屏幕区域</li><li>session——查看当前会话的信息</li><li><a href="https://alibaba.github.io/arthas/reset.html" target="_blank" rel="noopener noreferrer">reset</a>——重置增强类，将被 Arthas 增强过的类全部还原，Arthas 服务端关闭时会重置所有增强过的类</li><li>version——输出当前目标 Java 进程所加载的 Arthas 版本号</li><li>history——打印命令历史</li><li>quit——退出当前 Arthas 客户端，其他 Arthas 客户端不受影响</li><li>shutdown——关闭 Arthas 服务端，所有 Arthas 客户端全部退出</li><li><a href="https://alibaba.github.io/arthas/keymap.html" target="_blank" rel="noopener noreferrer">keymap</a>——Arthas 快捷键列表及自定义快捷键</li></ul><h3 id="jvm-相关" tabindex="-1"><a class="header-anchor" href="#jvm-相关"><span>jvm 相关</span></a></h3><ul><li><a href="https://alibaba.github.io/arthas/dashboard.html" target="_blank" rel="noopener noreferrer">dashboard</a>——当前系统的实时数据面板</li><li><a href="https://alibaba.github.io/arthas/thread.html" target="_blank" rel="noopener noreferrer">thread</a>——查看当前 JVM 的线程堆栈信息</li><li><a href="https://alibaba.github.io/arthas/jvm.html" target="_blank" rel="noopener noreferrer">jvm</a>——查看当前 JVM 的信息</li><li><a href="https://alibaba.github.io/arthas/sysprop.html" target="_blank" rel="noopener noreferrer">sysprop</a>——查看和修改 JVM 的系统属性</li><li><a href="https://alibaba.github.io/arthas/sysenv.html" target="_blank" rel="noopener noreferrer">sysenv</a>——查看 JVM 的环境变量</li><li><a href="https://alibaba.github.io/arthas/vmoption.html" target="_blank" rel="noopener noreferrer">vmoption</a>——查看和修改 JVM 里诊断相关的 option</li><li><a href="https://alibaba.github.io/arthas/logger.html" target="_blank" rel="noopener noreferrer">logger</a>——查看和修改 logger</li><li><a href="https://alibaba.github.io/arthas/getstatic.html" target="_blank" rel="noopener noreferrer">getstatic</a>——查看类的静态属性</li><li><a href="https://alibaba.github.io/arthas/ognl.html" target="_blank" rel="noopener noreferrer">ognl</a>——执行 ognl 表达式</li><li><a href="https://alibaba.github.io/arthas/mbean.html" target="_blank" rel="noopener noreferrer">mbean</a>——查看 Mbean 的信息</li><li><a href="https://alibaba.github.io/arthas/heapdump.html" target="_blank" rel="noopener noreferrer">heapdump</a>——dump java heap, 类似 jmap 命令的 heap dump 功能</li></ul><h3 id="class-classloader-相关" tabindex="-1"><a class="header-anchor" href="#class-classloader-相关"><span>class/classloader 相关</span></a></h3><ul><li><a href="https://alibaba.github.io/arthas/sc.html" target="_blank" rel="noopener noreferrer">sc</a>——查看 JVM 已加载的类信息</li><li><a href="https://alibaba.github.io/arthas/sm.html" target="_blank" rel="noopener noreferrer">sm</a>——查看已加载类的方法信息</li><li><a href="https://alibaba.github.io/arthas/jad.html" target="_blank" rel="noopener noreferrer">jad</a>——反编译指定已加载类的源码</li><li><a href="https://alibaba.github.io/arthas/mc.html" target="_blank" rel="noopener noreferrer">mc</a>——内存编绎器，内存编绎<code>.java</code>文件为<code>.class</code>文件</li><li><a href="https://alibaba.github.io/arthas/redefine.html" target="_blank" rel="noopener noreferrer">redefine</a>——加载外部的<code>.class</code>文件，redefine 到 JVM 里</li><li><a href="https://alibaba.github.io/arthas/dump.html" target="_blank" rel="noopener noreferrer">dump</a>——dump 已加载类的 byte code 到特定目录</li><li><a href="https://alibaba.github.io/arthas/classloader.html" target="_blank" rel="noopener noreferrer">classloader</a>——查看 classloader 的继承树，urls，类加载信息，使用 classloader 去 getResource</li></ul><h3 id="monitor-watch-trace-相关" tabindex="-1"><a class="header-anchor" href="#monitor-watch-trace-相关"><span>monitor/watch/trace 相关</span></a></h3><blockquote><p>请注意，这些命令，都通过字节码增强技术来实现的，会在指定类的方法中插入一些切面来实现数据统计和观测，因此在线上、预发使用时，请尽量明确需要观测的类、方法以及条件，诊断结束要执行 <code>shutdown</code> 或将增强过的类执行 <code>reset</code> 命令。</p></blockquote><ul><li><a href="https://alibaba.github.io/arthas/monitor.html" target="_blank" rel="noopener noreferrer">monitor</a>——方法执行监控</li><li><a href="https://alibaba.github.io/arthas/watch.html" target="_blank" rel="noopener noreferrer">watch</a>——方法执行数据观测</li><li><a href="https://alibaba.github.io/arthas/trace.html" target="_blank" rel="noopener noreferrer">trace</a>——方法内部调用路径，并输出方法路径上的每个节点上耗时</li><li><a href="https://alibaba.github.io/arthas/stack.html" target="_blank" rel="noopener noreferrer">stack</a>——输出当前方法被调用的调用路径</li><li><a href="https://alibaba.github.io/arthas/tt.html" target="_blank" rel="noopener noreferrer">tt</a>——方法执行数据的时空隧道，记录下指定方法每次调用的入参和返回信息，并能对这些不同的时间下调用进行观测</li></ul><h3 id="options" tabindex="-1"><a class="header-anchor" href="#options"><span>options</span></a></h3><ul><li><a href="https://alibaba.github.io/arthas/options.html" target="_blank" rel="noopener noreferrer">options</a>——查看或设置 Arthas 全局开关</li></ul><h3 id="管道" tabindex="-1"><a class="header-anchor" href="#管道"><span>管道</span></a></h3><p>Arthas 支持使用管道对上述命令的结果进行进一步的处理，如<code>sm java.lang.String * | grep &#39;index&#39;</code></p><ul><li>grep——搜索满足条件的 \b 结果</li><li>plaintext——将 \b 命令的结果去除 ANSI 颜色</li><li>wc——按行统计输出结果</li></ul><h3 id="后台异步任务" tabindex="-1"><a class="header-anchor" href="#后台异步任务"><span>后台异步任务</span></a></h3><p>当线上出现偶发的问题，比如需要 watch 某个条件，而这个条件一天可能才会出现一次时，异步后台任务就派上用场了，详情请参考<a href="https://alibaba.github.io/arthas/async.html" target="_blank" rel="noopener noreferrer">这里</a></p><ul><li>使用 &gt; 将结果重写向到日志文件，使用 &amp; 指定命令是后台运行，session 断开不影响任务执行（生命周期默认为 1 天）</li><li>jobs——列出所有 job</li><li>kill——强制终止任务</li><li>fg——将暂停的任务拉到前台执行</li><li>bg——将暂停的任务放到后台执行</li></ul><h3 id="web-console" tabindex="-1"><a class="header-anchor" href="#web-console"><span>Web Console</span></a></h3><p>通过 websocket 连接 Arthas。</p><ul><li><a href="https://alibaba.github.io/arthas/web-console.html" target="_blank" rel="noopener noreferrer">Web Console</a></li></ul><h3 id="用户数据回报" tabindex="-1"><a class="header-anchor" href="#用户数据回报"><span>用户数据回报</span></a></h3><p>在<code>3.1.4</code>版本后，增加了用户数据回报功能，方便统一做安全或者历史数据统计。</p><p>在启动时，指定<code>stat-url</code>，就会回报执行的每一行命令，比如： <code>./as.sh --stat-url &#39;http://192.168.10.11:8080/api/stat&#39;</code></p><p>在 tunnel server 里有一个示例的回报代码，用户可以自己在服务器上实现。</p><p><a href="https://github.com/alibaba/arthas/blob/master/tunnel-server/src/main/java/com/alibaba/arthas/tunnel/server/app/web/StatController.java" target="_blank" rel="noopener noreferrer">StatController.java</a></p><h3 id="其他特性" tabindex="-1"><a class="header-anchor" href="#其他特性"><span>其他特性</span></a></h3><ul><li><a href="https://alibaba.github.io/arthas/async.html" target="_blank" rel="noopener noreferrer">异步命令支持</a></li><li><a href="https://alibaba.github.io/arthas/save-log.html" target="_blank" rel="noopener noreferrer">执行结果存日志</a></li><li><a href="https://alibaba.github.io/arthas/batch-support.html" target="_blank" rel="noopener noreferrer">批处理的支持</a></li><li><a href="https://github.com/alibaba/arthas/issues/11" target="_blank" rel="noopener noreferrer">ognl 表达式的用法说明</a></li></ul><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://github.com/alibaba/arthas" target="_blank" rel="noopener noreferrer">Arthas Github</a></li><li><a href="https://alibaba.github.io/arthas/index.html" target="_blank" rel="noopener noreferrer">Arthas 用户文档</a></li><li><a href="https://www.jianshu.com/p/4e34d0ab47d1" target="_blank" rel="noopener noreferrer">arthas 源码分析</a></li></ul>`,84)]))}const p=i(h,[["render",e],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/pages/c689d1/","title":"Arthas 快速入门","lang":"zh-CN","frontmatter":{"title":"Arthas 快速入门","date":"2020-02-07T23:04:47.000Z","order":5,"categories":["Java","软件","监控诊断"],"tags":["Java","诊断","Arthas"],"permalink":"/pages/c689d1/","description":"Arthas 快速入门 Arthas 是 Alibaba 开源的 Java 诊断工具 。 简介 Arthas可以解决的问题： 这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？ 我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？ 遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？ 线上遇到某个用户...","head":[["meta",{"property":"og:url","content":"https://coder-xuyong.github.io/blog/pages/c689d1/"}],["meta",{"property":"og:site_name","content":"coder-xuyong"}],["meta",{"property":"og:title","content":"Arthas 快速入门"}],["meta",{"property":"og:description","content":"Arthas 快速入门 Arthas 是 Alibaba 开源的 Java 诊断工具 。 简介 Arthas可以解决的问题： 这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？ 我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？ 遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？ 线上遇到某个用户..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-10T02:14:26.000Z"}],["meta",{"property":"article:tag","content":"Java"}],["meta",{"property":"article:tag","content":"诊断"}],["meta",{"property":"article:tag","content":"Arthas"}],["meta",{"property":"article:published_time","content":"2020-02-07T23:04:47.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-10T02:14:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Arthas 快速入门\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-02-07T23:04:47.000Z\\",\\"dateModified\\":\\"2025-06-10T02:14:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xuyong\\",\\"url\\":\\"https://github.com/coder-xuyong\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[{"level":3,"title":"使用arthas-boot（推荐）","slug":"使用arthas-boot-推荐","link":"#使用arthas-boot-推荐","children":[]},{"level":3,"title":"使用as.sh","slug":"使用as-sh","link":"#使用as-sh","children":[]},{"level":3,"title":"全量安装","slug":"全量安装","link":"#全量安装","children":[]}]},{"level":2,"title":"基础使用","slug":"基础使用","link":"#基础使用","children":[{"level":3,"title":"启动 Demo","slug":"启动-demo","link":"#启动-demo","children":[]},{"level":3,"title":"启动 arthas","slug":"启动-arthas","link":"#启动-arthas","children":[]},{"level":3,"title":"查看 dashboard","slug":"查看-dashboard","link":"#查看-dashboard","children":[]},{"level":3,"title":"通过 thread 命令来获取到arthas-demo进程的 Main Class","slug":"通过-thread-命令来获取到arthas-demo进程的-main-class","link":"#通过-thread-命令来获取到arthas-demo进程的-main-class","children":[]},{"level":3,"title":"通过 jad 来反编译 Main Class","slug":"通过-jad-来反编译-main-class","link":"#通过-jad-来反编译-main-class","children":[]},{"level":3,"title":"watch","slug":"watch","link":"#watch","children":[]},{"level":3,"title":"退出 arthas","slug":"退出-arthas","link":"#退出-arthas","children":[]}]},{"level":2,"title":"进阶使用","slug":"进阶使用","link":"#进阶使用","children":[{"level":3,"title":"基础命令","slug":"基础命令","link":"#基础命令","children":[]},{"level":3,"title":"jvm 相关","slug":"jvm-相关","link":"#jvm-相关","children":[]},{"level":3,"title":"class/classloader 相关","slug":"class-classloader-相关","link":"#class-classloader-相关","children":[]},{"level":3,"title":"monitor/watch/trace 相关","slug":"monitor-watch-trace-相关","link":"#monitor-watch-trace-相关","children":[]},{"level":3,"title":"options","slug":"options","link":"#options","children":[]},{"level":3,"title":"管道","slug":"管道","link":"#管道","children":[]},{"level":3,"title":"后台异步任务","slug":"后台异步任务","link":"#后台异步任务","children":[]},{"level":3,"title":"Web Console","slug":"web-console","link":"#web-console","children":[]},{"level":3,"title":"用户数据回报","slug":"用户数据回报","link":"#用户数据回报","children":[]},{"level":3,"title":"其他特性","slug":"其他特性","link":"#其他特性","children":[]}]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"git":{"createdTime":1749521666000,"updatedTime":1749521666000,"contributors":[{"name":"XuYong","username":"XuYong","email":"1299461580@qq.com","commits":1,"url":"https://github.com/XuYong"}]},"readingTime":{"minutes":8.71,"words":2614},"filePathRelative":"posts/01.Java/11.软件/03.监控诊断/05.Arthas.md","localizedDate":"2020年2月7日","excerpt":"\\n<blockquote>\\n<p><code>Arthas</code> 是 Alibaba 开源的 Java 诊断工具 。</p>\\n</blockquote>\\n<h2>简介</h2>\\n<p><code>Arthas</code>可以解决的问题：</p>\\n<ol>\\n<li>这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？</li>\\n<li>我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？</li>\\n<li>遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？</li>\\n<li>线上遇到某个用户的数据处理有问题，但线上同样无法 debug，线下无法重现！</li>\\n<li>是否有一个全局视角来查看系统的运行状况？</li>\\n<li>有什么办法可以监控到 JVM 的实时运行状态？</li>\\n</ol>","autoDesc":true}');export{p as comp,r as data};
