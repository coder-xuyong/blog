<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.66" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://coder-xuyong.github.io/blog/pages/2d95ce/"><meta property="og:site_name" content="coder-xuyong"><meta property="og:title" content="Elasticsearch 性能优化"><meta property="og:description" content="Elasticsearch 性能优化 Elasticsearch 是当前流行的企业级搜索引擎，设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。作为一个开箱即用的产品，在生产环境上线之后，我们其实不一定能确保其的性能和稳定性。如何根据实际情况提高服务的性能，其实有很多技巧。这章我们分享从实战经验中总结出来的 elasticsearch..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-02-18T02:31:38.000Z"><meta property="article:tag" content="数据库"><meta property="article:tag" content="搜索引擎数据库"><meta property="article:tag" content="Elasticsearch"><meta property="article:tag" content="性能"><meta property="article:published_time" content="2022-01-21T19:54:43.000Z"><meta property="article:modified_time" content="2025-02-18T02:31:38.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Elasticsearch 性能优化","image":[""],"datePublished":"2022-01-21T19:54:43.000Z","dateModified":"2025-02-18T02:31:38.000Z","author":[{"@type":"Person","name":"xuyong","url":"https://github.com/coder-xuyong"}]}</script><script>
      // console.log(666)
      </script><title>Elasticsearch 性能优化 | coder-xuyong</title><meta name="description" content="Elasticsearch 性能优化 Elasticsearch 是当前流行的企业级搜索引擎，设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。作为一个开箱即用的产品，在生产环境上线之后，我们其实不一定能确保其的性能和稳定性。如何根据实际情况提高服务的性能，其实有很多技巧。这章我们分享从实战经验中总结出来的 elasticsearch...">
    <link rel="preload" href="/assets/style-TeKtDmZX.css" as="style"><link rel="stylesheet" href="/assets/style-TeKtDmZX.css">
    <link rel="modulepreload" href="/assets/app-BE_lNU3T.js"><link rel="modulepreload" href="/assets/index.html-C0WTWT3r.js">
    <link rel="prefetch" href="/assets/index.html-B0FbX8j0.js" as="script"><link rel="prefetch" href="/assets/intro.html-A78r62Nj.js" as="script"><link rel="prefetch" href="/assets/index.html-C0ob8GXd.js" as="script"><link rel="prefetch" href="/assets/disable.html-Dpqlegng.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-BhHUt-Q2.js" as="script"><link rel="prefetch" href="/assets/layout.html-DGNwWPyy.js" as="script"><link rel="prefetch" href="/assets/markdown.html-CXHsX4KJ.js" as="script"><link rel="prefetch" href="/assets/page.html-kOAnQ3b2.js" as="script"><link rel="prefetch" href="/assets/index.html-CKwA0HSs.js" as="script"><link rel="prefetch" href="/assets/01.linux.html-12e2yKQD.js" as="script"><link rel="prefetch" href="/assets/02.linuxWork.html-DLD_bvQ2.js" as="script"><link rel="prefetch" href="/assets/DNS 工作原理.html-FsBcocQf.js" as="script"><link rel="prefetch" href="/assets/ftp.html-CEY2Z93D.js" as="script"><link rel="prefetch" href="/assets/internet.html-QCvM2Dr9.js" as="script"><link rel="prefetch" href="/assets/workcondition.html-DOGpzBVN.js" as="script"><link rel="prefetch" href="/assets/AI入门.html-Bovp_XSL.js" as="script"><link rel="prefetch" href="/assets/deepseek本地搭建.html-DMm-Qe-9.js" as="script"><link rel="prefetch" href="/assets/idea.html-C8aQxso4.js" as="script"><link rel="prefetch" href="/assets/00.mysql安装.html-CchyQnjQ.js" as="script"><link rel="prefetch" href="/assets/01.mysql常见函数.html-B56pTUDs.js" as="script"><link rel="prefetch" href="/assets/02.mysql常见错误.html-FrONYJpj.js" as="script"><link rel="prefetch" href="/assets/03.通过IBD文件恢复数据.html-DyB-1hs1.js" as="script"><link rel="prefetch" href="/assets/DDL.html-DNcDJauf.js" as="script"><link rel="prefetch" href="/assets/DML_DQL.html-DpM2m2rg.js" as="script"><link rel="prefetch" href="/assets/mysqldump.html-Drvv9GXI.js" as="script"><link rel="prefetch" href="/assets/mysql存储过程.html-8B6C5k9V.js" as="script"><link rel="prefetch" href="/assets/mysql数据格式.html-Cw9FmohL.js" as="script"><link rel="prefetch" href="/assets/mysql约束.html-2kq76kGx.js" as="script"><link rel="prefetch" href="/assets/mysql自定义函数.html-CslbgJnm.js" as="script"><link rel="prefetch" href="/assets/redis 学习笔记之实战篇.html-Z4-sxwYV.js" as="script"><link rel="prefetch" href="/assets/redis 学习笔记之快速入门.html-BvseLIX-.js" as="script"><link rel="prefetch" href="/assets/redisBUG.html-BKbg22_5.js" as="script"><link rel="prefetch" href="/assets/shell.html-D_jCOBrR.js" as="script"><link rel="prefetch" href="/assets/shellWork.html-DMj6URsN.js" as="script"><link rel="prefetch" href="/assets/blogTutorial.html-BdKeeiKG.js" as="script"><link rel="prefetch" href="/assets/cloudflare基本使用.html-BBC77Pyj.js" as="script"><link rel="prefetch" href="/assets/markdownTutorial.html-BsDtQV_E.js" as="script"><link rel="prefetch" href="/assets/页面配置使用说明.html-D8ytgBTB.js" as="script"><link rel="prefetch" href="/assets/index.html-BBHnF4p1.js" as="script"><link rel="prefetch" href="/assets/index.html-v-xQM2Hg.js" as="script"><link rel="prefetch" href="/assets/index.html-BQgPtful.js" as="script"><link rel="prefetch" href="/assets/index.html-gbGXAmor.js" as="script"><link rel="prefetch" href="/assets/index.html-2Qy0u1Es.js" as="script"><link rel="prefetch" href="/assets/index.html-DLBEVQ6_.js" as="script"><link rel="prefetch" href="/assets/index.html-CiYmj8Os.js" as="script"><link rel="prefetch" href="/assets/index.html-xy9AhRT6.js" as="script"><link rel="prefetch" href="/assets/index.html-CXNzj-i6.js" as="script"><link rel="prefetch" href="/assets/index.html-BVJonm75.js" as="script"><link rel="prefetch" href="/assets/index.html-CovxbgsD.js" as="script"><link rel="prefetch" href="/assets/index.html-BiqJYbIO.js" as="script"><link rel="prefetch" href="/assets/index.html-CWPW9LjG.js" as="script"><link rel="prefetch" href="/assets/index.html-CeWQxRfh.js" as="script"><link rel="prefetch" href="/assets/index.html-Cz4-GEwt.js" as="script"><link rel="prefetch" href="/assets/index.html-33rmlNZZ.js" as="script"><link rel="prefetch" href="/assets/bug.html-Ck4mktZk.js" as="script"><link rel="prefetch" href="/assets/docx4j.html-BiyEVdUk.js" as="script"><link rel="prefetch" href="/assets/log.html-C5a4OKHm.js" as="script"><link rel="prefetch" href="/assets/maven.html-CUZwe6-2.js" as="script"><link rel="prefetch" href="/assets/modbus.html-D3kdaWGe.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-LFlq61dz.js" as="script"><link rel="prefetch" href="/assets/netty.html-B5AzckXu.js" as="script"><link rel="prefetch" href="/assets/workcondition.html-sBIjDxx2.js" as="script"><link rel="prefetch" href="/assets/djangoWork.html-EWgcoKOo.js" as="script"><link rel="prefetch" href="/assets/00.Java开发环境.html-COUswW49.js" as="script"><link rel="prefetch" href="/assets/01.Java基础语法.html-B6ejNieL.js" as="script"><link rel="prefetch" href="/assets/02.Java基本数据类型.html-D6LvaYh5.js" as="script"><link rel="prefetch" href="/assets/03.Java面向对象.html-BWwNrv2A.js" as="script"><link rel="prefetch" href="/assets/04.Java方法.html-vY8muKQD.js" as="script"><link rel="prefetch" href="/assets/05.Java数组.html-DvPELaTU.js" as="script"><link rel="prefetch" href="/assets/06.Java枚举.html-CMNDr0sI.js" as="script"><link rel="prefetch" href="/assets/07.Java控制语句.html-O-FaAlsV.js" as="script"><link rel="prefetch" href="/assets/08.Java异常.html-DoSOLFKX.js" as="script"><link rel="prefetch" href="/assets/09.Java泛型.html-CDhtjOAC.js" as="script"><link rel="prefetch" href="/assets/10.Java反射.html-D4rKCevA.js" as="script"><link rel="prefetch" href="/assets/11.Java注解.html-BGIXzmg7.js" as="script"><link rel="prefetch" href="/assets/12.Java常用工具类.html-e8tSXf_1.js" as="script"><link rel="prefetch" href="/assets/13.JavaString类型.html-_6bM8SFs.js" as="script"><link rel="prefetch" href="/assets/14.java日志.html-rTuGgJN-.js" as="script"><link rel="prefetch" href="/assets/01.Java正则.html-vYbVpFmi.js" as="script"><link rel="prefetch" href="/assets/02.Java编码和加密.html-B3RNZ0sZ.js" as="script"><link rel="prefetch" href="/assets/03.Java国际化.html-I0IXkbab.js" as="script"><link rel="prefetch" href="/assets/04.JDK8.html-BDJK1awW.js" as="script"><link rel="prefetch" href="/assets/05.JavaSPI.html-B9gJyl6v.js" as="script"><link rel="prefetch" href="/assets/99.Java编程规范.html-B0d0LFHg.js" as="script"><link rel="prefetch" href="/assets/01.Java容器简介.html-091I0Nyu.js" as="script"><link rel="prefetch" href="/assets/02.Java容器之List.html-C_KOQ_k6.js" as="script"><link rel="prefetch" href="/assets/03.Java容器之Map.html-DjoAv3ws.js" as="script"><link rel="prefetch" href="/assets/04.Java容器之Set.html-D1zm5aWH.js" as="script"><link rel="prefetch" href="/assets/05.Java容器之Queue.html-qDWhwop0.js" as="script"><link rel="prefetch" href="/assets/06.Java容器之Stream.html-BCny7Fvr.js" as="script"><link rel="prefetch" href="/assets/01.JavaIO模型.html-D5vIKnzg.js" as="script"><link rel="prefetch" href="/assets/02.JavaNIO.html-Dm_BRoyQ.js" as="script"><link rel="prefetch" href="/assets/03.Java序列化.html-Dx6A8uqt.js" as="script"><link rel="prefetch" href="/assets/04.Java网络编程.html-B461FeZA.js" as="script"><link rel="prefetch" href="/assets/05.JavaIO工具类.html-5N5-lPgg.js" as="script"><link rel="prefetch" href="/assets/06.jdbc.html-ybsQBaAs.js" as="script"><link rel="prefetch" href="/assets/index.html-OBKdnoOt.js" as="script"><link rel="prefetch" href="/assets/index.html-0v9DlMCd.js" as="script"><link rel="prefetch" href="/assets/index.html-CjCuMKa0.js" as="script"><link rel="prefetch" href="/assets/index.html-BagazPws.js" as="script"><link rel="prefetch" href="/assets/index.html-rBPI80GI.js" as="script"><link rel="prefetch" href="/assets/index.html-IsiyzP9R.js" as="script"><link rel="prefetch" href="/assets/index.html-DxdB43FD.js" as="script"><link rel="prefetch" href="/assets/index.html-wD3gUg9m.js" as="script"><link rel="prefetch" href="/assets/index.html-ax5iPznk.js" as="script"><link rel="prefetch" href="/assets/index.html-DjMS2B8F.js" as="script"><link rel="prefetch" href="/assets/index.html-DVm7UvHc.js" as="script"><link rel="prefetch" href="/assets/index.html-bAOaoVe-.js" as="script"><link rel="prefetch" href="/assets/index.html-Dq28FK6N.js" as="script"><link rel="prefetch" href="/assets/index.html-Ju7urcdk.js" as="script"><link rel="prefetch" href="/assets/index.html-EjEYs-Bc.js" as="script"><link rel="prefetch" href="/assets/index.html-Cx9VfA1f.js" as="script"><link rel="prefetch" href="/assets/index.html-1qBUvqIy.js" as="script"><link rel="prefetch" href="/assets/index.html-DN29KtjH.js" as="script"><link rel="prefetch" href="/assets/index.html-C6Sto70q.js" as="script"><link rel="prefetch" href="/assets/index.html-CGADd658.js" as="script"><link rel="prefetch" href="/assets/index.html-DFO4dvX-.js" as="script"><link rel="prefetch" href="/assets/index.html-D_3DI1DR.js" as="script"><link rel="prefetch" href="/assets/第三方库错误集合.html-CO9oEnaV.js" as="script"><link rel="prefetch" href="/assets/99.Java面试.html-Chp_Caze.js" as="script"><link rel="prefetch" href="/assets/index.html-BIsQwY7y.js" as="script"><link rel="prefetch" href="/assets/index.html-BxRLaGY5.js" as="script"><link rel="prefetch" href="/assets/index.html-CyfY_ibh.js" as="script"><link rel="prefetch" href="/assets/index.html-B2LJby_z.js" as="script"><link rel="prefetch" href="/assets/index.html-DL9fxdpE.js" as="script"><link rel="prefetch" href="/assets/index.html-CnSb2YbZ.js" as="script"><link rel="prefetch" href="/assets/index.html-58wEF2S2.js" as="script"><link rel="prefetch" href="/assets/index.html-D7_g6KtI.js" as="script"><link rel="prefetch" href="/assets/index.html-C-huolft.js" as="script"><link rel="prefetch" href="/assets/index.html-CaLQkHM6.js" as="script"><link rel="prefetch" href="/assets/index.html-BwyB7UWW.js" as="script"><link rel="prefetch" href="/assets/index.html-CeJVu6vn.js" as="script"><link rel="prefetch" href="/assets/index.html-CJv8PDeY.js" as="script"><link rel="prefetch" href="/assets/index.html-D6vfnMFF.js" as="script"><link rel="prefetch" href="/assets/index.html-B-Me3Piy.js" as="script"><link rel="prefetch" href="/assets/index.html-DbMEDaIn.js" as="script"><link rel="prefetch" href="/assets/index.html-D8Kq9lce.js" as="script"><link rel="prefetch" href="/assets/index.html-CejJ-p4G.js" as="script"><link rel="prefetch" href="/assets/index.html-Do3oQIBF.js" as="script"><link rel="prefetch" href="/assets/index.html-BYAOTR6C.js" as="script"><link rel="prefetch" href="/assets/index.html-CKvwgbrh.js" as="script"><link rel="prefetch" href="/assets/21.Mysql触发器.html-Dv-cJd6d.js" as="script"><link rel="prefetch" href="/assets/22.mysqldump.html-DPwpgiO9.js" as="script"><link rel="prefetch" href="/assets/98.mysql常见错误.html-DI-kaowh.js" as="script"><link rel="prefetch" href="/assets/index.html-ByVMCmql.js" as="script"><link rel="prefetch" href="/assets/index.html-CQZk8rJt.js" as="script"><link rel="prefetch" href="/assets/index.html-D5gH9Igm.js" as="script"><link rel="prefetch" href="/assets/index.html-DAVeTuG1.js" as="script"><link rel="prefetch" href="/assets/index.html-C3zqR9Nu.js" as="script"><link rel="prefetch" href="/assets/index.html-B9r3SJfy.js" as="script"><link rel="prefetch" href="/assets/index.html-WeZMqAAA.js" as="script"><link rel="prefetch" href="/assets/index.html-BaNa24Ms.js" as="script"><link rel="prefetch" href="/assets/index.html-DuGGt2uz.js" as="script"><link rel="prefetch" href="/assets/index.html-yNNx3wda.js" as="script"><link rel="prefetch" href="/assets/index.html-DWVSf2xi.js" as="script"><link rel="prefetch" href="/assets/index.html-DM7OP9ec.js" as="script"><link rel="prefetch" href="/assets/index.html-DtaMCslQ.js" as="script"><link rel="prefetch" href="/assets/index.html-B4jy6B4R.js" as="script"><link rel="prefetch" href="/assets/index.html-BBB39T5G.js" as="script"><link rel="prefetch" href="/assets/index.html-B3_k8QiX.js" as="script"><link rel="prefetch" href="/assets/index.html-CFcmuqA2.js" as="script"><link rel="prefetch" href="/assets/01.Redis基本数据类型.html--C3UgrGL.js" as="script"><link rel="prefetch" href="/assets/index.html-COAu6vl3.js" as="script"><link rel="prefetch" href="/assets/index.html-C2QIu-WV.js" as="script"><link rel="prefetch" href="/assets/index.html-5nxXtEnQ.js" as="script"><link rel="prefetch" href="/assets/index.html-EGFP_I7y.js" as="script"><link rel="prefetch" href="/assets/index.html-DnPE-88t.js" as="script"><link rel="prefetch" href="/assets/index.html-BoQDMa0z.js" as="script"><link rel="prefetch" href="/assets/index.html-B63ART02.js" as="script"><link rel="prefetch" href="/assets/index.html-BoH0PUFO.js" as="script"><link rel="prefetch" href="/assets/31.Redis发布订阅.html-DnKlGbgB.js" as="script"><link rel="prefetch" href="/assets/index.html-9FXH7aGd.js" as="script"><link rel="prefetch" href="/assets/index.html-BmPjOFUd.js" as="script"><link rel="prefetch" href="/assets/index.html-BMYaCecg.js" as="script"><link rel="prefetch" href="/assets/index.html-6i6TA_HP.js" as="script"><link rel="prefetch" href="/assets/index.html-Bjfkglqr.js" as="script"><link rel="prefetch" href="/assets/43.Redis发布订阅案例.html-DyO26uPx.js" as="script"><link rel="prefetch" href="/assets/index.html-sflFZjr5.js" as="script"><link rel="prefetch" href="/assets/README.html-DYE6gmu6.js" as="script"><link rel="prefetch" href="/assets/index.html-DznY1dbv.js" as="script"><link rel="prefetch" href="/assets/index.html-BxNOyyLg.js" as="script"><link rel="prefetch" href="/assets/index.html-DWyuEGhl.js" as="script"><link rel="prefetch" href="/assets/index.html-U5CgJeu4.js" as="script"><link rel="prefetch" href="/assets/index.html-kabmolx6.js" as="script"><link rel="prefetch" href="/assets/index.html-Bp5gvnzV.js" as="script"><link rel="prefetch" href="/assets/index.html-BtAPtJAA.js" as="script"><link rel="prefetch" href="/assets/index.html-HOqh4y4w.js" as="script"><link rel="prefetch" href="/assets/index.html-CHhay2D2.js" as="script"><link rel="prefetch" href="/assets/index.html-BBaNv_6B.js" as="script"><link rel="prefetch" href="/assets/index.html-B23txU9N.js" as="script"><link rel="prefetch" href="/assets/index.html-C7w4f3y-.js" as="script"><link rel="prefetch" href="/assets/index.html-nkIMZkK3.js" as="script"><link rel="prefetch" href="/assets/index.html-DuDO_Zgf.js" as="script"><link rel="prefetch" href="/assets/index.html-BXzhtNMf.js" as="script"><link rel="prefetch" href="/assets/index.html-B6hppEqJ.js" as="script"><link rel="prefetch" href="/assets/index.html-z0BvprS4.js" as="script"><link rel="prefetch" href="/assets/index.html-Be762u9I.js" as="script"><link rel="prefetch" href="/assets/index.html-DG8KIZ1Z.js" as="script"><link rel="prefetch" href="/assets/index.html-BEpRmmxL.js" as="script"><link rel="prefetch" href="/assets/index.html-BWtMaJLR.js" as="script"><link rel="prefetch" href="/assets/index.html-C1JaWhmn.js" as="script"><link rel="prefetch" href="/assets/index.html-CKZNwyap.js" as="script"><link rel="prefetch" href="/assets/index.html-jzs4_V46.js" as="script"><link rel="prefetch" href="/assets/index.html-TL7K0w5U.js" as="script"><link rel="prefetch" href="/assets/index.html-jh4ari_Q.js" as="script"><link rel="prefetch" href="/assets/index.html-F8SdeTqV.js" as="script"><link rel="prefetch" href="/assets/index.html-izTqPtAd.js" as="script"><link rel="prefetch" href="/assets/index.html-Dqi7EqUY.js" as="script"><link rel="prefetch" href="/assets/index.html-BBy3jelc.js" as="script"><link rel="prefetch" href="/assets/index.html-CHcSOjs3.js" as="script"><link rel="prefetch" href="/assets/index.html-Cj3VVi6-.js" as="script"><link rel="prefetch" href="/assets/index.html-DD53rOq7.js" as="script"><link rel="prefetch" href="/assets/index.html-XSW7QTx7.js" as="script"><link rel="prefetch" href="/assets/index.html-a8TOsb5r.js" as="script"><link rel="prefetch" href="/assets/01-Java基础语法.html-C0ZZ0VLN.js" as="script"><link rel="prefetch" href="/assets/02-Java基础语法.html--Tb-e-h0.js" as="script"><link rel="prefetch" href="/assets/03笔记.html-Bj13pbla.js" as="script"><link rel="prefetch" href="/assets/day04-流程控制语句.html-BI1S3QjF.js" as="script"><link rel="prefetch" href="/assets/循环高级.html-Dvmi_hV_.js" as="script"><link rel="prefetch" href="/assets/数组.html-CzdL9NtD.js" as="script"><link rel="prefetch" href="/assets/方法.html-DE62SmDF.js" as="script"><link rel="prefetch" href="/assets/综合练习.html-dKEkjZkT.js" as="script"><link rel="prefetch" href="/assets/常用API.html-jUnN593w.js" as="script"><link rel="prefetch" href="/assets/面向对象.html-4uTh05Tc.js" as="script"><link rel="prefetch" href="/assets/扩展：键盘录入笔记.html-CfKSNv3v.js" as="script"><link rel="prefetch" href="/assets/面向对象综合训练综合练习.html-Dx7cExZY.js" as="script"><link rel="prefetch" href="/assets/ArrayList_学生管理系统.html-B_vSI7vh.js" as="script"><link rel="prefetch" href="/assets/day13面向对象进阶.html-C73zqie1.js" as="script"><link rel="prefetch" href="/assets/多态.html-CkmjxB0C.js" as="script"><link rel="prefetch" href="/assets/day15笔记.html-BeBOlRKS.js" as="script"><link rel="prefetch" href="/assets/day16-面向对象综合练习（上）.html-BtoTfvN4.js" as="script"><link rel="prefetch" href="/assets/day17-面向对象综合练习（下）.html-DMhcY6BF.js" as="script"><link rel="prefetch" href="/assets/API.html-D9j4E6-I.js" as="script"><link rel="prefetch" href="/assets/正则表达式.html-MIUnKkUt.js" as="script"><link rel="prefetch" href="/assets/API.html-B3L6bEK8.js" as="script"><link rel="prefetch" href="/assets/算法.html-C0aM5sPd.js" as="script"><link rel="prefetch" href="/assets/集合01.html-BJr9aoGb.js" as="script"><link rel="prefetch" href="/assets/集合02.html-BtXwLh39.js" as="script"><link rel="prefetch" href="/assets/集合03.html-pwyoA_FP.js" as="script"><link rel="prefetch" href="/assets/可变参数_综合练习.html-C_vstqHx.js" as="script"><link rel="prefetch" href="/assets/stream流和方法引用.html-DJl6uMDy.js" as="script"><link rel="prefetch" href="/assets/IO(异常_File_综合案例）.html-qC2eRhwo.js" as="script"><link rel="prefetch" href="/assets/IO流（字节流_字符流）.html-CKxFlTfC.js" as="script"><link rel="prefetch" href="/assets/IO流（其他流）.html-C3bOcpKC.js" as="script"><link rel="prefetch" href="/assets/多线程01.html-CbPl4rYZ.js" as="script"><link rel="prefetch" href="/assets/多线程02.html-B08RELsm.js" as="script"><link rel="prefetch" href="/assets/网络编程.html-QTS2z3_8.js" as="script"><link rel="prefetch" href="/assets/反射_动态代理.html-C5r-azXZ.js" as="script"><link rel="prefetch" href="/assets/1.object-oriented-programming.html-CX-ZkB4l.js" as="script"><link rel="prefetch" href="/assets/2.three-features.html-BkUA5YjR.js" as="script"><link rel="prefetch" href="/assets/3.java-basic.html-rzEoXUBI.js" as="script"><link rel="prefetch" href="/assets/4.collection.html-h4kNxjqC.js" as="script"><link rel="prefetch" href="/assets/comparator.html-BE2NW-kS.js" as="script"><link rel="prefetch" href="/assets/ioStream.html-DKk8Zxgc.js" as="script"><link rel="prefetch" href="/assets/java8Stream.html-BAY2FQHL.js" as="script"><link rel="prefetch" href="/assets/jottings.html-BJ_5rwg6.js" as="script"><link rel="prefetch" href="/assets/multithreading.html-BwXi4b9j.js" as="script"><link rel="prefetch" href="/assets/regularExpression.html-DtGcMXc3.js" as="script"><link rel="prefetch" href="/assets/HTTP_Tomcat_Servlet.html-DPYHcS-n.js" as="script"><link rel="prefetch" href="/assets/Request_Response.html-SbggLJse.js" as="script"><link rel="prefetch" href="/assets/jdbc.html-BjkWhUMF.js" as="script"><link rel="prefetch" href="/assets/index.html-Dnowf1kE.js" as="script"><link rel="prefetch" href="/assets/index.html-blcjLzi0.js" as="script"><link rel="prefetch" href="/assets/index.html-BVoK2sWw.js" as="script"><link rel="prefetch" href="/assets/index.html-Ds0AAL7y.js" as="script"><link rel="prefetch" href="/assets/index.html-DqweSCRd.js" as="script"><link rel="prefetch" href="/assets/index.html-pTPq3qlY.js" as="script"><link rel="prefetch" href="/assets/index.html-Tv0qtWDH.js" as="script"><link rel="prefetch" href="/assets/index.html-VTD5nVCI.js" as="script"><link rel="prefetch" href="/assets/index.html-DG2MUugj.js" as="script"><link rel="prefetch" href="/assets/index.html-9aObjAau.js" as="script"><link rel="prefetch" href="/assets/index.html-DcwTetqb.js" as="script"><link rel="prefetch" href="/assets/index.html-DDTSM6Ne.js" as="script"><link rel="prefetch" href="/assets/index.html-vhKNohJC.js" as="script"><link rel="prefetch" href="/assets/index.html-OsSbelcJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CjTPv7iK.js" as="script"><link rel="prefetch" href="/assets/index.html-Dk_3YeeH.js" as="script"><link rel="prefetch" href="/assets/index.html-BZqYlHTr.js" as="script"><link rel="prefetch" href="/assets/index.html-ChiojcN5.js" as="script"><link rel="prefetch" href="/assets/index.html-PQD-s7_T.js" as="script"><link rel="prefetch" href="/assets/index.html-BJ-Md_WB.js" as="script"><link rel="prefetch" href="/assets/index.html-C4q2esVe.js" as="script"><link rel="prefetch" href="/assets/index.html-BzfvdKpD.js" as="script"><link rel="prefetch" href="/assets/index.html-QdzwF1tT.js" as="script"><link rel="prefetch" href="/assets/index.html-DV21ZF1X.js" as="script"><link rel="prefetch" href="/assets/index.html-3_1D3VsE.js" as="script"><link rel="prefetch" href="/assets/index.html-P7uuseuW.js" as="script"><link rel="prefetch" href="/assets/index.html-BR-eLs0S.js" as="script"><link rel="prefetch" href="/assets/index.html-BkLj1cJU.js" as="script"><link rel="prefetch" href="/assets/index.html-p1wg39-K.js" as="script"><link rel="prefetch" href="/assets/index.html-DVxs04Zu.js" as="script"><link rel="prefetch" href="/assets/index.html-Dknxn0fX.js" as="script"><link rel="prefetch" href="/assets/index.html-D5W7D3RJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DKgezSQC.js" as="script"><link rel="prefetch" href="/assets/index.html-CKDHqfku.js" as="script"><link rel="prefetch" href="/assets/index.html-P4kQEhpw.js" as="script"><link rel="prefetch" href="/assets/index.html-CvATwxuv.js" as="script"><link rel="prefetch" href="/assets/index.html-CKwXvPYl.js" as="script"><link rel="prefetch" href="/assets/index.html-DXStpKTV.js" as="script"><link rel="prefetch" href="/assets/index.html-Dfdjtvkw.js" as="script"><link rel="prefetch" href="/assets/index.html-2RNhNjMC.js" as="script"><link rel="prefetch" href="/assets/index.html-VCvNpRks.js" as="script"><link rel="prefetch" href="/assets/index.html-zCWsXj0M.js" as="script"><link rel="prefetch" href="/assets/index.html-D7UPNUX7.js" as="script"><link rel="prefetch" href="/assets/index.html-CsSjwQ2O.js" as="script"><link rel="prefetch" href="/assets/index.html-BUhtEfaz.js" as="script"><link rel="prefetch" href="/assets/index.html-a3EmoHfB.js" as="script"><link rel="prefetch" href="/assets/index.html-BgD5dY_e.js" as="script"><link rel="prefetch" href="/assets/index.html-CAse4688.js" as="script"><link rel="prefetch" href="/assets/index.html-nr0TnBg5.js" as="script"><link rel="prefetch" href="/assets/index.html-DJsLK8gj.js" as="script"><link rel="prefetch" href="/assets/index.html-B03OH2Mx.js" as="script"><link rel="prefetch" href="/assets/index.html-3PE1hxME.js" as="script"><link rel="prefetch" href="/assets/index.html-DNvFBXyq.js" as="script"><link rel="prefetch" href="/assets/index.html-Dte9f02H.js" as="script"><link rel="prefetch" href="/assets/index.html-idZsa8Z2.js" as="script"><link rel="prefetch" href="/assets/index.html-9sx-A_mT.js" as="script"><link rel="prefetch" href="/assets/index.html-DVFTcDSv.js" as="script"><link rel="prefetch" href="/assets/index.html-BJE4ncGg.js" as="script"><link rel="prefetch" href="/assets/index.html-DxR5WmaX.js" as="script"><link rel="prefetch" href="/assets/index.html-D5BPWuqp.js" as="script"><link rel="prefetch" href="/assets/Netty01-nio.html-CpfnmXJc.js" as="script"><link rel="prefetch" href="/assets/Netty02-入门.html-Dz4_WzIa.js" as="script"><link rel="prefetch" href="/assets/Netty03-进阶.html-PbuJH5d1.js" as="script"><link rel="prefetch" href="/assets/Netty04-优化与源码.html-C-d4Smj3.js" as="script"><link rel="prefetch" href="/assets/Netty05-实战.html-BbNR6Ayl.js" as="script"><link rel="prefetch" href="/assets/log日志.html-CXtID8mh.js" as="script"><link rel="prefetch" href="/assets/类加载器.html-BcU-3BlG.js" as="script"><link rel="prefetch" href="/assets/xml.html-DO6ilx_u.js" as="script"><link rel="prefetch" href="/assets/单元测试.html-ChxbC-Pr.js" as="script"><link rel="prefetch" href="/assets/注解.html-mPTktCaw.js" as="script"><link rel="prefetch" href="/assets/day02-JavaScript-Vue.html-jGmxOniZ.js" as="script"><link rel="prefetch" href="/assets/day03_Vue_Element.html-CUP1QLRd.js" as="script"><link rel="prefetch" href="/assets/数据库-MySQL-01.html-DPY0iY8m.js" as="script"><link rel="prefetch" href="/assets/数据库-MySQL-02.html-BAZ77nDz.js" as="script"><link rel="prefetch" href="/assets/Mybatis.html-lMmIZxHR.js" as="script"><link rel="prefetch" href="/assets/SpringBootWeb案例-1.html-McHKunmj.js" as="script"><link rel="prefetch" href="/assets/SpringBootWeb案例-2.html-BKjOGiGu.js" as="script"><link rel="prefetch" href="/assets/SpringBootWeb登录认证.html-B_HOMDf7.js" as="script"><link rel="prefetch" href="/assets/SpringBootWeb AOP.html-CGY75IHy.js" as="script"><link rel="prefetch" href="/assets/SpringBoot原理篇.html-D1D_V0y2.js" as="script"><link rel="prefetch" href="/assets/Maven高级.html-C0bxtlvQ.js" as="script"><link rel="prefetch" href="/assets/Maven.html-Depl45WZ.js" as="script"><link rel="prefetch" href="/assets/SpringBootWeb入门.html-DWTAC1-5.js" as="script"><link rel="prefetch" href="/assets/数据库-MySQL-03.html-lmcXLjNm.js" as="script"><link rel="prefetch" href="/assets/Mybatis入门.html-B6nZzGRs.js" as="script"><link rel="prefetch" href="/assets/404.html-BctWQle_.js" as="script"><link rel="prefetch" href="/assets/index.html-DvGBZawn.js" as="script"><link rel="prefetch" href="/assets/index.html-CQde3x45.js" as="script"><link rel="prefetch" href="/assets/index.html-C6w7jiAA.js" as="script"><link rel="prefetch" href="/assets/index.html-vF3iMrgh.js" as="script"><link rel="prefetch" href="/assets/index.html-D2WdiaOU.js" as="script"><link rel="prefetch" href="/assets/index.html-BExdBknV.js" as="script"><link rel="prefetch" href="/assets/index.html-C-TsYGqP.js" as="script"><link rel="prefetch" href="/assets/index.html-DlctJ96x.js" as="script"><link rel="prefetch" href="/assets/index.html-CV9P66Wr.js" as="script"><link rel="prefetch" href="/assets/index.html-DVb271wc.js" as="script"><link rel="prefetch" href="/assets/index.html-BCXs530H.js" as="script"><link rel="prefetch" href="/assets/index.html-D8Nz4mW3.js" as="script"><link rel="prefetch" href="/assets/index.html-DW1Bm0WT.js" as="script"><link rel="prefetch" href="/assets/index.html-BRoMw_KH.js" as="script"><link rel="prefetch" href="/assets/index.html-BPi3ULgD.js" as="script"><link rel="prefetch" href="/assets/index.html-b1A2ZUFk.js" as="script"><link rel="prefetch" href="/assets/index.html-BqWSHN0J.js" as="script"><link rel="prefetch" href="/assets/index.html-TP7ANten.js" as="script"><link rel="prefetch" href="/assets/index.html-BkORFGVT.js" as="script"><link rel="prefetch" href="/assets/index.html-BlwYyrjS.js" as="script"><link rel="prefetch" href="/assets/index.html-DSSPIXjN.js" as="script"><link rel="prefetch" href="/assets/index.html-BJqc-9vu.js" as="script"><link rel="prefetch" href="/assets/index.html-CsIU4jfd.js" as="script"><link rel="prefetch" href="/assets/index.html-B7haI8C2.js" as="script"><link rel="prefetch" href="/assets/index.html-pwkQF8A1.js" as="script"><link rel="prefetch" href="/assets/index.html-Ak9Jn8el.js" as="script"><link rel="prefetch" href="/assets/index.html-COD2S_9Q.js" as="script"><link rel="prefetch" href="/assets/index.html-cgA6UgJ3.js" as="script"><link rel="prefetch" href="/assets/index.html-BHJqm5mB.js" as="script"><link rel="prefetch" href="/assets/index.html-BvPLcP8S.js" as="script"><link rel="prefetch" href="/assets/index.html-CsopAR6M.js" as="script"><link rel="prefetch" href="/assets/index.html-C4rVARd8.js" as="script"><link rel="prefetch" href="/assets/index.html-B5RoMj2K.js" as="script"><link rel="prefetch" href="/assets/index.html-ikIJlcWe.js" as="script"><link rel="prefetch" href="/assets/index.html-BmYtl4Rw.js" as="script"><link rel="prefetch" href="/assets/index.html-W7bmL9WE.js" as="script"><link rel="prefetch" href="/assets/index.html-81p4WxAx.js" as="script"><link rel="prefetch" href="/assets/index.html-C0IcYdqs.js" as="script"><link rel="prefetch" href="/assets/index.html-WDFYDAqL.js" as="script"><link rel="prefetch" href="/assets/index.html-W4tw4txl.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr5Fcb4O.js" as="script"><link rel="prefetch" href="/assets/index.html-D4s9er0E.js" as="script"><link rel="prefetch" href="/assets/index.html-DUGQqrP_.js" as="script"><link rel="prefetch" href="/assets/index.html-BzUvVDku.js" as="script"><link rel="prefetch" href="/assets/index.html-Cn5uC_45.js" as="script"><link rel="prefetch" href="/assets/index.html-COcm4oUD.js" as="script"><link rel="prefetch" href="/assets/index.html-Wj9l_S9M.js" as="script"><link rel="prefetch" href="/assets/index.html-BxOAuTub.js" as="script"><link rel="prefetch" href="/assets/index.html-JC_BcDYc.js" as="script"><link rel="prefetch" href="/assets/index.html-C4Gy2uhO.js" as="script"><link rel="prefetch" href="/assets/index.html-CM-7ZJ5W.js" as="script"><link rel="prefetch" href="/assets/index.html-InKLo44g.js" as="script"><link rel="prefetch" href="/assets/index.html-CBEw945v.js" as="script"><link rel="prefetch" href="/assets/index.html-BglOoKjm.js" as="script"><link rel="prefetch" href="/assets/index.html-ZPXKKBOL.js" as="script"><link rel="prefetch" href="/assets/index.html-Dtp5i80A.js" as="script"><link rel="prefetch" href="/assets/index.html-CnJvORnQ.js" as="script"><link rel="prefetch" href="/assets/index.html-C1QI8hNM.js" as="script"><link rel="prefetch" href="/assets/index.html-CexcFiZl.js" as="script"><link rel="prefetch" href="/assets/index.html-C1nQ5EyI.js" as="script"><link rel="prefetch" href="/assets/index.html-B6eEdaiL.js" as="script"><link rel="prefetch" href="/assets/index.html-BNA5EuG5.js" as="script"><link rel="prefetch" href="/assets/index.html-oUhd0MkJ.js" as="script"><link rel="prefetch" href="/assets/index.html-Ybi3OHWS.js" as="script"><link rel="prefetch" href="/assets/index.html-BCHEDtvY.js" as="script"><link rel="prefetch" href="/assets/index.html-DyU0teiC.js" as="script"><link rel="prefetch" href="/assets/index.html-DgVTTxu8.js" as="script"><link rel="prefetch" href="/assets/index.html-DOlttjNg.js" as="script"><link rel="prefetch" href="/assets/index.html-CIcWXEs4.js" as="script"><link rel="prefetch" href="/assets/index.html-z8yFT8_B.js" as="script"><link rel="prefetch" href="/assets/index.html-DabGhkSt.js" as="script"><link rel="prefetch" href="/assets/index.html-CGf4SBoy.js" as="script"><link rel="prefetch" href="/assets/index.html-czRXkC5n.js" as="script"><link rel="prefetch" href="/assets/index.html-DPlWu5_N.js" as="script"><link rel="prefetch" href="/assets/index.html-DORjtjj8.js" as="script"><link rel="prefetch" href="/assets/index.html-C0H66OuO.js" as="script"><link rel="prefetch" href="/assets/index.html-Czp-IPP4.js" as="script"><link rel="prefetch" href="/assets/index.html-Ul8ptigw.js" as="script"><link rel="prefetch" href="/assets/index.html-DSNPVQ6F.js" as="script"><link rel="prefetch" href="/assets/index.html-DK4j_nRh.js" as="script"><link rel="prefetch" href="/assets/index.html-Dj0jOeHL.js" as="script"><link rel="prefetch" href="/assets/index.html-DIj7Ufd8.js" as="script"><link rel="prefetch" href="/assets/index.html-CHObZ9Cw.js" as="script"><link rel="prefetch" href="/assets/index.html-DFGLr6rn.js" as="script"><link rel="prefetch" href="/assets/index.html-DrPP1h7c.js" as="script"><link rel="prefetch" href="/assets/index.html-mRtm3bvg.js" as="script"><link rel="prefetch" href="/assets/index.html-BUvDX_sf.js" as="script"><link rel="prefetch" href="/assets/index.html-BYoay8VI.js" as="script"><link rel="prefetch" href="/assets/index.html-DvuTqFqo.js" as="script"><link rel="prefetch" href="/assets/index.html-U1zSjOHP.js" as="script"><link rel="prefetch" href="/assets/index.html-S8cEPeYw.js" as="script"><link rel="prefetch" href="/assets/index.html-DoxmaZyx.js" as="script"><link rel="prefetch" href="/assets/index.html-2gRwN_Vn.js" as="script"><link rel="prefetch" href="/assets/index.html-DK-lGKFY.js" as="script"><link rel="prefetch" href="/assets/index.html-DaHNs5WJ.js" as="script"><link rel="prefetch" href="/assets/index.html-S3566B2u.js" as="script"><link rel="prefetch" href="/assets/index.html-B1-fJ2ZL.js" as="script"><link rel="prefetch" href="/assets/index.html-amyIt6J0.js" as="script"><link rel="prefetch" href="/assets/index.html-QtSatBOl.js" as="script"><link rel="prefetch" href="/assets/index.html-J_O0nSt0.js" as="script"><link rel="prefetch" href="/assets/index.html-T8hbl6Vv.js" as="script"><link rel="prefetch" href="/assets/index.html-7NitmzBE.js" as="script"><link rel="prefetch" href="/assets/index.html-BEAsj8xy.js" as="script"><link rel="prefetch" href="/assets/index.html-Cu2C8bvq.js" as="script"><link rel="prefetch" href="/assets/index.html-pULCbhs0.js" as="script"><link rel="prefetch" href="/assets/index.html-BQD7qwf6.js" as="script"><link rel="prefetch" href="/assets/index.html-BebFq9TN.js" as="script"><link rel="prefetch" href="/assets/index.html-8mA-MseU.js" as="script"><link rel="prefetch" href="/assets/index.html-DnPyYKIQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CqBIGDqP.js" as="script"><link rel="prefetch" href="/assets/index.html-Bpf-a7u7.js" as="script"><link rel="prefetch" href="/assets/index.html-D1uCFXcj.js" as="script"><link rel="prefetch" href="/assets/index.html-2w42SJqW.js" as="script"><link rel="prefetch" href="/assets/index.html-xvrhFUib.js" as="script"><link rel="prefetch" href="/assets/index.html-Bk-v7Vr9.js" as="script"><link rel="prefetch" href="/assets/index.html-B1HnA_Il.js" as="script"><link rel="prefetch" href="/assets/index.html-DbfKSQIW.js" as="script"><link rel="prefetch" href="/assets/index.html-CMW9mOFk.js" as="script"><link rel="prefetch" href="/assets/index.html-DIc7SYhs.js" as="script"><link rel="prefetch" href="/assets/index.html-CQCrGz_b.js" as="script"><link rel="prefetch" href="/assets/index.html-BUZBTRT2.js" as="script"><link rel="prefetch" href="/assets/index.html-B3nPA4l4.js" as="script"><link rel="prefetch" href="/assets/index.html-DsCBUe7W.js" as="script"><link rel="prefetch" href="/assets/index.html-ORROM4hV.js" as="script"><link rel="prefetch" href="/assets/index.html-CNXhgJd1.js" as="script"><link rel="prefetch" href="/assets/index.html-DzYYMJlK.js" as="script"><link rel="prefetch" href="/assets/index.html-zuYB5xmC.js" as="script"><link rel="prefetch" href="/assets/index.html-CwLP2kT2.js" as="script"><link rel="prefetch" href="/assets/index.html-fRRCbIgE.js" as="script"><link rel="prefetch" href="/assets/index.html-D9c9ssvL.js" as="script"><link rel="prefetch" href="/assets/index.html-TyrmRBCL.js" as="script"><link rel="prefetch" href="/assets/index.html-BL1h2yUJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BJdg16u0.js" as="script"><link rel="prefetch" href="/assets/index.html-DJjpcC-g.js" as="script"><link rel="prefetch" href="/assets/index.html-Bh9InzAI.js" as="script"><link rel="prefetch" href="/assets/index.html-Dlxx_cdT.js" as="script"><link rel="prefetch" href="/assets/index.html-CFCJLqEC.js" as="script"><link rel="prefetch" href="/assets/index.html-DVT137DI.js" as="script"><link rel="prefetch" href="/assets/index.html-B0XUaLXf.js" as="script"><link rel="prefetch" href="/assets/index.html-Bn7lso_q.js" as="script"><link rel="prefetch" href="/assets/index.html-CsEAZl1Z.js" as="script"><link rel="prefetch" href="/assets/index.html-CTGO-N5g.js" as="script"><link rel="prefetch" href="/assets/index.html-BKs3MOfS.js" as="script"><link rel="prefetch" href="/assets/index.html-vfVwsHam.js" as="script"><link rel="prefetch" href="/assets/index.html--BDdc_Pk.js" as="script"><link rel="prefetch" href="/assets/index.html-D95yTwGd.js" as="script"><link rel="prefetch" href="/assets/index.html-DS1PQPBf.js" as="script"><link rel="prefetch" href="/assets/index.html-DFZ5Qk6P.js" as="script"><link rel="prefetch" href="/assets/index.html-c-N70eJE.js" as="script"><link rel="prefetch" href="/assets/index.html-yaHeg2H2.js" as="script"><link rel="prefetch" href="/assets/index.html-Bn7lso_q.js" as="script"><link rel="prefetch" href="/assets/index.html-D8G7eHur.js" as="script"><link rel="prefetch" href="/assets/index.html-DK1yY6eW.js" as="script"><link rel="prefetch" href="/assets/index.html-CCxw9YDB.js" as="script"><link rel="prefetch" href="/assets/index.html-CaJY1LOy.js" as="script"><link rel="prefetch" href="/assets/index.html-BUhvpxqv.js" as="script"><link rel="prefetch" href="/assets/index.html-D9IxpQHc.js" as="script"><link rel="prefetch" href="/assets/index.html-BRnv0wPL.js" as="script"><link rel="prefetch" href="/assets/index.html-VLtxitRl.js" as="script"><link rel="prefetch" href="/assets/index.html-C5UMZf59.js" as="script"><link rel="prefetch" href="/assets/index.html-CNUMKK6i.js" as="script"><link rel="prefetch" href="/assets/index.html-a3u0qpuw.js" as="script"><link rel="prefetch" href="/assets/index.html-B9dj-5Vg.js" as="script"><link rel="prefetch" href="/assets/index.html-aKM36Zvh.js" as="script"><link rel="prefetch" href="/assets/index.html-WhYIuX3P.js" as="script"><link rel="prefetch" href="/assets/index.html-Ckv1w7uB.js" as="script"><link rel="prefetch" href="/assets/index.html-DN5NrYlu.js" as="script"><link rel="prefetch" href="/assets/index.html-BL3HxvLe.js" as="script"><link rel="prefetch" href="/assets/index.html-YHMNymQF.js" as="script"><link rel="prefetch" href="/assets/index.html-CP5TJ5GA.js" as="script"><link rel="prefetch" href="/assets/index.html-BOa8kTrD.js" as="script"><link rel="prefetch" href="/assets/index.html-DkqFsnHz.js" as="script"><link rel="prefetch" href="/assets/index.html-D7aK9R6H.js" as="script"><link rel="prefetch" href="/assets/index.html-CVeaNp-U.js" as="script"><link rel="prefetch" href="/assets/index.html-BKs3MOfS.js" as="script"><link rel="prefetch" href="/assets/index.html-CYMVmgtZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DXKSbND2.js" as="script"><link rel="prefetch" href="/assets/index.html-DfcaomwK.js" as="script"><link rel="prefetch" href="/assets/index.html-vfVwsHam.js" as="script"><link rel="prefetch" href="/assets/index.html-C4ANqB0S.js" as="script"><link rel="prefetch" href="/assets/index.html-DrMX25gO.js" as="script"><link rel="prefetch" href="/assets/index.html-BXbBfgbz.js" as="script"><link rel="prefetch" href="/assets/index.html-BEonjUdT.js" as="script"><link rel="prefetch" href="/assets/index.html-Cm27E5HW.js" as="script"><link rel="prefetch" href="/assets/index.html-J0zxpOXh.js" as="script"><link rel="prefetch" href="/assets/index.html-BmjrnVkp.js" as="script"><link rel="prefetch" href="/assets/index.html-CwKrsrEA.js" as="script"><link rel="prefetch" href="/assets/index.html-DVdAzjIn.js" as="script"><link rel="prefetch" href="/assets/index.html-BeUTdiA1.js" as="script"><link rel="prefetch" href="/assets/index.html-CxMOM87P.js" as="script"><link rel="prefetch" href="/assets/index.html-Dr6CneRi.js" as="script"><link rel="prefetch" href="/assets/index.html-BG26wdM9.js" as="script"><link rel="prefetch" href="/assets/index.html-lqI2Chho.js" as="script"><link rel="prefetch" href="/assets/index.html-BSVisGrJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DtA-FYB0.js" as="script"><link rel="prefetch" href="/assets/index.html-xQ_VbMs5.js" as="script"><link rel="prefetch" href="/assets/index.html-BbndtGzu.js" as="script"><link rel="prefetch" href="/assets/index.html-tyPeoLr7.js" as="script"><link rel="prefetch" href="/assets/index.html-CgKuNlrr.js" as="script"><link rel="prefetch" href="/assets/index.html-B-2URGAw.js" as="script"><link rel="prefetch" href="/assets/index.html-D6A2BPwy.js" as="script"><link rel="prefetch" href="/assets/index.html-gSzzWr64.js" as="script"><link rel="prefetch" href="/assets/index.html-CkHWdBo7.js" as="script"><link rel="prefetch" href="/assets/index.html-DyKt2PRl.js" as="script"><link rel="prefetch" href="/assets/index.html-CB2wh6Tw.js" as="script"><link rel="prefetch" href="/assets/index.html-BI0e1b4_.js" as="script"><link rel="prefetch" href="/assets/index.html-BP5e6zV-.js" as="script"><link rel="prefetch" href="/assets/index.html-Bd5KP490.js" as="script"><link rel="prefetch" href="/assets/index.html-BEiPG5Lx.js" as="script"><link rel="prefetch" href="/assets/index.html-JSe_pThG.js" as="script"><link rel="prefetch" href="/assets/index.html-WAs0_qhm.js" as="script"><link rel="prefetch" href="/assets/index.html-D7uNixI7.js" as="script"><link rel="prefetch" href="/assets/index.html-h0r1QmXF.js" as="script"><link rel="prefetch" href="/assets/index.html-PUUelweJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DHZaRuEa.js" as="script"><link rel="prefetch" href="/assets/index.html-B9V8F544.js" as="script"><link rel="prefetch" href="/assets/index.html-DNxMe2TQ.js" as="script"><link rel="prefetch" href="/assets/index.html-2UlrJ2US.js" as="script"><link rel="prefetch" href="/assets/index.html-B-2URGAw.js" as="script"><link rel="prefetch" href="/assets/index.html-Y2D-6KKb.js" as="script"><link rel="prefetch" href="/assets/index.html-B48vd-Rx.js" as="script"><link rel="prefetch" href="/assets/index.html-BHQn0yuj.js" as="script"><link rel="prefetch" href="/assets/index.html-CSaVLW_J.js" as="script"><link rel="prefetch" href="/assets/index.html-D47kL6Mn.js" as="script"><link rel="prefetch" href="/assets/index.html-Cd1hAmOu.js" as="script"><link rel="prefetch" href="/assets/index.html-zrM2vdq2.js" as="script"><link rel="prefetch" href="/assets/index.html-CT1gRvun.js" as="script"><link rel="prefetch" href="/assets/index.html-MKyptbBs.js" as="script"><link rel="prefetch" href="/assets/index.html-CRME5tT9.js" as="script"><link rel="prefetch" href="/assets/index.html-DcNHrKxJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DasXVNFJ.js" as="script"><link rel="prefetch" href="/assets/index.html-B49Cs_dG.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr2k4pbP.js" as="script"><link rel="prefetch" href="/assets/index.html-K1o-VAoY.js" as="script"><link rel="prefetch" href="/assets/index.html-C87XA0Qo.js" as="script"><link rel="prefetch" href="/assets/index.html-7Ypd8zKJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DfbtyZTu.js" as="script"><link rel="prefetch" href="/assets/index.html-DynRFR7h.js" as="script"><link rel="prefetch" href="/assets/index.html-CefBVC5x.js" as="script"><link rel="prefetch" href="/assets/index.html-CbdNyf9O.js" as="script"><link rel="prefetch" href="/assets/index.html-DRQEDyj0.js" as="script"><link rel="prefetch" href="/assets/index.html-W2IW4HhW.js" as="script"><link rel="prefetch" href="/assets/index.html-B7Q2sm-a.js" as="script"><link rel="prefetch" href="/assets/index.html-BLSfPYDE.js" as="script"><link rel="prefetch" href="/assets/index.html-CglJHARR.js" as="script"><link rel="prefetch" href="/assets/index.html-CxNexm6N.js" as="script"><link rel="prefetch" href="/assets/index.html-Birr2m7i.js" as="script"><link rel="prefetch" href="/assets/index.html-LTG0vKou.js" as="script"><link rel="prefetch" href="/assets/index.html-DfCz4eSl.js" as="script"><link rel="prefetch" href="/assets/index.html-BJNwO9AB.js" as="script"><link rel="prefetch" href="/assets/index.html-l2T3jv2q.js" as="script"><link rel="prefetch" href="/assets/index.html-BhwJDiTj.js" as="script"><link rel="prefetch" href="/assets/index.html-CUidrk15.js" as="script"><link rel="prefetch" href="/assets/index.html-BO9s2JZo.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr18Yxm3.js" as="script"><link rel="prefetch" href="/assets/index.html-BG2HFNVe.js" as="script"><link rel="prefetch" href="/assets/index.html-BqInYcZ1.js" as="script"><link rel="prefetch" href="/assets/index.html-BfqG-7_f.js" as="script"><link rel="prefetch" href="/assets/index.html-BbvUnwsM.js" as="script"><link rel="prefetch" href="/assets/index.html-oEV2gJ6R.js" as="script"><link rel="prefetch" href="/assets/index.html-CXX7jFq-.js" as="script"><link rel="prefetch" href="/assets/index.html-BOk3IT0g.js" as="script"><link rel="prefetch" href="/assets/index.html-DXOXt2HO.js" as="script"><link rel="prefetch" href="/assets/index.html-i5f6tztV.js" as="script"><link rel="prefetch" href="/assets/index.html-DgR5mHMD.js" as="script"><link rel="prefetch" href="/assets/index.html-DvBy4noJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CvsPvB_U.js" as="script"><link rel="prefetch" href="/assets/index.html-viK5It2_.js" as="script"><link rel="prefetch" href="/assets/index.html-BicLV1RQ.js" as="script"><link rel="prefetch" href="/assets/index.html-F3Lh6GCb.js" as="script"><link rel="prefetch" href="/assets/index.html-i5f6tztV.js" as="script"><link rel="prefetch" href="/assets/index.html-Dg_STv8_.js" as="script"><link rel="prefetch" href="/assets/index.html-DDlPSTkR.js" as="script"><link rel="prefetch" href="/assets/index.html-OI3qGWiS.js" as="script"><link rel="prefetch" href="/assets/index.html-ByMY0wpQ.js" as="script"><link rel="prefetch" href="/assets/index.html-B3uFescg.js" as="script"><link rel="prefetch" href="/assets/index.html-B6o3Xcpc.js" as="script"><link rel="prefetch" href="/assets/index.html-McMQCB56.js" as="script"><link rel="prefetch" href="/assets/index.html-BSsnPe5n.js" as="script"><link rel="prefetch" href="/assets/index.html-P8kbETxH.js" as="script"><link rel="prefetch" href="/assets/index.html-_S_QCTo0.js" as="script"><link rel="prefetch" href="/assets/index.html-BF6fX0k5.js" as="script"><link rel="prefetch" href="/assets/index.html-DsfHkjnG.js" as="script"><link rel="prefetch" href="/assets/index.html-Ca5D6rj3.js" as="script"><link rel="prefetch" href="/assets/index.html-D6A2BPwy.js" as="script"><link rel="prefetch" href="/assets/index.html-gSzzWr64.js" as="script"><link rel="prefetch" href="/assets/index.html-B7FYXnpD.js" as="script"><link rel="prefetch" href="/assets/index.html-DfbtyZTu.js" as="script"><link rel="prefetch" href="/assets/index.html-D8CYb6M4.js" as="script"><link rel="prefetch" href="/assets/index.html-BRHOFiVC.js" as="script"><link rel="prefetch" href="/assets/index.html-B0LJDqZf.js" as="script"><link rel="prefetch" href="/assets/index.html-DzUSWNuc.js" as="script"><link rel="prefetch" href="/assets/index.html-BI0e1b4_.js" as="script"><link rel="prefetch" href="/assets/index.html-BP5e6zV-.js" as="script"><link rel="prefetch" href="/assets/index.html-j1-VvofT.js" as="script"><link rel="prefetch" href="/assets/index.html-DvnaJ-ff.js" as="script"><link rel="prefetch" href="/assets/index.html-DQCWUQw-.js" as="script"><link rel="prefetch" href="/assets/index.html-vykfYhw9.js" as="script"><link rel="prefetch" href="/assets/index.html-GAecuNDL.js" as="script"><link rel="prefetch" href="/assets/index.html-BSCkiuWg.js" as="script"><link rel="prefetch" href="/assets/index.html-BnLmCPLM.js" as="script"><link rel="prefetch" href="/assets/index.html-D0GkVRat.js" as="script"><link rel="prefetch" href="/assets/index.html-3ZGc6ae_.js" as="script"><link rel="prefetch" href="/assets/index.html-DmQsHALj.js" as="script"><link rel="prefetch" href="/assets/index.html-DCocACYW.js" as="script"><link rel="prefetch" href="/assets/index.html-CU0F_QWF.js" as="script"><link rel="prefetch" href="/assets/index.html-DAKEBWXP.js" as="script"><link rel="prefetch" href="/assets/index.html-BzBzUSkO.js" as="script"><link rel="prefetch" href="/assets/index.html-eJwPzd_g.js" as="script"><link rel="prefetch" href="/assets/index.html-C3_76K9J.js" as="script"><link rel="prefetch" href="/assets/index.html-MU2e8wcH.js" as="script"><link rel="prefetch" href="/assets/index.html-DugrX8Z5.js" as="script"><link rel="prefetch" href="/assets/index.html-ylrXuJjL.js" as="script"><link rel="prefetch" href="/assets/index.html-DEPqs68m.js" as="script"><link rel="prefetch" href="/assets/index.html-BEiPG5Lx.js" as="script"><link rel="prefetch" href="/assets/index.html-CHyr6Sle.js" as="script"><link rel="prefetch" href="/assets/index.html-Dss_Rlf-.js" as="script"><link rel="prefetch" href="/assets/index.html-Dg4vDZ-P.js" as="script"><link rel="prefetch" href="/assets/index.html-BeO3rP38.js" as="script"><link rel="prefetch" href="/assets/index.html-CJxuUhdz.js" as="script"><link rel="prefetch" href="/assets/index.html-SMIrXVS3.js" as="script"><link rel="prefetch" href="/assets/index.html-DFhSN8vk.js" as="script"><link rel="prefetch" href="/assets/index.html-DlrdVW8p.js" as="script"><link rel="prefetch" href="/assets/index.html-B-cI4o_3.js" as="script"><link rel="prefetch" href="/assets/index.html-CIjJB_XG.js" as="script"><link rel="prefetch" href="/assets/index.html-BOy6oal-.js" as="script"><link rel="prefetch" href="/assets/index.html-BYnP64Ci.js" as="script"><link rel="prefetch" href="/assets/index.html-C9nQXIGG.js" as="script"><link rel="prefetch" href="/assets/index.html-NnvdfS7J.js" as="script"><link rel="prefetch" href="/assets/index.html-CpN61w84.js" as="script"><link rel="prefetch" href="/assets/index.html-xtA6XOs5.js" as="script"><link rel="prefetch" href="/assets/index.html-D9cvuBfV.js" as="script"><link rel="prefetch" href="/assets/index.html-ozeSVW50.js" as="script"><link rel="prefetch" href="/assets/index.html-D1TuXC6m.js" as="script"><link rel="prefetch" href="/assets/index.html-CJF1JF5d.js" as="script"><link rel="prefetch" href="/assets/index.html-lgpmol53.js" as="script"><link rel="prefetch" href="/assets/index.html-D4s8i8px.js" as="script"><link rel="prefetch" href="/assets/index.html-ilA6KWsP.js" as="script"><link rel="prefetch" href="/assets/index.html-CzO7aDgc.js" as="script"><link rel="prefetch" href="/assets/index.html-CDFLX1RU.js" as="script"><link rel="prefetch" href="/assets/index.html-pcaqw_if.js" as="script"><link rel="prefetch" href="/assets/index.html-BWL0VQbd.js" as="script"><link rel="prefetch" href="/assets/index.html-Bbwr2pln.js" as="script"><link rel="prefetch" href="/assets/index.html-BJRcaVoV.js" as="script"><link rel="prefetch" href="/assets/index.html-Dnx6Muc8.js" as="script"><link rel="prefetch" href="/assets/index.html-BP0qpdi2.js" as="script"><link rel="prefetch" href="/assets/index.html-BPZ3_GRr.js" as="script"><link rel="prefetch" href="/assets/index.html-BPSHlVxI.js" as="script"><link rel="prefetch" href="/assets/index.html-CvFn6U2K.js" as="script"><link rel="prefetch" href="/assets/index.html-BIcrKk6R.js" as="script"><link rel="prefetch" href="/assets/index.html-D0v7P0r8.js" as="script"><link rel="prefetch" href="/assets/index.html-IaFRTq-d.js" as="script"><link rel="prefetch" href="/assets/index.html-Ckz_68y5.js" as="script"><link rel="prefetch" href="/assets/index.html-C6LUOP5M.js" as="script"><link rel="prefetch" href="/assets/index.html-Dmmx7efr.js" as="script"><link rel="prefetch" href="/assets/index.html-D3TKHrDY.js" as="script"><link rel="prefetch" href="/assets/index.html-W7zPEOem.js" as="script"><link rel="prefetch" href="/assets/index.html-BBz6v44e.js" as="script"><link rel="prefetch" href="/assets/index.html-Crq-EauQ.js" as="script"><link rel="prefetch" href="/assets/index.html-BHho1UxC.js" as="script"><link rel="prefetch" href="/assets/index.html-DC_7-RiS.js" as="script"><link rel="prefetch" href="/assets/index.html-BbVSP7Sw.js" as="script"><link rel="prefetch" href="/assets/index.html-DfbtyZTu.js" as="script"><link rel="prefetch" href="/assets/index.html-xOpET4H0.js" as="script"><link rel="prefetch" href="/assets/index.html-De9JHJCE.js" as="script"><link rel="prefetch" href="/assets/index.html-LSi-gXZ8.js" as="script"><link rel="prefetch" href="/assets/index.html-vr3iA5EK.js" as="script"><link rel="prefetch" href="/assets/index.html-BIypxzIB.js" as="script"><link rel="prefetch" href="/assets/index.html-DYj5R7-J.js" as="script"><link rel="prefetch" href="/assets/index.html-BoQ7hdt4.js" as="script"><link rel="prefetch" href="/assets/index.html-LBgUW__H.js" as="script"><link rel="prefetch" href="/assets/index.html-DqF3O7c9.js" as="script"><link rel="prefetch" href="/assets/index.html-Mqnhkiqz.js" as="script"><link rel="prefetch" href="/assets/index.html-BK-xH3lb.js" as="script"><link rel="prefetch" href="/assets/index.html-CF73pnLb.js" as="script"><link rel="prefetch" href="/assets/index.html-BKTq7LhW.js" as="script"><link rel="prefetch" href="/assets/index.html-DX-UHivu.js" as="script"><link rel="prefetch" href="/assets/index.html-CvsPvB_U.js" as="script"><link rel="prefetch" href="/assets/index.html-BsR-fWyy.js" as="script"><link rel="prefetch" href="/assets/index.html-Dp4Kt7Iq.js" as="script"><link rel="prefetch" href="/assets/index.html-DDLFJC2-.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-DuzntU_W.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-kKBlOlEw.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">coder-xuyong</span></a><!--]--></div><div class="vp-navbar-center"><!----></div><div class="vp-navbar-end"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label=" java "><!--[--><img class="icon" src="https://www.java.com/favicon.ico" alt no-view style=""> java <!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/01.Java/01.JavaSE/" aria-label="JavaSE"><!---->JavaSE<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/01.Java/02.JavaSE/" aria-label="JavaEE"><!---->JavaEE<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label=" 数据库 "><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span> 数据库 <!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">关系型数据库</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/pages/a5b63b/" aria-label="mysql"><!--[--><img class="icon" src="https://labs.mysql.com/common/themes/sakila/favicon.ico" alt no-view style=""><!--]-->mysql<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">kv数据库</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/2020/02/10/README.html" aria-label="redis"><!--[--><img class="icon" src="https://www.redis.net.cn/Application/Home/View/Public/img/icon.png" alt no-view style=""><!--]-->redis<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/posts/java/spring/" aria-label="spring"><!--[--><img class="icon" src="https://docs.spring.io/spring-boot/_/img/favicon.ico" alt no-view style=""><!--]-->spring<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="框架"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-book" style=""></span>框架<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">netty</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty01-nio.html" aria-label="/posts/java/netty/Netty01-nio.html"><!---->/posts/java/netty/Netty01-nio.html<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty02-入门.html" aria-label="/posts/java/netty/Netty02-入门.html"><!---->/posts/java/netty/Netty02-入门.html<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty03-进阶.html" aria-label="/posts/java/netty/Netty03-进阶.html"><!---->/posts/java/netty/Netty03-进阶.html<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty04-优化与源码.html" aria-label="/posts/java/netty/Netty04-优化与源码.html"><!---->/posts/java/netty/Netty04-优化与源码.html<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">spring</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/spring/spring.html" aria-label="/posts/java/spring/spring.html"><!---->/posts/java/spring/spring.html<!----></a></li></ul></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/java/spring/" aria-label="spring"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-glasses" style=""></span><!--]-->spring<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="AI相关"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-hexagon-nodes" style=""></span>AI相关<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">AI</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/AI/AI%E5%85%A5%E9%97%A8.html" aria-label="AI 入门"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-ghost" style=""></span><!--]-->AI 入门<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/AI/deepseek%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA.html" aria-label="deepseek 本地搭建"><!--[--><img class="icon" src="https://www.deepseek.com/favicon.ico" alt no-view style=""><!--]-->deepseek 本地搭建<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://theme-hope.vuejs.press/zh/" aria-label="V2 文档" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><!--]-->V2 文档<!----></a></div></nav><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/coder-xuyong/blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->主页<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="介绍页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->介绍页<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><span class="vp-sidebar-title">java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span><span class="vp-sidebar-title">database</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">1.数据库综合</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2.数据库中间件</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">3.关系型数据库</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">5.KV 数据库</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">6.列式数据库</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">6.文档数据库</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">7.搜索引擎数据库</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Elastic 技术栈</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Elasticsearch 教程</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/pages/0cb563/" aria-label="Elasticsearch 面试总结"><!---->Elasticsearch 面试总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/98c3a5/" aria-label="Elasticsearch 快速入门"><!---->Elasticsearch 快速入门<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/0fb506/" aria-label="Elasticsearch 简介"><!---->Elasticsearch 简介<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/293175/" aria-label="Elasticsearch 索引"><!---->Elasticsearch 索引<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/d1bae4/" aria-label="Elasticsearch 映射"><!---->Elasticsearch 映射<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/83bd15/" aria-label="Elasticsearch 查询"><!---->Elasticsearch 查询<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/e1b769/" aria-label="Elasticsearch 高亮搜索及显示"><!---->Elasticsearch 高亮搜索及显示<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/24baff/" aria-label="Elasticsearch 排序"><!---->Elasticsearch 排序<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/f89f66/" aria-label="Elasticsearch 聚合"><!---->Elasticsearch 聚合<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/a5a001/" aria-label="Elasticsearch 分析器"><!---->Elasticsearch 分析器<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/pages/2d95ce/" aria-label="Elasticsearch 性能优化"><!---->Elasticsearch 性能优化<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/4b1907/" aria-label="Elasticsearch Rest API"><!---->Elasticsearch Rest API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/201e43/" aria-label="ElasticSearch Java API 之 High Level REST Client"><!---->ElasticSearch Java API 之 High Level REST Client<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/9a2546/" aria-label="Elasticsearch 集群和分片"><!---->Elasticsearch 集群和分片<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/fdaf15/" aria-label="Elasticsearch 运维"><!---->Elasticsearch 运维<!----></a></li></ul></section></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-linux" style=""></span><span class="vp-sidebar-title">linux</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-network-wired" style=""></span><span class="vp-sidebar-title">network</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-windows" style=""></span><span class="vp-sidebar-title">windows</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-airbnb" style=""></span><span class="vp-sidebar-title">AI</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Elasticsearch 性能优化</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/coder-xuyong" target="_blank" rel="noopener noreferrer">xuyong</a></span><span property="author" content="xuyong"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2022年1月21日</span><meta property="datePublished" content="2022-01-21T19:54:43.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 21 分钟</span><meta property="timeRequired" content="PT21M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color7 clickable" role="navigation">数据库</span><span class="page-category-item color0 clickable" role="navigation">搜索引擎数据库</span><span class="page-category-item color3 clickable" role="navigation">Elasticsearch</span><!--]--><meta property="articleSection" content="数据库,搜索引擎数据库,Elasticsearch"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color7 clickable" role="navigation">数据库</span><span class="page-tag-item color0 clickable" role="navigation">搜索引擎数据库</span><span class="page-tag-item color3 clickable" role="navigation">Elasticsearch</span><span class="page-tag-item color5 clickable" role="navigation">性能</span><!--]--><meta property="keywords" content="数据库,搜索引擎数据库,Elasticsearch,性能"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">此页内容<!----><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#硬件配置优化">硬件配置优化</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#cpu-配置">CPU 配置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#内存配置">内存配置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#磁盘">磁盘</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#索引优化设置">索引优化设置</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#批量提交">批量提交</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#增加-refresh-时间间隔">增加 Refresh 时间间隔</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#修改-index-buffer-size-的设置">修改 index_buffer_size 的设置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#修改-translog-相关的设置">修改 translog 相关的设置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#注意-id-字段的使用">注意 _id 字段的使用</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#注意-all-字段及-source-字段的使用">注意 _all 字段及 _source 字段的使用</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#合理的配置使用-index-属性">合理的配置使用 index 属性</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#减少副本数量">减少副本数量</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#查询方面优化">查询方面优化</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#路由优化">路由优化</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#filter-vs-query">Filter VS Query</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#深度翻页">深度翻页</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#脚本-script-合理使用">脚本（script）合理使用</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#数据结构优化">数据结构优化</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#尽量减少不需要的字段">尽量减少不需要的字段</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#nested-object-vs-parent-child">Nested Object vs Parent/Child</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#选择静态映射-非必需时-禁止动态映射">选择静态映射，非必需时，禁止动态映射</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#集群架构设计">集群架构设计</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#主节点、数据节点和协调节点分离">主节点、数据节点和协调节点分离</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#关闭-data-节点服务器中的-http-功能">关闭 data 节点服务器中的 http 功能</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#一台服务器上最好只部署一个-node">一台服务器上最好只部署一个 node</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#集群分片设置">集群分片设置</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#参考资料">参考资料</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="elasticsearch-性能优化" tabindex="-1"><a class="header-anchor" href="#elasticsearch-性能优化"><span>Elasticsearch 性能优化</span></a></h1><p>Elasticsearch 是当前流行的企业级搜索引擎，设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。作为一个开箱即用的产品，在生产环境上线之后，我们其实不一定能确保其的性能和稳定性。如何根据实际情况提高服务的性能，其实有很多技巧。这章我们分享从实战经验中总结出来的 elasticsearch 性能优化，主要从硬件配置优化、索引优化设置、查询方面优化、数据结构优化、集群架构优化等方面讲解。</p><h2 id="硬件配置优化" tabindex="-1"><a class="header-anchor" href="#硬件配置优化"><span>硬件配置优化</span></a></h2><p>升级硬件设备配置一直都是提高服务能力最快速有效的手段，在系统层面能够影响应用性能的一般包括三个因素：CPU、内存和 IO，可以从这三方面进行 ES 的性能优化工作。</p><h3 id="cpu-配置" tabindex="-1"><a class="header-anchor" href="#cpu-配置"><span>CPU 配置</span></a></h3><p>一般说来，CPU 繁忙的原因有以下几个：</p><ol><li>线程中有无限空循环、无阻塞、正则匹配或者单纯的计算；</li><li>发生了频繁的 GC；</li><li>多线程的上下文切换；</li></ol><p>大多数 Elasticsearch 部署往往对 CPU 要求不高。因此，相对其它资源，具体配置多少个（CPU）不是那么关键。你应该选择具有多个内核的现代处理器，常见的集群使用 2 到 8 个核的机器。<strong>如果你要在更快的 CPUs 和更多的核数之间选择，选择更多的核数更好</strong>。多个内核提供的额外并发远胜过稍微快一点点的时钟频率。</p><h3 id="内存配置" tabindex="-1"><a class="header-anchor" href="#内存配置"><span>内存配置</span></a></h3><p>如果有一种资源是最先被耗尽的，它可能是内存。排序和聚合都很耗内存，所以有足够的堆空间来应付它们是很重要的。即使堆空间是比较小的时候，也能为操作系统文件缓存提供额外的内存。因为 Lucene 使用的许多数据结构是基于磁盘的格式，Elasticsearch 利用操作系统缓存能产生很大效果。</p><p><strong>64 GB 内存的机器是非常理想的</strong>，但是 32 GB 和 16 GB 机器也是很常见的。少于 8 GB 会适得其反（你最终需要很多很多的小机器），大于 64 GB 的机器也会有问题。</p><p>由于 ES 构建基于 lucene，而 lucene 设计强大之处在于 lucene 能够很好的利用操作系统内存来缓存索引数据，以提供快速的查询性能。lucene 的索引文件 segements 是存储在单文件中的，并且不可变，对于 OS 来说，能够很友好地将索引文件保持在 cache 中，以便快速访问；因此，我们很有必要将一半的物理内存留给 lucene；另一半的物理内存留给 ES（JVM heap）。</p><h4 id="内存分配" tabindex="-1"><a class="header-anchor" href="#内存分配"><span>内存分配</span></a></h4><p>当机器内存小于 64G 时，遵循通用的原则，50% 给 ES，50% 留给 lucene。</p><p>当机器内存大于 64G 时，遵循以下原则：</p><ul><li>如果主要的使用场景是全文检索，那么建议给 ES Heap 分配 4~32G 的内存即可；其它内存留给操作系统，供 lucene 使用（segments cache），以提供更快的查询性能。</li><li>如果主要的使用场景是聚合或排序，并且大多数是 numerics，dates，geo_points 以及 not_analyzed 的字符类型，建议分配给 ES Heap 分配 4~32G 的内存即可，其它内存留给操作系统，供 lucene 使用，提供快速的基于文档的聚类、排序性能。</li><li>如果使用场景是聚合或排序，并且都是基于 analyzed 字符数据，这时需要更多的 heap size，建议机器上运行多 ES 实例，每个实例保持不超过 50% 的 ES heap 设置（但不超过 32 G，堆内存设置 32 G 以下时，JVM 使用对象指标压缩技巧节省空间），50% 以上留给 lucene。</li></ul><h4 id="禁止-swap" tabindex="-1"><a class="header-anchor" href="#禁止-swap"><span>禁止 swap</span></a></h4><p>禁止 swap，一旦允许内存与磁盘的交换，会引起致命的性能问题。可以通过在 elasticsearch.yml 中 <code>bootstrap.memory_lock: true</code>，以保持 JVM 锁定内存，保证 ES 的性能。</p><h4 id="gc-设置" tabindex="-1"><a class="header-anchor" href="#gc-设置"><span>GC 设置</span></a></h4><p>保持 GC 的现有设置，默认设置为：Concurrent-Mark and Sweep（CMS），别换成 G1 GC，因为目前 G1 还有很多 BUG。</p><p>保持线程池的现有设置，目前 ES 的线程池较 1.X 有了较多优化设置，保持现状即可；默认线程池大小等于 CPU 核心数。如果一定要改，按公式 ( ( CPU 核心数 * 3 ) / 2 ) + 1 设置；不能超过 CPU 核心数的 2 倍；但是不建议修改默认配置，否则会对 CPU 造成硬伤。</p><h3 id="磁盘" tabindex="-1"><a class="header-anchor" href="#磁盘"><span>磁盘</span></a></h3><p>硬盘对所有的集群都很重要，对大量写入的集群更是加倍重要（例如那些存储日志数据的）。硬盘是服务器上最慢的子系统，这意味着那些写入量很大的集群很容易让硬盘饱和，使得它成为集群的瓶颈。</p><p><strong>在经济压力能承受的范围下，尽量使用固态硬盘（SSD）</strong>。固态硬盘相比于任何旋转介质（机械硬盘，磁带等），无论随机写还是顺序写，都会对 IO 有较大的提升。</p><blockquote><p>如果你正在使用 SSDs，确保你的系统 I/O 调度程序是配置正确的。当你向硬盘写数据，I/O 调度程序决定何时把数据实际发送到硬盘。大多数默认 *nix 发行版下的调度程序都叫做 cfq（完全公平队列）。</p><p>调度程序分配时间片到每个进程。并且优化这些到硬盘的众多队列的传递。但它是为旋转介质优化的：机械硬盘的固有特性意味着它写入数据到基于物理布局的硬盘会更高效。</p><p>这对 SSD 来说是低效的，尽管这里没有涉及到机械硬盘。但是，deadline 或者 noop 应该被使用。deadline 调度程序基于写入等待时间进行优化，noop 只是一个简单的 FIFO 队列。</p><p>这个简单的更改可以带来显著的影响。仅仅是使用正确的调度程序，我们看到了 500 倍的写入能力提升。</p></blockquote><p><strong>如果你使用旋转介质（如机械硬盘），尝试获取尽可能快的硬盘（高性能服务器硬盘，15k RPM 驱动器）</strong>。</p><p><strong>使用 RAID0 是提高硬盘速度的有效途径，对机械硬盘和 SSD 来说都是如此</strong>。没有必要使用镜像或其它 RAID 变体，因为 Elasticsearch 在自身层面通过副本，已经提供了备份的功能，所以不需要利用磁盘的备份功能，同时如果使用磁盘备份功能的话，对写入速度有较大的影响。</p><p><strong>最后，避免使用网络附加存储（NAS）</strong>。人们常声称他们的 NAS 解决方案比本地驱动器更快更可靠。除却这些声称，我们从没看到 NAS 能配得上它的大肆宣传。NAS 常常很慢，显露出更大的延时和更宽的平均延时方差，而且它是单点故障的。</p><h2 id="索引优化设置" tabindex="-1"><a class="header-anchor" href="#索引优化设置"><span>索引优化设置</span></a></h2><p>索引优化主要是在 Elasticsearch 的插入层面优化，Elasticsearch 本身索引速度其实还是蛮快的，具体数据，我们可以参考官方的 benchmark 数据。我们可以根据不同的需求，针对索引优化。</p><h3 id="批量提交" tabindex="-1"><a class="header-anchor" href="#批量提交"><span>批量提交</span></a></h3><p>当有大量数据提交的时候，建议采用批量提交（Bulk 操作）；此外使用 bulk 请求时，每个请求不超过几十 M，因为太大会导致内存使用过大。</p><p>比如在做 ELK 过程中，Logstash indexer 提交数据到 Elasticsearch 中，batch size 就可以作为一个优化功能点。但是优化 size 大小需要根据文档大小和服务器性能而定。</p><p>像 Logstash 中提交文档大小超过 20MB，Logstash 会将一个批量请求切分为多个批量请求。</p><p>如果在提交过程中，遇到 EsRejectedExecutionException 异常的话，则说明集群的索引性能已经达到极限了。这种情况，要么提高服务器集群的资源，要么根据业务规则，减少数据收集速度，比如只收集 Warn、Error 级别以上的日志。</p><h3 id="增加-refresh-时间间隔" tabindex="-1"><a class="header-anchor" href="#增加-refresh-时间间隔"><span>增加 Refresh 时间间隔</span></a></h3><p>为了提高索引性能，Elasticsearch 在写入数据的时候，采用延迟写入的策略，即数据先写到内存中，当超过默认 1 秒（index.refresh_interval）会进行一次写入操作，就是将内存中 segment 数据刷新到磁盘中，此时我们才能将数据搜索出来，所以这就是为什么 Elasticsearch 提供的是近实时搜索功能，而不是实时搜索功能。</p><p>如果我们的系统对数据延迟要求不高的话，我们<strong>可以通过延长 refresh 时间间隔，可以有效地减少 segment 合并压力，提高索引速度</strong>。比如在做全链路跟踪的过程中，我们就将 <code>index.refresh_interval</code> 设置为 30s，减少 refresh 次数。再如，在进行全量索引时，可以将 refresh 次数临时关闭，即 <code>index.refresh_interval</code> 设置为-1，数据导入成功后再打开到正常模式，比如 30s。</p><blockquote><p>在加载大量数据时候可以暂时不用 refresh 和 repliccas，index.refresh_interval 设置为-1，index.number_of_replicas 设置为 0。</p></blockquote><h3 id="修改-index-buffer-size-的设置" tabindex="-1"><a class="header-anchor" href="#修改-index-buffer-size-的设置"><span>修改 index_buffer_size 的设置</span></a></h3><p>索引缓冲的设置可以控制多少内存分配给索引进程。这是一个全局配置，会应用于一个节点上所有不同的分片上。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">indices.memory.index_buffer_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">10%</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">indices.memory.min_index_buffer_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">48mb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>indices.memory.index_buffer_size</code> 接受一个百分比或者一个表示字节大小的值。默认是 10%，意味着分配给节点的总内存的 10%用来做索引缓冲的大小。这个数值被分到不同的分片（shards）上。如果设置的是百分比，还可以设置 <code>min_index_buffer_size</code> （默认 48mb）和 <code>max_index_buffer_size</code>（默认没有上限）。</p><h3 id="修改-translog-相关的设置" tabindex="-1"><a class="header-anchor" href="#修改-translog-相关的设置"><span>修改 translog 相关的设置</span></a></h3><p>一是控制数据从内存到硬盘的操作频率，以减少硬盘 IO。可将 sync_interval 的时间设置大一些。默认为 5s。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">index.translog.sync_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">5s</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>也可以控制 tranlog 数据块的大小，达到 threshold 大小时，才会 flush 到 lucene 索引文件。默认为 512m。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">index.translog.flush_threshold_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">512mb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="注意-id-字段的使用" tabindex="-1"><a class="header-anchor" href="#注意-id-字段的使用"><span>注意 _id 字段的使用</span></a></h3><p>_id 字段的使用，应尽可能避免自定义 _id，以避免针对 ID 的版本管理；建议使用 ES 的默认 ID 生成策略或使用数字类型 ID 做为主键。</p><h3 id="注意-all-字段及-source-字段的使用" tabindex="-1"><a class="header-anchor" href="#注意-all-字段及-source-字段的使用"><span>注意 _all 字段及 _source 字段的使用</span></a></h3><p>**_**all 字段及 _source 字段的使用，应该注意场景和需要，_all 字段包含了所有的索引字段，方便做全文检索，如果无此需求，可以禁用；_source 存储了原始的 document 内容，如果没有获取原始文档数据的需求，可通过设置 includes、excludes 属性来定义放入 _source 的字段。</p><h3 id="合理的配置使用-index-属性" tabindex="-1"><a class="header-anchor" href="#合理的配置使用-index-属性"><span>合理的配置使用 index 属性</span></a></h3><p>合理的配置使用 index 属性，analyzed 和 not_analyzed，根据业务需求来控制字段是否分词或不分词。只有 groupby 需求的字段，配置时就设置成 not_analyzed，以提高查询或聚类的效率。</p><h3 id="减少副本数量" tabindex="-1"><a class="header-anchor" href="#减少副本数量"><span>减少副本数量</span></a></h3><p>Elasticsearch 默认副本数量为 3 个，虽然这样会提高集群的可用性，增加搜索的并发数，但是同时也会影响写入索引的效率。</p><p>在索引过程中，需要把更新的文档发到副本节点上，等副本节点生效后在进行返回结束。使用 Elasticsearch 做业务搜索的时候，建议副本数目还是设置为 3 个，但是像内部 ELK 日志系统、分布式跟踪系统中，完全可以将副本数目设置为 1 个。</p><h2 id="查询方面优化" tabindex="-1"><a class="header-anchor" href="#查询方面优化"><span>查询方面优化</span></a></h2><p>Elasticsearch 作为业务搜索的近实时查询时，查询效率的优化显得尤为重要。</p><h3 id="路由优化" tabindex="-1"><a class="header-anchor" href="#路由优化"><span>路由优化</span></a></h3><p>当我们查询文档的时候，Elasticsearch 如何知道一个文档应该存放到哪个分片中呢？它其实是通过下面这个公式来计算出来的。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>shard = hash(routing) % number_of_primary_shards</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>routing 默认值是文档的 id，也可以采用自定义值，比如用户 ID。</p><h4 id="不带-routing-查询" tabindex="-1"><a class="header-anchor" href="#不带-routing-查询"><span>不带 routing 查询</span></a></h4><p>在查询的时候因为不知道要查询的数据具体在哪个分片上，所以整个过程分为 2 个步骤：</p><ol><li>分发：请求到达协调节点后，协调节点将查询请求分发到每个分片上。</li><li>聚合：协调节点搜集到每个分片上查询结果，再将查询的结果进行排序，之后给用户返回结果。</li></ol><h4 id="带-routing-查询" tabindex="-1"><a class="header-anchor" href="#带-routing-查询"><span>带 routing 查询</span></a></h4><p>查询的时候，可以直接根据 routing 信息定位到某个分配查询，不需要查询所有的分配，经过协调节点排序。</p><p>向上面自定义的用户查询，如果 routing 设置为 userid 的话，就可以直接查询出数据来，效率提升很多。</p><h3 id="filter-vs-query" tabindex="-1"><a class="header-anchor" href="#filter-vs-query"><span>Filter VS Query</span></a></h3><p>尽可能使用过滤器上下文（Filter）替代查询上下文（Query）</p><ul><li>Query：此文档与此查询子句的匹配程度如何？</li><li>Filter：此文档和查询子句匹配吗？</li></ul><p>Elasticsearch 针对 Filter 查询只需要回答“是”或者“否”，不需要像 Query 查询一样计算相关性分数，同时 Filter 结果可以缓存。</p><h3 id="深度翻页" tabindex="-1"><a class="header-anchor" href="#深度翻页"><span>深度翻页</span></a></h3><p>在使用 Elasticsearch 过程中，应尽量避免大翻页的出现。</p><p>正常翻页查询都是从 from 开始 size 条数据，这样就需要在每个分片中查询打分排名在前面的 from+size 条数据。协同节点收集每个分配的前 from+size 条数据。协同节点一共会受到 N*(from+size) 条数据，然后进行排序，再将其中 from 到 from+size 条数据返回出去。如果 from 或者 size 很大的话，导致参加排序的数量会同步扩大很多，最终会导致 CPU 资源消耗增大。</p><p>可以通过使用 Elasticsearch scroll 和 scroll-scan 高效滚动的方式来解决这样的问题。</p><p>也可以结合实际业务特点，文档 id 大小如果和文档创建时间是一致有序的，可以以文档 id 作为分页的偏移量，并将其作为分页查询的一个条件。</p><h3 id="脚本-script-合理使用" tabindex="-1"><a class="header-anchor" href="#脚本-script-合理使用"><span>脚本（script）合理使用</span></a></h3><p>我们知道脚本使用主要有 3 种形式，内联动态编译方式、_script 索引库中存储和文件脚本存储的形式；一般脚本的使用场景是粗排，尽量用第二种方式先将脚本存储在 _script 索引库中，起到提前编译，然后通过引用脚本 id，并结合 params 参数使用，即可以达到模型（逻辑）和数据进行了分离，同时又便于脚本模块的扩展与维护。具体 ES 脚本的深入内容请参考 <a href="https://www.knowledgedict.com/tutorial/elasticsearch-script.html" target="_blank" rel="noopener noreferrer">Elasticsearch 脚本模块的详解</a>。</p><h2 id="数据结构优化" tabindex="-1"><a class="header-anchor" href="#数据结构优化"><span>数据结构优化</span></a></h2><p>基于 Elasticsearch 的使用场景，文档数据结构尽量和使用场景进行结合，去掉没用及不合理的数据。</p><h3 id="尽量减少不需要的字段" tabindex="-1"><a class="header-anchor" href="#尽量减少不需要的字段"><span>尽量减少不需要的字段</span></a></h3><p>如果 Elasticsearch 用于业务搜索服务，一些不需要用于搜索的字段最好不存到 ES 中，这样即节省空间，同时在相同的数据量下，也能提高搜索性能。</p><p>避免使用动态值作字段，动态递增的 mapping，会导致集群崩溃；同样，也需要控制字段的数量，业务中不使用的字段，就不要索引。控制索引的字段数量、mapping 深度、索引字段的类型，对于 ES 的性能优化是重中之重。</p><p>以下是 ES 关于字段数、mapping 深度的一些默认设置：</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">index.mapping.nested_objects.limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10000</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">index.mapping.total_fields.limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">index.mapping.depth.limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nested-object-vs-parent-child" tabindex="-1"><a class="header-anchor" href="#nested-object-vs-parent-child"><span>Nested Object vs Parent/Child</span></a></h3><p>尽量避免使用 nested 或 parent/child 的字段，能不用就不用；nested query 慢，parent/child query 更慢，比 nested query 慢上百倍；因此能在 mapping 设计阶段搞定的（大宽表设计或采用比较 smart 的数据结构），就不要用父子关系的 mapping。</p><p>如果一定要使用 nested fields，保证 nested fields 字段不能过多，目前 ES 默认限制是 50。因为针对 1 个 document，每一个 nested field，都会生成一个独立的 document，这将使 doc 数量剧增，影响查询效率，尤其是 JOIN 的效率。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">index.mapping.nested_fields.limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">对比</th><th style="text-align:left;">Nested Object</th><th style="text-align:left;">Parent/Child</th></tr></thead><tbody><tr><td style="text-align:left;">优点</td><td style="text-align:left;">文档存储在一起，因此读取性高</td><td style="text-align:left;">父子文档可以独立更新，互不影响</td></tr><tr><td style="text-align:left;">缺点</td><td style="text-align:left;">更新父文档或子文档时需要更新整个文档</td><td style="text-align:left;">为了维护 join 关系，需要占用部分内存，读取性能较差</td></tr><tr><td style="text-align:left;">场景</td><td style="text-align:left;">子文档偶尔更新，查询频繁</td><td style="text-align:left;">子文档更新频繁</td></tr></tbody></table><h3 id="选择静态映射-非必需时-禁止动态映射" tabindex="-1"><a class="header-anchor" href="#选择静态映射-非必需时-禁止动态映射"><span>选择静态映射，非必需时，禁止动态映射</span></a></h3><p>尽量避免使用动态映射，这样有可能会导致集群崩溃，此外，动态映射有可能会带来不可控制的数据类型，进而有可能导致在查询端出现相关异常，影响业务。</p><p>此外，Elasticsearch 作为搜索引擎时，主要承载 query 的匹配和排序的功能，那数据的存储类型基于这两种功能的用途分为两类，一是需要匹配的字段，用来建立倒排索引对 query 匹配用，另一类字段是用做粗排用到的特征字段，如 ctr、点击数、评论数等等。</p><h2 id="集群架构设计" tabindex="-1"><a class="header-anchor" href="#集群架构设计"><span>集群架构设计</span></a></h2><p>合理的部署 Elasticsearch 有助于提高服务的整体可用性。</p><h3 id="主节点、数据节点和协调节点分离" tabindex="-1"><a class="header-anchor" href="#主节点、数据节点和协调节点分离"><span>主节点、数据节点和协调节点分离</span></a></h3><p>Elasticsearch 集群在架构拓朴时，采用主节点、数据节点和负载均衡节点分离的架构，在 5.x 版本以后，又可将数据节点再细分为“Hot-Warm”的架构模式。</p><p>Elasticsearch 的配置文件中有 2 个参数，node.master 和 node.data。这两个参数搭配使用时，能够帮助提供服务器性能。</p><h4 id="主-master-节点" tabindex="-1"><a class="header-anchor" href="#主-master-节点"><span>主（master）节点</span></a></h4><p>配置 <code>node.master:true</code> 和 <code>node.data:false</code>，该 node 服务器只作为一个主节点，但不存储任何索引数据。我们推荐每个集群运行 3 个专用的 master 节点来提供最好的弹性。使用时，你还需要将 <code>discovery.zen.minimum_master_nodes setting</code> 参数设置为 2，以免出现脑裂（split-brain）的情况。用 3 个专用的 master 节点，专门负责处理集群的管理以及加强状态的整体稳定性。因为这 3 个 master 节点不包含数据也不会实际参与搜索以及索引操作，在 JVM 上它们不用做相同的事，例如繁重的索引或者耗时，资源耗费很大的搜索。因此不太可能会因为垃圾回收而导致停顿。因此，master 节点的 CPU，内存以及磁盘配置可以比 data 节点少很多的。</p><h4 id="数据-data-节点" tabindex="-1"><a class="header-anchor" href="#数据-data-节点"><span>数据（data）节点</span></a></h4><p>配置 <code>node.master:false</code> 和 <code>node.data:true</code>，该 node 服务器只作为一个数据节点，只用于存储索引数据，使该 node 服务器功能单一，只用于数据存储和数据查询，降低其资源消耗率。</p><p>在 Elasticsearch 5.x 版本之后，data 节点又可再细分为“Hot-Warm”架构，即分为热节点（hot node）和暖节点（warm node）。</p><p>hot 节点：</p><p>hot 节点主要是索引节点（写节点），同时会保存近期的一些频繁被查询的索引。由于进行索引非常耗费 CPU 和 IO，即属于 IO 和 CPU 密集型操作，建议使用 SSD 的磁盘类型，保持良好的写性能；我们推荐部署最小化的 3 个 hot 节点来保证高可用性。根据近期需要收集以及查询的数据量，可以增加服务器数量来获得想要的性能。</p><p>将节点设置为 hot 类型需要 elasticsearch.yml 如下配置：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>node.attr.box_type: hot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果是针对指定的 index 操作，可以通过 settings 设置 <code>index.routing.allocation.require.box_type: hot</code> 将索引写入 hot 节点。</p><p>warm 节点：</p><p>这种类型的节点是为了处理大量的，而且不经常访问的只读索引而设计的。由于这些索引是只读的，warm 节点倾向于挂载大量磁盘（普通磁盘）来替代 SSD。内存、CPU 的配置跟 hot 节点保持一致即可；节点数量一般也是大于等于 3 个。</p><p>将节点设置为 warm 类型需要 elasticsearch.yml 如下配置：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>node.attr.box_type: warm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>同时，也可以在 elasticsearch.yml 中设置 <code>index.codec:best_compression</code> 保证 warm 节点的压缩配置。</p><p>当索引不再被频繁查询时，可通过 <code>index.routing.allocation.require.box_type:warm</code>，将索引标记为 warm，从而保证索引不写入 hot 节点，以便将 SSD 磁盘资源用在刀刃上。一旦设置这个属性，ES 会自动将索引合并到 warm 节点。</p><h4 id="协调-coordinating-节点" tabindex="-1"><a class="header-anchor" href="#协调-coordinating-节点"><span>协调（coordinating）节点</span></a></h4><p>协调节点用于做分布式里的协调，将各分片或节点返回的数据整合后返回。该节点不会被选作主节点，也不会存储任何索引数据。该服务器主要用于查询负载均衡。在查询的时候，通常会涉及到从多个 node 服务器上查询数据，并将请求分发到多个指定的 node 服务器，并对各个 node 服务器返回的结果进行一个汇总处理，最终返回给客户端。在 ES 集群中，所有的节点都有可能是协调节点，但是，可以通过设置 <code>node.master</code>、<code>node.data</code>、<code>node.ingest</code> 都为 <code>false</code> 来设置专门的协调节点。需要较好的 CPU 和较高的内存。</p><ul><li>node.master:false 和 node.data:true，该 node 服务器只作为一个数据节点，只用于存储索引数据，使该 node 服务器功能单一，只用于数据存储和数据查询，降低其资源消耗率。</li><li>node.master:true 和 node.data:false，该 node 服务器只作为一个主节点，但不存储任何索引数据，该 node 服务器将使用自身空闲的资源，来协调各种创建索引请求或者查询请求，并将这些请求合理分发到相关的 node 服务器上。</li><li>node.master:false 和 node.data:false，该 node 服务器即不会被选作主节点，也不会存储任何索引数据。该服务器主要用于查询负载均衡。在查询的时候，通常会涉及到从多个 node 服务器上查询数据，并将请求分发到多个指定的 node 服务器，并对各个 node 服务器返回的结果进行一个汇总处理，最终返回给客户端。</li></ul><h3 id="关闭-data-节点服务器中的-http-功能" tabindex="-1"><a class="header-anchor" href="#关闭-data-节点服务器中的-http-功能"><span>关闭 data 节点服务器中的 http 功能</span></a></h3><p>针对 Elasticsearch 集群中的所有数据节点，不用开启 http 服务。将其中的配置参数这样设置，<code>http.enabled:false</code>，同时也不要安装 head, bigdesk, marvel 等监控插件，这样保证 data 节点服务器只需处理创建/更新/删除/查询索引数据等操作。</p><p>http 功能可以在非数据节点服务器上开启，上述相关的监控插件也安装到这些服务器上，用于监控 Elasticsearch 集群状态等数据信息。这样做一来出于数据安全考虑，二来出于服务性能考虑。</p><h3 id="一台服务器上最好只部署一个-node" tabindex="-1"><a class="header-anchor" href="#一台服务器上最好只部署一个-node"><span>一台服务器上最好只部署一个 node</span></a></h3><p>一台物理服务器上可以启动多个 node 服务器节点（通过设置不同的启动 port），但一台服务器上的 CPU、内存、硬盘等资源毕竟有限，从服务器性能考虑，不建议一台服务器上启动多个 node 节点。</p><h3 id="集群分片设置" tabindex="-1"><a class="header-anchor" href="#集群分片设置"><span>集群分片设置</span></a></h3><p>ES 一旦创建好索引后，就无法调整分片的设置，而在 ES 中，一个分片实际上对应一个 lucene 索引，而 lucene 索引的读写会占用很多的系统资源，因此，分片数不能设置过大；所以，在创建索引时，合理配置分片数是非常重要的。一般来说，我们遵循一些原则：</p><ol><li>控制每个分片占用的硬盘容量不超过 ES 的最大 JVM 的堆空间设置（一般设置不超过 32 G，参考上面的 JVM 内存设置原则），因此，如果索引的总容量在 500 G 左右，那分片大小在 16 个左右即可；当然，最好同时考虑原则 2。</li><li>考虑一下 node 数量，一般一个节点有时候就是一台物理机，如果分片数过多，大大超过了节点数，很可能会导致一个节点上存在多个分片，一旦该节点故障，即使保持了 1 个以上的副本，同样有可能会导致数据丢失，集群无法恢复。所以，<strong>一般都设置分片数不超过节点数的 3 倍</strong>。</li></ol><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://www.knowledgedict.com/tutorial/elasticsearch-intro.html" target="_blank" rel="noopener noreferrer">Elasticsearch 教程</a></li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/coder-xuyong/blog/edit/main/src/posts/02.database/07.搜索引擎数据库/01.Elasticsearch/10.Elasticsearch性能优化.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/2/18 02:31:38</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1299461580@qq.com">XuYong</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/pages/a5a001/" aria-label="Elasticsearch 分析器"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Elasticsearch 分析器</div></a><a class="route-link auto-link next" href="/pages/4b1907/" aria-label="Elasticsearch Rest API"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Elasticsearch Rest API<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">coder-xuyong 的小破站</div><div class="vp-copyright">Copyright © 2025 xuyong </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BE_lNU3T.js" defer></script>
  </body>
</html>
