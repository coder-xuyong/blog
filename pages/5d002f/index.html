<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.66" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://coder-xuyong.github.io/blog/pages/5d002f/"><meta property="og:site_name" content="coder-xuyong"><meta property="og:title" content="Spring Web åº”ç”¨"><meta property="og:description" content="Spring Web åº”ç”¨ Spring MVC æä¾›äº†ä¸€ç§åŸºäºæ³¨è§£çš„ç¼–ç¨‹æ¨¡å‹ï¼Œ@Controller å’Œ @RestController ç»„ä»¶ä½¿ç”¨æ³¨è§£æ¥è¡¨è¾¾è¯·æ±‚æ˜ å°„ã€è¯·æ±‚è¾“å…¥ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚æ³¨è§£æ§åˆ¶å™¨å…·æœ‰çµæ´»çš„æ–¹æ³•ç­¾åï¼Œå¹¶ä¸”ä¸å¿…æ‰©å±•åŸºç±»æˆ–å®ç°ç‰¹å®šæ¥å£ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªç”±æ³¨è§£å®šä¹‰çš„æ§åˆ¶å™¨ï¼š åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª Model å¹¶ä»¥ String..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-12-30T15:51:18.000Z"><meta property="article:tag" content="Java"><meta property="article:tag" content="æ¡†æ¶"><meta property="article:tag" content="Spring"><meta property="article:tag" content="Web"><meta property="article:tag" content="Controller"><meta property="article:published_time" content="2023-02-14T19:21:22.000Z"><meta property="article:modified_time" content="2024-12-30T15:51:18.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Spring Web åº”ç”¨","image":[""],"datePublished":"2023-02-14T19:21:22.000Z","dateModified":"2024-12-30T15:51:18.000Z","author":[{"@type":"Person","name":"xuyong","url":"https://github.com/coder-xuyong"}]}</script><script>
      // console.log(666)
      </script><title>Spring Web åº”ç”¨ | coder-xuyong</title><meta name="description" content="Spring Web åº”ç”¨ Spring MVC æä¾›äº†ä¸€ç§åŸºäºæ³¨è§£çš„ç¼–ç¨‹æ¨¡å‹ï¼Œ@Controller å’Œ @RestController ç»„ä»¶ä½¿ç”¨æ³¨è§£æ¥è¡¨è¾¾è¯·æ±‚æ˜ å°„ã€è¯·æ±‚è¾“å…¥ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚æ³¨è§£æ§åˆ¶å™¨å…·æœ‰çµæ´»çš„æ–¹æ³•ç­¾åï¼Œå¹¶ä¸”ä¸å¿…æ‰©å±•åŸºç±»æˆ–å®ç°ç‰¹å®šæ¥å£ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªç”±æ³¨è§£å®šä¹‰çš„æ§åˆ¶å™¨ï¼š åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª Model å¹¶ä»¥ String...">
    <link rel="preload" href="/assets/style-CPuF4MPT.css" as="style"><link rel="stylesheet" href="/assets/style-CPuF4MPT.css">
    <link rel="modulepreload" href="/assets/app-jTfCtTcD.js"><link rel="modulepreload" href="/assets/index.html-CVedh8kq.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CVJ49-0V.js" as="script"><link rel="prefetch" href="/assets/intro.html-C6z-tuMO.js" as="script"><link rel="prefetch" href="/assets/index.html-Br8vyKtc.js" as="script"><link rel="prefetch" href="/assets/disable.html-CnJ2Zpsk.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-M5pvDAhv.js" as="script"><link rel="prefetch" href="/assets/layout.html-Dm0nNDGH.js" as="script"><link rel="prefetch" href="/assets/markdown.html-N9MuIxUq.js" as="script"><link rel="prefetch" href="/assets/page.html-rkNRkiak.js" as="script"><link rel="prefetch" href="/assets/AIå…¥é—¨.html-2S7FECW-.js" as="script"><link rel="prefetch" href="/assets/deepseekæœ¬åœ°æ­å»º.html-CCQElKRg.js" as="script"><link rel="prefetch" href="/assets/idea.html-C5UimxNl.js" as="script"><link rel="prefetch" href="/assets/linux.html-BU_31QaP.js" as="script"><link rel="prefetch" href="/assets/linuxWork.html-DYNSI3Vi.js" as="script"><link rel="prefetch" href="/assets/DDL.html-CqSDtdpU.js" as="script"><link rel="prefetch" href="/assets/DML_DQL.html-BbdkcZK8.js" as="script"><link rel="prefetch" href="/assets/mysqlBug.html-D1NGqkL3.js" as="script"><link rel="prefetch" href="/assets/mysqldump.html-CmLI0mpw.js" as="script"><link rel="prefetch" href="/assets/mysqlå­˜å‚¨è¿‡ç¨‹.html-CER3nXNA.js" as="script"><link rel="prefetch" href="/assets/mysqlå®‰è£….html-Tgroyg75.js" as="script"><link rel="prefetch" href="/assets/mysqlå¸¸è§é”™è¯¯.html-BpbOdlNj.js" as="script"><link rel="prefetch" href="/assets/mysqlæ•°æ®æ ¼å¼.html-BpRhJNtS.js" as="script"><link rel="prefetch" href="/assets/mysqlçº¦æŸ.html-DEBzILLQ.js" as="script"><link rel="prefetch" href="/assets/mysqlè‡ªå®šä¹‰å‡½æ•°.html-PuLxFTnZ.js" as="script"><link rel="prefetch" href="/assets/mysqlè§¦å‘å™¨.html-B_JDg1f6.js" as="script"><link rel="prefetch" href="/assets/ftp.html-Bey8kp1G.js" as="script"><link rel="prefetch" href="/assets/internet.html-Dkq-aU0J.js" as="script"><link rel="prefetch" href="/assets/redis å­¦ä¹ ç¬”è®°ä¹‹å®æˆ˜ç¯‡.html-GQM8kC7a.js" as="script"><link rel="prefetch" href="/assets/redis å­¦ä¹ ç¬”è®°ä¹‹å¿«é€Ÿå…¥é—¨.html-BDBb6uS9.js" as="script"><link rel="prefetch" href="/assets/redisBUG.html-BQ8CNe6E.js" as="script"><link rel="prefetch" href="/assets/shell.html-vZ3qZ0wE.js" as="script"><link rel="prefetch" href="/assets/shellWork.html-C8wtzeJ_.js" as="script"><link rel="prefetch" href="/assets/blogTutorial.html-Bf-r03Av.js" as="script"><link rel="prefetch" href="/assets/cloudflareåŸºæœ¬ä½¿ç”¨.html-Bj5HwYw1.js" as="script"><link rel="prefetch" href="/assets/markdownTutorial.html-BI2vW34b.js" as="script"><link rel="prefetch" href="/assets/é¡µé¢é…ç½®ä½¿ç”¨è¯´æ˜.html-DSleKjNy.js" as="script"><link rel="prefetch" href="/assets/workcondition.html-DC7y0BwC.js" as="script"><link rel="prefetch" href="/assets/index.html-BzNA2-U9.js" as="script"><link rel="prefetch" href="/assets/index.html-D6YnUs8x.js" as="script"><link rel="prefetch" href="/assets/bug.html-DX0Z4P7t.js" as="script"><link rel="prefetch" href="/assets/docx4j.html-BnJ7O6Au.js" as="script"><link rel="prefetch" href="/assets/log.html-DDEO9jxb.js" as="script"><link rel="prefetch" href="/assets/maven.html-BhdZwtPH.js" as="script"><link rel="prefetch" href="/assets/modbus.html-C0S-J6to.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-CLgaJ26e.js" as="script"><link rel="prefetch" href="/assets/netty.html-4UOK2Jvn.js" as="script"><link rel="prefetch" href="/assets/Netty01-nio.html-CkbSNFSi.js" as="script"><link rel="prefetch" href="/assets/Netty02-å…¥é—¨.html-BXEsXxU7.js" as="script"><link rel="prefetch" href="/assets/Netty03-è¿›é˜¶.html-D-Q2uELz.js" as="script"><link rel="prefetch" href="/assets/Netty04-ä¼˜åŒ–ä¸æºç .html-Dli1w9Nu.js" as="script"><link rel="prefetch" href="/assets/spring.html-Brx3CEqj.js" as="script"><link rel="prefetch" href="/assets/springé¢è¯•é¢˜.html-D_LVGEZc.js" as="script"><link rel="prefetch" href="/assets/workcondition.html-DIxlgJ5c.js" as="script"><link rel="prefetch" href="/assets/djangoWork.html-BswGmAQK.js" as="script"><link rel="prefetch" href="/assets/01-JavaåŸºç¡€è¯­æ³•.html-BSjDcTrm.js" as="script"><link rel="prefetch" href="/assets/02-JavaåŸºç¡€è¯­æ³•.html-Dw9G3PaD.js" as="script"><link rel="prefetch" href="/assets/03ç¬”è®°.html-ZwVvOTyu.js" as="script"><link rel="prefetch" href="/assets/day04-æµç¨‹æ§åˆ¶è¯­å¥.html-D0azvysE.js" as="script"><link rel="prefetch" href="/assets/å¾ªç¯é«˜çº§.html-HLmWG63Y.js" as="script"><link rel="prefetch" href="/assets/æ•°ç»„.html-Na-eIDjQ.js" as="script"><link rel="prefetch" href="/assets/æ–¹æ³•.html-DN9eRtjV.js" as="script"><link rel="prefetch" href="/assets/ç»¼åˆç»ƒä¹ .html-CXWL1tnO.js" as="script"><link rel="prefetch" href="/assets/å¸¸ç”¨API.html-CJfheYjo.js" as="script"><link rel="prefetch" href="/assets/é¢å‘å¯¹è±¡.html-BG59MbVL.js" as="script"><link rel="prefetch" href="/assets/æ‰©å±•ï¼šé”®ç›˜å½•å…¥ç¬”è®°.html-DDUjHIRE.js" as="script"><link rel="prefetch" href="/assets/é¢å‘å¯¹è±¡ç»¼åˆè®­ç»ƒç»¼åˆç»ƒä¹ .html-Dqtk-g1X.js" as="script"><link rel="prefetch" href="/assets/ArrayList_å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ.html-D7vqnPJ7.js" as="script"><link rel="prefetch" href="/assets/day13é¢å‘å¯¹è±¡è¿›é˜¶.html-DbKvrkLc.js" as="script"><link rel="prefetch" href="/assets/å¤šæ€.html-lSetkKeP.js" as="script"><link rel="prefetch" href="/assets/day15ç¬”è®°.html-BbWqvT_Y.js" as="script"><link rel="prefetch" href="/assets/day16-é¢å‘å¯¹è±¡ç»¼åˆç»ƒä¹ ï¼ˆä¸Šï¼‰.html-BjGxW7xX.js" as="script"><link rel="prefetch" href="/assets/day17-é¢å‘å¯¹è±¡ç»¼åˆç»ƒä¹ ï¼ˆä¸‹ï¼‰.html-CeCaAzjW.js" as="script"><link rel="prefetch" href="/assets/API.html-DE5NnoRf.js" as="script"><link rel="prefetch" href="/assets/æ­£åˆ™è¡¨è¾¾å¼.html-B28acat2.js" as="script"><link rel="prefetch" href="/assets/API.html-DqOKOkok.js" as="script"><link rel="prefetch" href="/assets/ç®—æ³•.html-DhbX3MVi.js" as="script"><link rel="prefetch" href="/assets/é›†åˆ01.html-yiweUGoo.js" as="script"><link rel="prefetch" href="/assets/é›†åˆ02.html-C4CVwli0.js" as="script"><link rel="prefetch" href="/assets/é›†åˆ03.html-CL3QWo02.js" as="script"><link rel="prefetch" href="/assets/å¯å˜å‚æ•°_ç»¼åˆç»ƒä¹ .html-DeVnVdvz.js" as="script"><link rel="prefetch" href="/assets/streamæµå’Œæ–¹æ³•å¼•ç”¨.html-BalPDRus.js" as="script"><link rel="prefetch" href="/assets/IO(å¼‚å¸¸_File_ç»¼åˆæ¡ˆä¾‹ï¼‰.html-CY-btrXp.js" as="script"><link rel="prefetch" href="/assets/IOæµï¼ˆå­—èŠ‚æµ_å­—ç¬¦æµï¼‰.html-nRJEkoev.js" as="script"><link rel="prefetch" href="/assets/IOæµï¼ˆå…¶ä»–æµï¼‰.html-DytjAivu.js" as="script"><link rel="prefetch" href="/assets/å¤šçº¿ç¨‹01.html-1tcGYf-j.js" as="script"><link rel="prefetch" href="/assets/å¤šçº¿ç¨‹02.html-B60vgk5j.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œç¼–ç¨‹.html-COtTwxJp.js" as="script"><link rel="prefetch" href="/assets/åå°„_åŠ¨æ€ä»£ç†.html-BD86FkWB.js" as="script"><link rel="prefetch" href="/assets/1.object-oriented-programming.html-C02LAAvk.js" as="script"><link rel="prefetch" href="/assets/2.three-features.html-CtCLVyHx.js" as="script"><link rel="prefetch" href="/assets/3.java-basic.html-B6Jkw3Iu.js" as="script"><link rel="prefetch" href="/assets/4.collection.html-KprGCOvs.js" as="script"><link rel="prefetch" href="/assets/comparator.html-COiJSjXg.js" as="script"><link rel="prefetch" href="/assets/ioStream.html-mSv0Qb4G.js" as="script"><link rel="prefetch" href="/assets/java8Stream.html-C6gmVm18.js" as="script"><link rel="prefetch" href="/assets/jottings.html-C1EAK3lI.js" as="script"><link rel="prefetch" href="/assets/multithreading.html-DkW0rB-c.js" as="script"><link rel="prefetch" href="/assets/regularExpression.html-B-RleC4Z.js" as="script"><link rel="prefetch" href="/assets/HTTP_Tomcat_Servlet.html-CiT0ETzR.js" as="script"><link rel="prefetch" href="/assets/Request_Response.html-jMzZ9l9O.js" as="script"><link rel="prefetch" href="/assets/jdbc.html-DGhS4qRv.js" as="script"><link rel="prefetch" href="/assets/index.html-DJPaTAZQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Dbxkkfzi.js" as="script"><link rel="prefetch" href="/assets/index.html-BEbUcEOC.js" as="script"><link rel="prefetch" href="/assets/index.html-Bokg5YaM.js" as="script"><link rel="prefetch" href="/assets/index.html-CLC2iRCX.js" as="script"><link rel="prefetch" href="/assets/index.html-DTfw3x5p.js" as="script"><link rel="prefetch" href="/assets/index.html-BuPRLM4C.js" as="script"><link rel="prefetch" href="/assets/index.html-D5lRkzjU.js" as="script"><link rel="prefetch" href="/assets/index.html-BbL19hkW.js" as="script"><link rel="prefetch" href="/assets/index.html-BosvmUUL.js" as="script"><link rel="prefetch" href="/assets/index.html-zoHp3noL.js" as="script"><link rel="prefetch" href="/assets/index.html-D0LMElAO.js" as="script"><link rel="prefetch" href="/assets/index.html-OdK-uUIt.js" as="script"><link rel="prefetch" href="/assets/index.html-B-gJNCPb.js" as="script"><link rel="prefetch" href="/assets/index.html-BMdlI1lk.js" as="script"><link rel="prefetch" href="/assets/index.html-BLRlQwqH.js" as="script"><link rel="prefetch" href="/assets/index.html-apyKdq9I.js" as="script"><link rel="prefetch" href="/assets/index.html-gcv1grjR.js" as="script"><link rel="prefetch" href="/assets/index.html-CT-nduek.js" as="script"><link rel="prefetch" href="/assets/index.html-BD5Sl7Dv.js" as="script"><link rel="prefetch" href="/assets/index.html-C3kSPmm9.js" as="script"><link rel="prefetch" href="/assets/index.html-C2-RyASA.js" as="script"><link rel="prefetch" href="/assets/index.html-CNhgsSFj.js" as="script"><link rel="prefetch" href="/assets/index.html-Bd2fLyCT.js" as="script"><link rel="prefetch" href="/assets/index.html-D5GqN6yk.js" as="script"><link rel="prefetch" href="/assets/index.html-D_9zKm3w.js" as="script"><link rel="prefetch" href="/assets/index.html-CrshGFyj.js" as="script"><link rel="prefetch" href="/assets/index.html-Cm_99dpV.js" as="script"><link rel="prefetch" href="/assets/index.html-BuZ1VEkV.js" as="script"><link rel="prefetch" href="/assets/index.html-NqGGZ52Z.js" as="script"><link rel="prefetch" href="/assets/index.html-DVUSRVNp.js" as="script"><link rel="prefetch" href="/assets/index.html-BKBHybe_.js" as="script"><link rel="prefetch" href="/assets/index.html-DGEbiYrG.js" as="script"><link rel="prefetch" href="/assets/index.html-CfuOvTdM.js" as="script"><link rel="prefetch" href="/assets/index.html-BRi59EhD.js" as="script"><link rel="prefetch" href="/assets/index.html-WVM4RcGE.js" as="script"><link rel="prefetch" href="/assets/index.html-qkHdKdgu.js" as="script"><link rel="prefetch" href="/assets/index.html-Gp4JcdZC.js" as="script"><link rel="prefetch" href="/assets/index.html-G6DcRkc3.js" as="script"><link rel="prefetch" href="/assets/index.html-DjJpbdsO.js" as="script"><link rel="prefetch" href="/assets/index.html-CDXRWX8c.js" as="script"><link rel="prefetch" href="/assets/index.html-CZ61wLH-.js" as="script"><link rel="prefetch" href="/assets/index.html-B4NGhE4s.js" as="script"><link rel="prefetch" href="/assets/index.html-DsnfIpal.js" as="script"><link rel="prefetch" href="/assets/index.html-DmPTRqhd.js" as="script"><link rel="prefetch" href="/assets/index.html-CJKeNNV7.js" as="script"><link rel="prefetch" href="/assets/index.html-Nc_-dBRH.js" as="script"><link rel="prefetch" href="/assets/index.html-BkbO9SdF.js" as="script"><link rel="prefetch" href="/assets/index.html-RR9W_X_K.js" as="script"><link rel="prefetch" href="/assets/index.html-DrqSow9p.js" as="script"><link rel="prefetch" href="/assets/index.html-C6frx85U.js" as="script"><link rel="prefetch" href="/assets/index.html-PZSesfrk.js" as="script"><link rel="prefetch" href="/assets/index.html-De0bVA7L.js" as="script"><link rel="prefetch" href="/assets/index.html-0fJaVAGd.js" as="script"><link rel="prefetch" href="/assets/index.html-UQwByRLq.js" as="script"><link rel="prefetch" href="/assets/index.html-Bt-mPhK-.js" as="script"><link rel="prefetch" href="/assets/index.html-C3pDz7ks.js" as="script"><link rel="prefetch" href="/assets/index.html-DUrMi9BA.js" as="script"><link rel="prefetch" href="/assets/index.html-grQu9Q20.js" as="script"><link rel="prefetch" href="/assets/logæ—¥å¿—.html-D-gSLZuT.js" as="script"><link rel="prefetch" href="/assets/ç±»åŠ è½½å™¨.html-BqV6LsIB.js" as="script"><link rel="prefetch" href="/assets/xml.html-BdriaXnh.js" as="script"><link rel="prefetch" href="/assets/å•å…ƒæµ‹è¯•.html-PcnGpuRg.js" as="script"><link rel="prefetch" href="/assets/æ³¨è§£.html-DPvud-Ub.js" as="script"><link rel="prefetch" href="/assets/day02-JavaScript-Vue.html-BWIlc7zy.js" as="script"><link rel="prefetch" href="/assets/day03_Vue_Element.html-B_6VaihB.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®åº“-MySQL-01.html-C4mfgdHA.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®åº“-MySQL-02.html-BdtQ95u4.js" as="script"><link rel="prefetch" href="/assets/Mybatis.html-BTJ7OCMD.js" as="script"><link rel="prefetch" href="/assets/SpringBootWebæ¡ˆä¾‹-1.html-CbXyk-aI.js" as="script"><link rel="prefetch" href="/assets/SpringBootWebæ¡ˆä¾‹-2.html-hK1GCvsk.js" as="script"><link rel="prefetch" href="/assets/SpringBootWebç™»å½•è®¤è¯.html-v_AyZShp.js" as="script"><link rel="prefetch" href="/assets/SpringBootWeb AOP.html-BauWIlE5.js" as="script"><link rel="prefetch" href="/assets/SpringBootåŸç†ç¯‡.html-BzoPQobn.js" as="script"><link rel="prefetch" href="/assets/Mavené«˜çº§.html-CZNeK3qt.js" as="script"><link rel="prefetch" href="/assets/Maven.html-D1Q6drc4.js" as="script"><link rel="prefetch" href="/assets/SpringBootWebå…¥é—¨.html-D08mKMul.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®åº“-MySQL-03.html-DRkuvRn9.js" as="script"><link rel="prefetch" href="/assets/Mybatiså…¥é—¨.html-BaT5uZ9r.js" as="script"><link rel="prefetch" href="/assets/404.html-SB9FC2qv.js" as="script"><link rel="prefetch" href="/assets/index.html-DCeZDXqr.js" as="script"><link rel="prefetch" href="/assets/index.html-DyuZSWOV.js" as="script"><link rel="prefetch" href="/assets/index.html-CM4UfU63.js" as="script"><link rel="prefetch" href="/assets/index.html-BcaEgJwG.js" as="script"><link rel="prefetch" href="/assets/index.html-D4oRc538.js" as="script"><link rel="prefetch" href="/assets/index.html-CHxH5xgw.js" as="script"><link rel="prefetch" href="/assets/index.html-CxEYd3hH.js" as="script"><link rel="prefetch" href="/assets/index.html-BSgf5zPo.js" as="script"><link rel="prefetch" href="/assets/index.html-UAA0s2Lf.js" as="script"><link rel="prefetch" href="/assets/index.html-B0-w231m.js" as="script"><link rel="prefetch" href="/assets/index.html-USyYuSop.js" as="script"><link rel="prefetch" href="/assets/index.html-CcCcXEGq.js" as="script"><link rel="prefetch" href="/assets/index.html-D44Sk1Nh.js" as="script"><link rel="prefetch" href="/assets/index.html-CHKSSJ0D.js" as="script"><link rel="prefetch" href="/assets/index.html-0bzcjWkZ.js" as="script"><link rel="prefetch" href="/assets/index.html-qbriASSL.js" as="script"><link rel="prefetch" href="/assets/index.html-BggB_JVr.js" as="script"><link rel="prefetch" href="/assets/index.html-DOyDdhwH.js" as="script"><link rel="prefetch" href="/assets/index.html-DxZmGDlW.js" as="script"><link rel="prefetch" href="/assets/index.html-BBZpmbVj.js" as="script"><link rel="prefetch" href="/assets/index.html-BsUpyNNy.js" as="script"><link rel="prefetch" href="/assets/index.html-B3RHQdSa.js" as="script"><link rel="prefetch" href="/assets/index.html-LSCydXpy.js" as="script"><link rel="prefetch" href="/assets/index.html-ek-e8Xmo.js" as="script"><link rel="prefetch" href="/assets/index.html-B_U7FIPu.js" as="script"><link rel="prefetch" href="/assets/index.html-CHR0Kw91.js" as="script"><link rel="prefetch" href="/assets/index.html-uAx3EEcG.js" as="script"><link rel="prefetch" href="/assets/index.html-Bhq2kpo3.js" as="script"><link rel="prefetch" href="/assets/index.html-Bd6llre5.js" as="script"><link rel="prefetch" href="/assets/index.html-k50CbWzR.js" as="script"><link rel="prefetch" href="/assets/index.html-DChaKoQy.js" as="script"><link rel="prefetch" href="/assets/index.html-gv_GKyt8.js" as="script"><link rel="prefetch" href="/assets/index.html-CsR3pDu7.js" as="script"><link rel="prefetch" href="/assets/index.html-DKkldv0h.js" as="script"><link rel="prefetch" href="/assets/index.html-C8zw1g3q.js" as="script"><link rel="prefetch" href="/assets/index.html-CMsZ3vJh.js" as="script"><link rel="prefetch" href="/assets/index.html-BiEqC83W.js" as="script"><link rel="prefetch" href="/assets/index.html-DzFo40ni.js" as="script"><link rel="prefetch" href="/assets/index.html-DBMxUYU1.js" as="script"><link rel="prefetch" href="/assets/index.html-DGXckimD.js" as="script"><link rel="prefetch" href="/assets/index.html-D1BsrX8i.js" as="script"><link rel="prefetch" href="/assets/index.html-VZte2Um7.js" as="script"><link rel="prefetch" href="/assets/index.html-DwAKm3Qf.js" as="script"><link rel="prefetch" href="/assets/index.html-CgXN-zgp.js" as="script"><link rel="prefetch" href="/assets/index.html-BGZWTYRo.js" as="script"><link rel="prefetch" href="/assets/index.html-DHT6KrAK.js" as="script"><link rel="prefetch" href="/assets/index.html-Dr05hsrU.js" as="script"><link rel="prefetch" href="/assets/index.html-DjrE57_6.js" as="script"><link rel="prefetch" href="/assets/index.html-BqhJbvMg.js" as="script"><link rel="prefetch" href="/assets/index.html-ByqSXFhA.js" as="script"><link rel="prefetch" href="/assets/index.html-Cin3shYd.js" as="script"><link rel="prefetch" href="/assets/index.html-RktgfWuQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CivtfIZo.js" as="script"><link rel="prefetch" href="/assets/index.html-CcYvL657.js" as="script"><link rel="prefetch" href="/assets/index.html-Oz0ZEyig.js" as="script"><link rel="prefetch" href="/assets/index.html-D0737AIP.js" as="script"><link rel="prefetch" href="/assets/index.html-Bi9XHXAR.js" as="script"><link rel="prefetch" href="/assets/index.html-D1nQyMvR.js" as="script"><link rel="prefetch" href="/assets/index.html-DpEJm3iF.js" as="script"><link rel="prefetch" href="/assets/index.html-CIz27Jkk.js" as="script"><link rel="prefetch" href="/assets/index.html-CBZVT-xa.js" as="script"><link rel="prefetch" href="/assets/index.html-BEHKlhB2.js" as="script"><link rel="prefetch" href="/assets/index.html-CPkk-iBB.js" as="script"><link rel="prefetch" href="/assets/index.html-DqBVUxB7.js" as="script"><link rel="prefetch" href="/assets/index.html-D-E7tK3w.js" as="script"><link rel="prefetch" href="/assets/index.html-WkkZFiVI.js" as="script"><link rel="prefetch" href="/assets/index.html-DX1mfF-3.js" as="script"><link rel="prefetch" href="/assets/index.html-Coj1Dmes.js" as="script"><link rel="prefetch" href="/assets/index.html-YTPkmB9B.js" as="script"><link rel="prefetch" href="/assets/index.html-gr3nkYwM.js" as="script"><link rel="prefetch" href="/assets/index.html-BpZONk7V.js" as="script"><link rel="prefetch" href="/assets/index.html-DfjTsU1O.js" as="script"><link rel="prefetch" href="/assets/index.html-DZvZYiEn.js" as="script"><link rel="prefetch" href="/assets/index.html-C8kSStYg.js" as="script"><link rel="prefetch" href="/assets/index.html-IaXeRvY6.js" as="script"><link rel="prefetch" href="/assets/index.html-B3ZemFfv.js" as="script"><link rel="prefetch" href="/assets/index.html-D6gIDgVJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BwA0jIBA.js" as="script"><link rel="prefetch" href="/assets/index.html-BhnFqnw2.js" as="script"><link rel="prefetch" href="/assets/index.html-U-Z3kzYq.js" as="script"><link rel="prefetch" href="/assets/index.html-D0ulkzJ6.js" as="script"><link rel="prefetch" href="/assets/index.html-1jpU-qEe.js" as="script"><link rel="prefetch" href="/assets/index.html-C2DxBZrO.js" as="script"><link rel="prefetch" href="/assets/index.html-DTGlEhcJ.js" as="script"><link rel="prefetch" href="/assets/index.html-D0LOnY2h.js" as="script"><link rel="prefetch" href="/assets/index.html-Cuu0NtxZ.js" as="script"><link rel="prefetch" href="/assets/index.html-1WIYgsx4.js" as="script"><link rel="prefetch" href="/assets/index.html-RUksQQhg.js" as="script"><link rel="prefetch" href="/assets/index.html-DHeX-48l.js" as="script"><link rel="prefetch" href="/assets/index.html-BucFFxPS.js" as="script"><link rel="prefetch" href="/assets/index.html-1jpU-qEe.js" as="script"><link rel="prefetch" href="/assets/index.html-Bvr_ZU6-.js" as="script"><link rel="prefetch" href="/assets/index.html-DcGGbFho.js" as="script"><link rel="prefetch" href="/assets/index.html-DuOp-Doj.js" as="script"><link rel="prefetch" href="/assets/index.html-VoU3bWvL.js" as="script"><link rel="prefetch" href="/assets/index.html-DoZq4zGH.js" as="script"><link rel="prefetch" href="/assets/index.html-DuOp-Doj.js" as="script"><link rel="prefetch" href="/assets/index.html-DnUSAns2.js" as="script"><link rel="prefetch" href="/assets/index.html-Bvbm7gWW.js" as="script"><link rel="prefetch" href="/assets/index.html-gwEYDYak.js" as="script"><link rel="prefetch" href="/assets/index.html-JIhMY18k.js" as="script"><link rel="prefetch" href="/assets/index.html-CszTb68Q.js" as="script"><link rel="prefetch" href="/assets/index.html-DEvJQ2VR.js" as="script"><link rel="prefetch" href="/assets/index.html-umc6LMgw.js" as="script"><link rel="prefetch" href="/assets/index.html-C6b-MiQB.js" as="script"><link rel="prefetch" href="/assets/index.html-DDSUzhoI.js" as="script"><link rel="prefetch" href="/assets/index.html-DmcKtgg5.js" as="script"><link rel="prefetch" href="/assets/index.html-BqXmYx0c.js" as="script"><link rel="prefetch" href="/assets/index.html-Dc2cuLwI.js" as="script"><link rel="prefetch" href="/assets/index.html-fHVLfW_V.js" as="script"><link rel="prefetch" href="/assets/index.html-BHXFviN0.js" as="script"><link rel="prefetch" href="/assets/index.html-BnO8Sruk.js" as="script"><link rel="prefetch" href="/assets/index.html-CETfdfon.js" as="script"><link rel="prefetch" href="/assets/index.html-CPEV7pVw.js" as="script"><link rel="prefetch" href="/assets/index.html-pUgaXHJ3.js" as="script"><link rel="prefetch" href="/assets/index.html-CQBE2YGF.js" as="script"><link rel="prefetch" href="/assets/index.html-D3t4WG2t.js" as="script"><link rel="prefetch" href="/assets/index.html-4BDCheRT.js" as="script"><link rel="prefetch" href="/assets/index.html-BFxWiy8S.js" as="script"><link rel="prefetch" href="/assets/index.html-CQSCIJFw.js" as="script"><link rel="prefetch" href="/assets/index.html-DnUBkTXu.js" as="script"><link rel="prefetch" href="/assets/index.html-CNjymCXf.js" as="script"><link rel="prefetch" href="/assets/index.html-B2BwzcT1.js" as="script"><link rel="prefetch" href="/assets/index.html-V5nBrVrx.js" as="script"><link rel="prefetch" href="/assets/index.html-Bow6WEGb.js" as="script"><link rel="prefetch" href="/assets/index.html-DpeoJ4lb.js" as="script"><link rel="prefetch" href="/assets/index.html-B63Qpvzb.js" as="script"><link rel="prefetch" href="/assets/index.html-B7KtMefh.js" as="script"><link rel="prefetch" href="/assets/index.html-a2IaIaEC.js" as="script"><link rel="prefetch" href="/assets/index.html-D3t4WG2t.js" as="script"><link rel="prefetch" href="/assets/index.html-D3LpGoXn.js" as="script"><link rel="prefetch" href="/assets/index.html-COulQsX5.js" as="script"><link rel="prefetch" href="/assets/index.html-DAdAFiNO.js" as="script"><link rel="prefetch" href="/assets/index.html-CAGyXGGX.js" as="script"><link rel="prefetch" href="/assets/index.html-D0vtBBRJ.js" as="script"><link rel="prefetch" href="/assets/index.html-6kWVva_3.js" as="script"><link rel="prefetch" href="/assets/index.html-VKjVkreY.js" as="script"><link rel="prefetch" href="/assets/index.html-D_mKR4df.js" as="script"><link rel="prefetch" href="/assets/index.html-RdJb-swm.js" as="script"><link rel="prefetch" href="/assets/index.html-CR8Sa01O.js" as="script"><link rel="prefetch" href="/assets/index.html-Bj7xR4Cf.js" as="script"><link rel="prefetch" href="/assets/index.html-D9LYzES6.js" as="script"><link rel="prefetch" href="/assets/index.html-BvpIqfAK.js" as="script"><link rel="prefetch" href="/assets/index.html-DaDYxsbx.js" as="script"><link rel="prefetch" href="/assets/index.html-F0burzmL.js" as="script"><link rel="prefetch" href="/assets/index.html-D-spFLp3.js" as="script"><link rel="prefetch" href="/assets/index.html-4BDCheRT.js" as="script"><link rel="prefetch" href="/assets/index.html-BFxWiy8S.js" as="script"><link rel="prefetch" href="/assets/index.html-vN6xoFil.js" as="script"><link rel="prefetch" href="/assets/index.html-BFZrxtej.js" as="script"><link rel="prefetch" href="/assets/index.html-DBpMfSdI.js" as="script"><link rel="prefetch" href="/assets/index.html-Ba1B3vYn.js" as="script"><link rel="prefetch" href="/assets/index.html-CJsCdDZW.js" as="script"><link rel="prefetch" href="/assets/index.html-Dqw5u21y.js" as="script"><link rel="prefetch" href="/assets/index.html-DEza3HQ_.js" as="script"><link rel="prefetch" href="/assets/index.html-CEJOqKVP.js" as="script"><link rel="prefetch" href="/assets/index.html-DeqN3HUY.js" as="script"><link rel="prefetch" href="/assets/index.html-SLHiK9nn.js" as="script"><link rel="prefetch" href="/assets/index.html-Dctz7ojn.js" as="script"><link rel="prefetch" href="/assets/index.html-F0burzmL.js" as="script"><link rel="prefetch" href="/assets/index.html-7XxVkWqj.js" as="script"><link rel="prefetch" href="/assets/index.html-B-O9cFUI.js" as="script"><link rel="prefetch" href="/assets/index.html-BQ09p-UA.js" as="script"><link rel="prefetch" href="/assets/index.html-D0vtBBRJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BtJMPJ9P.js" as="script"><link rel="prefetch" href="/assets/index.html-CU-OyyfM.js" as="script"><link rel="prefetch" href="/assets/index.html-CQSCIJFw.js" as="script"><link rel="prefetch" href="/assets/index.html--fjaXpTa.js" as="script"><link rel="prefetch" href="/assets/index.html-NxDYERpb.js" as="script"><link rel="prefetch" href="/assets/index.html-CxB0K3tB.js" as="script"><link rel="prefetch" href="/assets/index.html-1QupJk0A.js" as="script"><link rel="prefetch" href="/assets/index.html-BrE9qGHN.js" as="script"><link rel="prefetch" href="/assets/index.html-CFIys7We.js" as="script"><link rel="prefetch" href="/assets/index.html-DXpvV0v0.js" as="script"><link rel="prefetch" href="/assets/index.html-6tko2PjZ.js" as="script"><link rel="prefetch" href="/assets/index.html-D2GwpOnH.js" as="script"><link rel="prefetch" href="/assets/index.html-Cd-CLeT0.js" as="script"><link rel="prefetch" href="/assets/index.html-BbQZ_6DD.js" as="script"><link rel="prefetch" href="/assets/index.html-oI30cUA1.js" as="script"><link rel="prefetch" href="/assets/index.html-CL8nLRro.js" as="script"><link rel="prefetch" href="/assets/index.html-DfsOUwtk.js" as="script"><link rel="prefetch" href="/assets/index.html-CQ1kqV_m.js" as="script"><link rel="prefetch" href="/assets/index.html-CDgzP1CE.js" as="script"><link rel="prefetch" href="/assets/index.html-DECWWjp7.js" as="script"><link rel="prefetch" href="/assets/index.html-Cv42zjsd.js" as="script"><link rel="prefetch" href="/assets/index.html-mFt3_PMK.js" as="script"><link rel="prefetch" href="/assets/index.html-Bc-Kywld.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CMg0yb1C.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-Tk4JTTYl.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">coder-xuyong</span></a><!--]--></div><div class="vp-navbar-center"><!----></div><div class="vp-navbar-end"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label=" java "><!--[--><img class="icon" src="https://www.java.com/favicon.ico" alt no-view style=""> java <!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/java/01-JavaSE/" aria-label="JavaSE"><!---->JavaSE<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/java/02-JavaSE/" aria-label="JavaEE"><!---->JavaEE<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/posts/java/spring/" aria-label="spring"><!--[--><img class="icon" src="https://docs.spring.io/spring-boot/_/img/favicon.ico" alt no-view style=""><!--]-->spring<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ¡†æ¶"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-book" style=""></span>æ¡†æ¶<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">netty</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty01-nio.html" aria-label="NIO åŸºç¡€"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->NIO åŸºç¡€<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty02-%E5%85%A5%E9%97%A8.html" aria-label="Netty å…¥é—¨"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Netty å…¥é—¨<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty03-%E8%BF%9B%E9%98%B6.html" aria-label="Netty è¿›é˜¶"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Netty è¿›é˜¶<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/netty/Netty04-%E4%BC%98%E5%8C%96%E4%B8%8E%E6%BA%90%E7%A0%81.html" aria-label="ä¼˜åŒ–ä¸æºç "><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->ä¼˜åŒ–ä¸æºç <!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">spring</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/java/spring/spring.html" aria-label="spring å­¦ä¹ ç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->spring å­¦ä¹ ç¬”è®°<!----></a></li></ul></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/java/spring/" aria-label="spring"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-glasses" style=""></span><!--]-->spring<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="AIç›¸å…³"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-hexagon-nodes" style=""></span>AIç›¸å…³<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">AI</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/AI/AI%E5%85%A5%E9%97%A8.html" aria-label="AI å…¥é—¨"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-ghost" style=""></span><!--]-->AI å…¥é—¨<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/AI/deepseek%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA.html" aria-label="deepseek æœ¬åœ°æ­å»º"><!--[--><img class="icon" src="https://www.deepseek.com/favicon.ico" alt no-view style=""><!--]-->deepseek æœ¬åœ°æ­å»º<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://theme-hope.vuejs.press/zh/" aria-label="V2 æ–‡æ¡£" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><!--]-->V2 æ–‡æ¡£<!----></a></div></nav><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/coder-xuyong/blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="ä»‹ç»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->ä»‹ç»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><span class="vp-sidebar-title">java</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">01.JavaSE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">02.JavaEE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Bug</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Dependence</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Netty</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Spring</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">10 Springå®‰å…¨</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Spring Web</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/pages/ad0516/" aria-label="SpringBoot ä¹‹åº”ç”¨ EasyUI"><!---->SpringBoot ä¹‹åº”ç”¨ EasyUI<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/20287b/" aria-label="Spring MVC ä¹‹ DispatcherServlet"><!---->Spring MVC ä¹‹ DispatcherServlet<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/251e31/" aria-label="Spring MVC ä¹‹è§†å›¾æŠ€æœ¯"><!---->Spring MVC ä¹‹è§†å›¾æŠ€æœ¯<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/1d2954/" aria-label="Spring MVC ä¹‹è·¨åŸŸ"><!---->Spring MVC ä¹‹è·¨åŸŸ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/4a164d/" aria-label="Spring MVC ä¹‹è¿‡æ»¤å™¨"><!---->Spring MVC ä¹‹è¿‡æ»¤å™¨<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/pages/5d002f/" aria-label="Spring Web åº”ç”¨"><!---->Spring Web åº”ç”¨<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/pages/65351b/" aria-label="Spring Web ç»¼è¿°"><!---->Spring Web ç»¼è¿°<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring å…¶ä»–</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/java/spring/spring.html" aria-label="spring å­¦ä¹ ç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->spring å­¦ä¹ ç¬”è®°<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring æ•°æ®ç¯‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring æ ¸å¿ƒ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring ç»¼è¿°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring é›†æˆ</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/java/spring/spring%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="springé¢è¯•é¢˜"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->springé¢è¯•é¢˜<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Springboot</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-airbnb" style=""></span><span class="vp-sidebar-title">AI</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ–‡ç« </span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Spring Web åº”ç”¨</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/coder-xuyong" target="_blank" rel="noopener noreferrer">xuyong</a></span><span property="author" content="xuyong"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023å¹´2æœˆ14æ—¥</span><meta property="datePublished" content="2023-02-14T19:21:22.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 23 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT23M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">Java</span><span class="page-category-item color6 clickable" role="navigation">æ¡†æ¶</span><span class="page-category-item color1 clickable" role="navigation">Spring</span><span class="page-category-item color7 clickable" role="navigation">SpringWeb</span><!--]--><meta property="articleSection" content="Java,æ¡†æ¶,Spring,SpringWeb"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">Java</span><span class="page-tag-item color6 clickable" role="navigation">æ¡†æ¶</span><span class="page-tag-item color1 clickable" role="navigation">Spring</span><span class="page-tag-item color8 clickable" role="navigation">Web</span><span class="page-tag-item color7 clickable" role="navigation">Controller</span><!--]--><meta property="keywords" content="Java,æ¡†æ¶,Spring,Web,Controller"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<!----><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring-web-ç»„ä»¶">Spring Web ç»„ä»¶</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»„ä»¶æ‰«æ">ç»„ä»¶æ‰«æ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#aop-ä»£ç†">AOP ä»£ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#controller">@Controller</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#requestmapping">@RequestMapping</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¤„ç†æ–¹æ³•">å¤„ç†æ–¹æ³•</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è¯·æ±‚æ•°æ®">è¯·æ±‚æ•°æ®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å“åº”æ•°æ®">å“åº”æ•°æ®</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#modelattribute">@ModelAttribute</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#initbinder">@InitBinder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è¡¨å•å¤„ç†">è¡¨å•å¤„ç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åˆ›å»ºå¤„ç†è¡¨å•çš„-controller">åˆ›å»ºå¤„ç†è¡¨å•çš„ Controller</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®šä¹‰éœ€è¦æäº¤çš„è¡¨å•å®ä½“">å®šä¹‰éœ€è¦æäº¤çš„è¡¨å•å®ä½“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æäº¤è¡¨å•å‰ç«¯ä»£ç ">æäº¤è¡¨å•å‰ç«¯ä»£ç </a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ–‡ä»¶ä¸Šä¼ ">æ–‡ä»¶ä¸Šä¼ </a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åˆ›å»ºæ–‡ä»¶ä¸Šä¼ å¤„ç†-controller">åˆ›å»ºæ–‡ä»¶ä¸Šä¼ å¤„ç† Controller</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®šä¹‰å­˜å‚¨æ–‡ä»¶çš„-service">å®šä¹‰å­˜å‚¨æ–‡ä»¶çš„ Service</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åˆ›å»ºæ–‡ä»¶ä¸Šä¼ è¡¨å•">åˆ›å»ºæ–‡ä»¶ä¸Šä¼ è¡¨å•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ–‡ä»¶ä¸Šä¼ é™åˆ¶">æ–‡ä»¶ä¸Šä¼ é™åˆ¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#exceptionhandler">@ExceptionHandler</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="spring-web-åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#spring-web-åº”ç”¨"><span>Spring Web åº”ç”¨</span></a></h1><p>Spring MVC æä¾›äº†ä¸€ç§åŸºäºæ³¨è§£çš„ç¼–ç¨‹æ¨¡å‹ï¼Œ<code>@Controller</code> å’Œ <code>@RestController</code> ç»„ä»¶ä½¿ç”¨æ³¨è§£æ¥è¡¨è¾¾è¯·æ±‚æ˜ å°„ã€è¯·æ±‚è¾“å…¥ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚æ³¨è§£æ§åˆ¶å™¨å…·æœ‰çµæ´»çš„æ–¹æ³•ç­¾åï¼Œå¹¶ä¸”ä¸å¿…æ‰©å±•åŸºç±»æˆ–å®ç°ç‰¹å®šæ¥å£ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªç”±æ³¨è§£å®šä¹‰çš„æ§åˆ¶å™¨ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HelloController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/hello&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Model</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;message&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello World!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;index&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª <code>Model</code> å¹¶ä»¥ <code>String</code> å½¢å¼è¿”å›ä¸€ä¸ªè§†å›¾åç§°ï¼Œä½†è¿˜å­˜åœ¨è®¸å¤šå…¶ä»–é€‰é¡¹ã€‚</p><h2 id="å¿«é€Ÿå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿå…¥é—¨"><span>å¿«é€Ÿå…¥é—¨</span></a></h2><p>ä¸‹é¢ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥å±•ç¤ºå¦‚ä½•é€šè¿‡ Spring åˆ›å»ºä¸€ä¸ª Hello World Web æœåŠ¡ã€‚</p><p>ï¼ˆ1ï¼‰<code>pom.xml</code> ä¸­å¼•å…¥ä¾èµ–</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ2ï¼‰å®šä¹‰ Controller</p><p>Spring æ„å»º RESTful æœåŠ¡çš„æ–¹æ³•ï¼ŒHTTP è¯·æ±‚ç”± <code>Controller</code> å¤„ç†ã€‚ è¿™äº›ç»„ä»¶ç”± <code>@RestController</code> æ³¨è§£æ ‡è¯†ã€‚</p><p>ã€ç¤ºä¾‹ã€‘ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªå¤„ç† <code>/greeting</code> çš„ GET è¯·æ±‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.stereotype.Controller</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.ui.Model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.RequestParam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GreetingController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/greeting&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> greeting</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">required</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">defaultValue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;World&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Model</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, name);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;greeting&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ3ï¼‰åˆ›å»ºå¯åŠ¨ç±»</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.boot.SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.boot.autoconfigure.SpringBootApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HelloWorldApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">HelloWorldApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ4ï¼‰å¯åŠ¨æœåŠ¡ï¼šæ‰§è¡Œ <code>HelloWorldApplication.main</code> æ–¹æ³•å¯åŠ¨ web æœåŠ¡</p><p>ï¼ˆ5ï¼‰æµ‹è¯•</p><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® <a href="http://localhost:8080/greeting%EF%BC%8C%E9%A1%B5%E9%9D%A2%E4%BC%9A%E6%98%BE%E7%A4%BA%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:8080/greetingï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š</a></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Hello, World!</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® <a href="http://localhost:8080/greeting?name=dunwu%EF%BC%8C%E9%A1%B5%E9%9D%A2%E4%BC%9A%E6%98%BE%E7%A4%BA%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:8080/greeting?name=dunwuï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Hello, dunwu!</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="spring-web-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#spring-web-ç»„ä»¶"><span>Spring Web ç»„ä»¶</span></a></h2><h3 id="ç»„ä»¶æ‰«æ" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶æ‰«æ"><span>ç»„ä»¶æ‰«æ</span></a></h3><p>å¯ä»¥ä½¿ç”¨ Servlet çš„ <code>WebApplicationContext</code> ä¸­çš„æ ‡å‡† Spring bean å®šä¹‰æ¥å®šä¹‰æ§åˆ¶å™¨ã€‚<code>@Controller</code> æ„é€ å‹å…è®¸è‡ªåŠ¨æ£€æµ‹ï¼Œä¸ Spring å¯¹æ£€æµ‹ç±»è·¯å¾„ä¸­çš„ <code>@Component</code> ç±»å¹¶ä¸ºå®ƒä»¬è‡ªåŠ¨æ³¨å†Œ bean å®šä¹‰çš„ä¸€èˆ¬æ”¯æŒä¿æŒä¸€è‡´ã€‚å®ƒè¿˜å……å½“å¸¦æ³¨è§£ç±»çš„æ„é€ å‹ï¼Œè¡¨æ˜å…¶ä½œä¸º Web ç»„ä»¶çš„è§’è‰²ã€‚</p><p>è¦å¯ç”¨æ­¤ç±» <code>@Controller</code> çš„è‡ªåŠ¨æ£€æµ‹ï¼Œå¯ä»¥å°†ç»„ä»¶æ‰«ææ·»åŠ åˆ°æ‚¨çš„ Java é…ç½®ä¸­ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ComponentScan</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;org.example.web&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WebConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸ä¸Šè¿°ç¤ºä¾‹ç­‰æ•ˆçš„ XML é…ç½®ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;?</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">xml</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> encoding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">beans</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> xmlns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://www.springframework.org/schema/beans&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    xmlns:xsi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    xmlns:p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://www.springframework.org/schema/p&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    xmlns:context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://www.springframework.org/schema/context&quot;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    xsi:schemaLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        http://www.springframework.org/schema/beans</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        http://www.springframework.org/schema/context</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">context:component-scan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> base-package</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;org.example.web&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    &lt;!-- ... --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="aop-ä»£ç†" tabindex="-1"><a class="header-anchor" href="#aop-ä»£ç†"><span>AOP ä»£ç†</span></a></h3><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦åœ¨è¿è¡Œæ—¶ä½¿ç”¨ AOP ä»£ç†è£…é¥°æ§åˆ¶å™¨ã€‚ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå¦‚æœé€‰æ‹©ç›´æ¥åœ¨æ§åˆ¶å™¨ä¸Šä½¿ç”¨ <code>@Transactional</code> æ³¨è§£ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæ§åˆ¶å™¨ï¼Œå»ºè®®ä½¿ç”¨åŸºäºç±»çš„ä»£ç†ã€‚ç›´æ¥åœ¨æ§åˆ¶å™¨ä¸Šä½¿ç”¨æ­¤ç±»æ³¨è§£ä¼šè‡ªåŠ¨å‡ºç°è¿™ç§æƒ…å†µã€‚</p><p>å¦‚æœæ§åˆ¶å™¨å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œå¹¶ä¸”éœ€è¦ AOP ä»£ç†ï¼Œæ‚¨å¯èƒ½éœ€è¦æ˜¾å¼é…ç½®åŸºäºç±»çš„ä»£ç†ã€‚ä¾‹å¦‚ï¼Œå¯¹äº <code>@EnableTransactionManagement</code> ï¼Œå¯ä»¥æ›´æ”¹ä¸º <code>@EnableTransactionManagement(proxyTargetClass = true)</code>ï¼Œå¯¹äº <code>&lt;tx:annotation-driven/&gt;</code> ï¼Œæ‚¨å¯ä»¥æ›´æ”¹ä¸º <code>&lt;tx:annotation-driven proxy-target-class=&quot;true&quot;/&gt;</code>ã€‚</p><h3 id="controller" tabindex="-1"><a class="header-anchor" href="#controller"><span>@Controller</span></a></h3><p><code>@RestController</code> æ˜¯ä¸€ä¸ª<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-meta-annotations" target="_blank" rel="noopener noreferrer">ç»„åˆæ³¨è§£</a>ï¼Œå®ƒæœ¬èº«ä½¿ç”¨ <code>@Controller</code> å’Œ <code>@ResponseBody</code> å…ƒæ³¨è§£è¿›è¡Œæ ‡è®°ï¼Œä»¥æŒ‡ç¤ºæ§åˆ¶å™¨çš„æ¯ä¸ªæ–¹æ³•ç»§æ‰¿äº†ç±»å‹çº§åˆ«çš„ <code>@ResponseBody</code> æ³¨è§£ï¼Œå› æ­¤ç›´æ¥å†™å…¥å“åº”ä¸»ä½“ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ HTML æ¨¡æ¿è¿›è¡Œè§†å›¾è§£æå’Œæ¸²æŸ“ã€‚</p><h3 id="requestmapping" tabindex="-1"><a class="header-anchor" href="#requestmapping"><span>@RequestMapping</span></a></h3><p>å¯ä»¥ä½¿ç”¨ <code>@RequestMapping</code> æ³¨è§£å°†è¯·æ±‚æ˜ å°„åˆ°æ§åˆ¶å™¨æ–¹æ³•ã€‚å®ƒå…·æœ‰å„ç§å±æ€§ï¼Œå¯ä»¥é€šè¿‡ URLã€HTTP æ–¹æ³•ã€è¯·æ±‚å‚æ•°ã€æ ‡å¤´å’Œåª’ä½“ç±»å‹è¿›è¡ŒåŒ¹é…ã€‚å¯ä»¥åœ¨ç±»çº§åˆ«ä½¿ç”¨å®ƒæ¥è¡¨è¾¾å…±äº«æ˜ å°„ï¼Œæˆ–è€…åœ¨æ–¹æ³•çº§åˆ«ä½¿ç”¨å®ƒæ¥ç¼©å°åˆ°ç‰¹å®šç«¯ç‚¹çš„æ˜ å°„ã€‚</p><p><code>@RequestMapping</code> çš„ä¸»è¦å‚æ•°ï¼š</p><ul><li>path / method æŒ‡å®šæ˜ å°„è·¯å¾„ä¸æ–¹æ³•</li><li>params / headers é™å®šæ˜ å°„èŒƒå›´</li><li>consumes / produces é™å®šè¯·æ±‚ä¸å“åº”æ ¼å¼</li></ul><p>Spring è¿˜æä¾›äº†ä»¥ä¸‹ <code>@RequestMapping</code> çš„å˜ä½“ï¼š</p><ul><li><code>@GetMapping</code></li><li><code>@PostMapping</code></li><li><code>@PutMapping</code></li><li><code>@DeleteMapping</code></li><li><code>@PatchMapping</code></li></ul><p>å¿«æ·æ–¹å¼æ˜¯æä¾›çš„<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-requestmapping-composed" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰æ³¨è§£</a>ï¼Œå› ä¸ºå¯ä»¥è¯´ï¼Œå¤§å¤šæ•°æ§åˆ¶å™¨æ–¹æ³•åº”è¯¥æ˜ å°„åˆ°ç‰¹å®šçš„ HTTP æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>@RequestMapping</code>ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¸æ‰€æœ‰ HTTP æ–¹æ³•åŒ¹é…ã€‚åœ¨ç±»çº§åˆ«ä»ç„¶éœ€è¦ <code>@RequestMapping</code> æ¥è¡¨è¾¾å…±äº«æ˜ å°„ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹å…·æœ‰ç±»å‹å’Œæ–¹æ³•çº§åˆ«çš„æ˜ å°„ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/persons&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PersonController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/{id}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Person</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getPerson</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostMapping</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ResponseStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">HttpStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">CREATED</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestBody</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Person</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="uri-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#uri-æ¨¡å¼"><span>URI æ¨¡å¼</span></a></h4><p><code>@RequestMapping</code> æ–¹æ³•å¯ä»¥ä½¿ç”¨ URL æ¨¡å¼è¿›è¡Œæ˜ å°„ã€‚æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p><ul><li><code>PathPattern</code> - ä¸ URL è·¯å¾„åŒ¹é…çš„é¢„è§£ææ¨¡å¼ä¹Ÿé¢„è§£æä¸º <code>PathContainer</code>ã€‚è¯¥è§£å†³æ–¹æ¡ˆä¸“ä¸ºç½‘ç»œä½¿ç”¨è€Œè®¾è®¡ï¼Œå¯æœ‰æ•ˆå¤„ç†ç¼–ç å’Œè·¯å¾„å‚æ•°ï¼Œå¹¶é«˜æ•ˆåŒ¹é…ã€‚</li><li><code>AntPathMatcher</code> - æ ¹æ®å­—ç¬¦ä¸²è·¯å¾„åŒ¹é…å­—ç¬¦ä¸²æ¨¡å¼ã€‚è¿™æ˜¯åœ¨ Spring é…ç½®ä¸­ä¹Ÿä½¿ç”¨çš„åŸå§‹è§£å†³æ–¹æ¡ˆï¼Œç”¨äºåœ¨ç±»è·¯å¾„ã€æ–‡ä»¶ç³»ç»Ÿå’Œå…¶ä»–ä½ç½®é€‰æ‹©èµ„æºã€‚å®ƒçš„æ•ˆç‡è¾ƒä½ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²è·¯å¾„è¾“å…¥å¯¹äºæœ‰æ•ˆå¤„ç† URL çš„ç¼–ç å’Œå…¶ä»–é—®é¢˜æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚</li></ul><p><code>PathPattern</code> æ˜¯ Web åº”ç”¨ç¨‹åºçš„æ¨èè§£å†³æ–¹æ¡ˆï¼Œå®ƒæ˜¯ Spring WebFlux ä¸­çš„å”¯ä¸€é€‰æ‹©ã€‚å®ƒä» 5.3 ç‰ˆå¼€å§‹åœ¨ Spring MVC ä¸­ä½¿ç”¨ï¼Œä» 6.0 ç‰ˆå¼€å§‹é»˜è®¤å¯ç”¨ã€‚è¯·å‚é˜… <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-path-matching" target="_blank" rel="noopener noreferrer">MVC é…ç½®</a> ä»¥è‡ªå®šä¹‰è·¯å¾„åŒ¹é…é€‰é¡¹ã€‚</p><p><code>PathPattern</code> æ”¯æŒä¸ <code>AntPathMatcher</code> ç›¸åŒçš„æ¨¡å¼è¯­æ³•ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æ”¯æŒæ•è·æ¨¡å¼ï¼Œä¾‹å¦‚ <code>{spring}</code>ï¼Œç”¨äºåŒ¹é…è·¯å¾„æœ«å°¾çš„ 0 ä¸ªæˆ–å¤šä¸ªè·¯å¾„æ®µã€‚<code>PathPattern</code> è¿˜é™åˆ¶ä½¿ç”¨ <code>**</code> æ¥åŒ¹é…å¤šä¸ªè·¯å¾„æ®µï¼Œè¿™æ ·å®ƒåªå…è®¸å‡ºç°åœ¨æ¨¡å¼çš„æœ«å°¾ã€‚è¿™æ¶ˆé™¤äº†åœ¨ä¸ºç»™å®šè¯·æ±‚é€‰æ‹©æœ€ä½³åŒ¹é…æ¨¡å¼æ—¶å‡ºç°çš„è®¸å¤šæ­§ä¹‰ã€‚æœ‰å…³å®Œæ•´æ¨¡å¼è¯­æ³•ï¼Œè¯·å‚é˜… <a href="https://docs.spring.io/spring-framework/docs/6.0.4/javadoc-api/org/springframework/web/util/pattern/PathPattern.html" target="_blank" rel="noopener noreferrer">PathPattern</a> å’Œ <a href="https://docs.spring.io/spring-framework/docs/6.0.4/javadoc-api/org/springframework/util/AntPathMatcher.html" target="_blank" rel="noopener noreferrer">AntPathMatcher</a>ã€‚</p><p>ä¸€äº›ç¤ºä¾‹æ¨¡å¼ï¼š</p><ul><li><code>&quot;/resources/ima?e.png&quot;</code> -åŒ¹é…ä¸€ä¸ªå­—ç¬¦</li><li><code>&quot;/resources/*.png&quot;</code> - åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</li><li><code>&quot;/resources/**&quot;</code> - åŒ¹é…å¤šä¸ªå­—ç¬¦</li><li><code>&quot;/projects/{project}/versions&quot;</code> - åŒ¹é…è·¯å¾„æ®µå¹¶å°†å…¶æ•è·ä¸ºå˜é‡</li><li><code>&quot;/projects/{project:[a-z]+}/versions&quot;</code> - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¹¶æ•è·å˜é‡</li></ul><p>å¯ä»¥ä½¿ç”¨ <code>@PathVariable</code> è®¿é—®æ•è·çš„ URI å˜é‡ã€‚ä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/owners/{ownerId}/pets/{petId}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Pet</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> findPet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ownerId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> petId) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥åœ¨ç±»å’Œæ–¹æ³•çº§åˆ«å£°æ˜ URI å˜é‡ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/owners/{ownerId}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OwnerController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/pets/{petId}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Pet</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> findPet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ownerId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> petId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>URI å˜é‡ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºé€‚å½“çš„ç±»å‹ï¼Œå¦åˆ™ä¼šå¼•å‘ <code>TypeMismatchException</code>ã€‚é»˜è®¤æ”¯æŒç®€å•ç±»å‹ï¼ˆ<code>int</code>ã€<code>long</code>ã€<code>Date</code> ç­‰ï¼‰ï¼Œå¯ä»¥æ³¨å†Œå¯¹ä»»ä½•å…¶ä»–æ•°æ®ç±»å‹çš„æ”¯æŒã€‚è¯·å‚è§<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-typeconversion" target="_blank" rel="noopener noreferrer">ç±»å‹è½¬æ¢</a>å’Œ <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-initbinder" target="_blank" rel="noopener noreferrer"><code>DataBinder</code></a>ã€‚</p><p>å¯ä»¥æ˜¾å¼å‘½å URI å˜é‡ï¼ˆä¾‹å¦‚ï¼Œ<code>@PathVariable(&quot;customId&quot;)</code>ï¼‰ï¼Œä½†å¦‚æœåç§°ç›¸åŒå¹¶ä¸”ä»£ç æ˜¯ä½¿ç”¨ <code>-parameters</code> ç¼–è¯‘å™¨æ ‡å¿—ç¼–è¯‘çš„ï¼Œåˆ™å¯ä»¥çœç•¥è¯¥ç»†èŠ‚ã€‚</p><p>è¯­æ³• <code>{varName:regex}</code> ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å£°æ˜ä¸€ä¸ª URI å˜é‡ã€‚ä¾‹å¦‚ï¼Œç»™å®š URL <code>&quot;/spring-web-3.0.5.jar&quot;</code>ï¼Œä»¥ä¸‹æ–¹æ³•æå–åç§°ã€ç‰ˆæœ¬å’Œæ–‡ä»¶æ‰©å±•åï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/{name:[a-z-]+}-{version:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">d}{ext:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.[a-z]+}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ext) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>URI è·¯å¾„æ¨¡å¼è¿˜å¯ä»¥åµŒå…¥ <code>${â€¦}</code> å ä½ç¬¦ï¼Œè¿™äº›å ä½ç¬¦åœ¨å¯åŠ¨æ—¶é€šè¿‡ä½¿ç”¨ <code>PropertySourcesPlaceholderConfigurer</code> é’ˆå¯¹æœ¬åœ°ã€ç³»ç»Ÿã€ç¯å¢ƒå’Œå…¶ä»–å±æ€§æºè¿›è¡Œè§£æã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥æ ¹æ®æŸäº›å¤–éƒ¨é…ç½®å‚æ•°åŒ–åŸºæœ¬ URLã€‚</p><h4 id="æ¨¡å¼æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#æ¨¡å¼æ¯”è¾ƒ"><span>æ¨¡å¼æ¯”è¾ƒ</span></a></h4><p>å½“å¤šä¸ªæ¨¡å¼åŒ¹é…ä¸€ä¸ª URL æ—¶ï¼Œå¿…é¡»é€‰æ‹©æœ€ä½³åŒ¹é…ã€‚è¿™æ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€å®Œæˆçš„ï¼Œå…·ä½“å–å†³äºæ˜¯å¦å¯ç”¨äº†å·²è§£æçš„ <code>PathPattern</code> ä»¥ä¾›ä½¿ç”¨ï¼š</p><ul><li><a href="https://docs.spring.io/spring-framework/docs/6.0.4/javadoc-api/org/springframework/web/util/pattern/PathPattern.html#SPECIFICITY_COMPARATOR" target="_blank" rel="noopener noreferrer"><code>PathPattern.SPECIFICITY_COMPARATOR</code></a></li><li><a href="https://docs.spring.io/spring-framework/docs/6.0.4/javadoc-api/org/springframework/util/AntPathMatcher.html#getPatternComparator-java.lang.String-" target="_blank" rel="noopener noreferrer"><code>AntPathMatcher.getPatternComparator(String path)</code></a></li></ul><p>ä¸¤è€…éƒ½æœ‰åŠ©äºå¯¹æ¨¡å¼è¿›è¡Œæ’åºï¼Œæ›´å…·ä½“çš„æ¨¡å¼ä½äºé¡¶éƒ¨ã€‚å¦‚æœæ¨¡å¼å…·æœ‰è¾ƒå°‘çš„ URI å˜é‡ï¼ˆè®¡ä¸º 1ï¼‰ã€å•é€šé…ç¬¦ï¼ˆè®¡ä¸º 1ï¼‰å’ŒåŒé€šé…ç¬¦ï¼ˆè®¡ä¸º 2ï¼‰ï¼Œåˆ™æ¨¡å¼ä¸å¤ªå…·ä½“ã€‚å¦‚æœå¾—åˆ†ç›¸åŒï¼Œåˆ™é€‰æ‹©è¾ƒé•¿çš„æ¨¡å¼ã€‚ç»™å®šç›¸åŒçš„åˆ†æ•°å’Œé•¿åº¦ï¼Œé€‰æ‹© URI å˜é‡å¤šäºé€šé…ç¬¦çš„æ¨¡å¼ã€‚</p><p>é»˜è®¤æ˜ å°„æ¨¡å¼ (<code>/**</code>) è¢«æ’é™¤åœ¨è¯„åˆ†ä¹‹å¤–å¹¶å§‹ç»ˆæ’åœ¨æœ€åã€‚æ­¤å¤–ï¼Œå‰ç¼€æ¨¡å¼ï¼ˆä¾‹å¦‚ <code>/public/**</code>ï¼‰è¢«è®¤ä¸ºä¸å¦‚å…¶ä»–æ²¡æœ‰åŒé€šé…ç¬¦çš„æ¨¡å¼å…·ä½“ã€‚</p><h4 id="åç¼€åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#åç¼€åŒ¹é…"><span>åç¼€åŒ¹é…</span></a></h4><p>ä» 5.3 å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ Spring MVC ä¸å†æ‰§è¡Œ <code>.*</code> åç¼€æ¨¡å¼åŒ¹é…ï¼Œå…¶ä¸­æ˜ å°„åˆ° <code>person</code> çš„æ§åˆ¶å™¨ä¹Ÿéšå¼æ˜ å°„åˆ° <code>/person.*</code>ã€‚å› æ­¤ï¼Œè·¯å¾„æ‰©å±•ä¸å†ç”¨äºè§£é‡Šè¯·æ±‚çš„å“åº”å†…å®¹ç±»å‹âŸ©â€”â€”ä¾‹å¦‚ï¼Œ<code>/person.pdf</code>ã€<code>/person.xml</code> ç­‰ã€‚</p><p>å½“æµè§ˆå™¨è¿‡å»å‘é€éš¾ä»¥ä¸€è‡´è§£é‡Šçš„ <code>Accept</code> è¯·æ±‚å¤´æ—¶ï¼Œä»¥è¿™ç§æ–¹å¼ä½¿ç”¨æ–‡ä»¶æ‰©å±•åæ˜¯å¿…è¦çš„ã€‚ç°åœ¨ï¼Œè¿™ä¸å†æ˜¯å¿…éœ€çš„ï¼Œä½¿ç”¨ <code>Accept</code> è¯·æ±‚å¤´åº”è¯¥æ˜¯é¦–é€‰ã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ–‡ä»¶æ‰©å±•åçš„ä½¿ç”¨åœ¨å¾ˆå¤šæ–¹é¢éƒ½è¢«è¯æ˜æ˜¯æœ‰é—®é¢˜çš„ã€‚å½“ä½¿ç”¨ URI å˜é‡ã€è·¯å¾„å‚æ•°å’Œ URI ç¼–ç è¦†ç›–æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´æ­§ä¹‰ã€‚å…³äºåŸºäº URL çš„æˆæƒå’Œå®‰å…¨æ€§çš„æ¨ç†ä¹Ÿå˜å¾—æ›´åŠ å›°éš¾ã€‚</p><p>è¦åœ¨ 5.3 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­å®Œå…¨ç¦ç”¨è·¯å¾„æ‰©å±•ï¼Œè¯·è®¾ç½®ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><code>useSuffixPatternMatching(false)</code> - å‚è€ƒï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-path-matching" target="_blank" rel="noopener noreferrer">PathMatchConfigurer</a></li><li><code>favorPathExtension(false)</code> - å‚è€ƒï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-content-negotiation" target="_blank" rel="noopener noreferrer">ContentNegotiationConfigurer</a></li></ul><p>é™¤äº†é€šè¿‡ <code>Accept</code> è¯·æ±‚å¤´ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§è¯·æ±‚å†…å®¹ç±»å‹çš„æ–¹æ³•ä»ç„¶æœ‰ç”¨ï¼Œä¾‹å¦‚åœ¨æµè§ˆå™¨ä¸­é”®å…¥ URL æ—¶ã€‚è·¯å¾„æ‰©å±•çš„ä¸€ç§å®‰å…¨æ›¿ä»£æ–¹æ³•æ˜¯ä½¿ç”¨æŸ¥è¯¢å‚æ•°ç­–ç•¥ã€‚å¦‚æœæ‚¨å¿…é¡»ä½¿ç”¨æ–‡ä»¶æ‰©å±•åï¼Œè¯·è€ƒè™‘é€šè¿‡ <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-content-negotiation" target="_blank" rel="noopener noreferrer">ContentNegotiationConfigurer</a> çš„ <code>mediaTypes</code> å±æ€§å°†å®ƒä»¬é™åˆ¶ä¸ºæ˜ç¡®æ³¨å†Œçš„æ‰©å±•ååˆ—è¡¨ã€‚</p><h4 id="åç¼€åŒ¹é…å’Œ-rfd" tabindex="-1"><a class="header-anchor" href="#åç¼€åŒ¹é…å’Œ-rfd"><span>åç¼€åŒ¹é…å’Œ RFD</span></a></h4><p>åå°„æ–‡ä»¶ä¸‹è½½ (RFD) æ”»å‡»ä¸ XSS ç±»ä¼¼ï¼Œå› ä¸ºå®ƒä¾èµ–äºå“åº”ä¸­åæ˜ çš„è¯·æ±‚è¾“å…¥ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥è¯¢å‚æ•°å’Œ URI å˜é‡ï¼‰ã€‚ç„¶è€Œï¼ŒRFD æ”»å‡»ä¸æ˜¯å°† JavaScript æ’å…¥ HTMLï¼Œè€Œæ˜¯ä¾èµ–äºæµè§ˆå™¨åˆ‡æ¢æ¥æ‰§è¡Œä¸‹è½½ï¼Œå¹¶åœ¨ç¨ååŒå‡»æ—¶å°†å“åº”è§†ä¸ºå¯æ‰§è¡Œè„šæœ¬ã€‚</p><p>åœ¨ Spring MVC ä¸­ï¼Œ<code>@ResponseBody</code> å’Œ <code>ResponseEntity</code> æ–¹æ³•å­˜åœ¨é£é™©ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æ¸²æŸ“ä¸åŒçš„å†…å®¹ç±»å‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ URL è·¯å¾„æ‰©å±•è¯·æ±‚è¿™äº›å†…å®¹ç±»å‹ã€‚ç¦ç”¨åç¼€æ¨¡å¼åŒ¹é…å¹¶ä½¿ç”¨è·¯å¾„æ‰©å±•è¿›è¡Œå†…å®¹åå•†å¯ä»¥é™ä½é£é™©ï¼Œä½†ä¸è¶³ä»¥é˜²æ­¢ RFD æ”»å‡»ã€‚</p><p>ä¸ºäº†é˜²æ­¢ RFD æ”»å‡»ï¼Œåœ¨æ¸²æŸ“å“åº”ä¸»ä½“ä¹‹å‰ï¼ŒSpring MVC æ·»åŠ äº†ä¸€ä¸ª <code>Content-Disposition:inline;filename=f.txt</code> å¤´ä»¥å»ºè®®ä¸€ä¸ªå›ºå®šä¸”å®‰å…¨çš„ä¸‹è½½æ–‡ä»¶ã€‚ä»…å½“ URL è·¯å¾„åŒ…å«çš„æ–‡ä»¶æ‰©å±•åæ—¢ä¸å®‰å…¨ä¹Ÿä¸æ˜ç¡®æ³¨å†Œç”¨äºå†…å®¹åå•†æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œæ­¤æ“ä½œã€‚ä½†æ˜¯ï¼Œå½“ URL ç›´æ¥è¾“å…¥æµè§ˆå™¨æ—¶ï¼Œå®ƒå¯èƒ½ä¼šäº§ç”Ÿå‰¯ä½œç”¨ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå…è®¸è®¸å¤šå¸¸è§çš„è·¯å¾„æ‰©å±•æ˜¯å®‰å…¨çš„ã€‚å…·æœ‰è‡ªå®šä¹‰ <code>HttpMessageConverter</code> å®ç°çš„åº”ç”¨ç¨‹åºå¯ä»¥æ˜¾å¼æ³¨å†Œæ–‡ä»¶æ‰©å±•åä»¥è¿›è¡Œå†…å®¹åå•†ï¼Œä»¥é¿å…ä¸ºè¿™äº›æ‰©å±•åæ·»åŠ  <code>Content-Disposition</code> å¤´ã€‚è¯·å‚é˜… <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-content-negotiation" target="_blank" rel="noopener noreferrer">å†…å®¹ç±»å‹</a>ã€‚</p><p>å…³äº RFD æ›´å¤šç»†èŠ‚æ¨èå‚è€ƒ <a href="https://pivotal.io/security/cve-2015-5211" target="_blank" rel="noopener noreferrer">CVE-2015-5211</a></p><h4 id="é™å®šæ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#é™å®šæ•°æ®ç±»å‹"><span>é™å®šæ•°æ®ç±»å‹</span></a></h4><p>æ‚¨å¯ä»¥æ ¹æ®è¯·æ±‚çš„ <code>Content-Type</code> ç¼©å°è¯·æ±‚æ˜ å°„ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/pets&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> consumes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;application/json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> addPet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestBody</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Pet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> pet) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>consumes</code> å±æ€§è¿˜æ”¯æŒå¦å®šè¡¨è¾¾å¼ - ä¾‹å¦‚ï¼Œ<code>!textplain</code> è¡¨ç¤ºé™¤ <code>textplain</code> ä¹‹å¤–çš„ä»»ä½•å†…å®¹ç±»å‹ã€‚</p><p>æ‚¨å¯ä»¥åœ¨ç±»çº§åˆ«å£°æ˜ä¸€ä¸ªå…±äº«çš„ <code>consumes</code> å±æ€§ã€‚ç„¶è€Œï¼Œä¸å¤§å¤šæ•°å…¶ä»–è¯·æ±‚æ˜ å°„å±æ€§ä¸åŒçš„æ˜¯ï¼Œå½“åœ¨ç±»çº§åˆ«ä½¿ç”¨æ—¶ï¼Œæ–¹æ³•çº§åˆ«çš„ <code>consumes</code> å±æ€§ä¼šè¦†ç›–è€Œä¸æ˜¯æ‰©å±•ç±»çº§åˆ«çš„å£°æ˜ã€‚</p><h4 id="producible-media-types" tabindex="-1"><a class="header-anchor" href="#producible-media-types"><span>Producible Media Types</span></a></h4><p>å¯ä»¥æ ¹æ® <code>Accept</code> è¯·æ±‚å¤´å’Œæ§åˆ¶å™¨æ–¹æ³•ç”Ÿæˆçš„å†…å®¹ç±»å‹åˆ—è¡¨æ¥ç¼©å°è¯·æ±‚æ˜ å°„ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/pets/{petId}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> produces</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;application/json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ResponseBody</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Pet</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getPet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> petId) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åª’ä½“ç±»å‹å¯ä»¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦é›†ã€‚æ”¯æŒå¦å®šè¡¨è¾¾å¼â€”â€”ä¾‹å¦‚ï¼Œ<code>!textplain</code> è¡¨ç¤ºé™¤ &quot;text/plain&quot; ä¹‹å¤–çš„ä»»ä½•å†…å®¹ç±»å‹ã€‚</p><p>å¯ä»¥åœ¨ç±»çº§åˆ«å£°æ˜ä¸€ä¸ªå…±äº«çš„ <code>produces</code> å±æ€§ã€‚ç„¶è€Œï¼Œä¸å¤§å¤šæ•°å…¶ä»–è¯·æ±‚æ˜ å°„å±æ€§ä¸åŒï¼Œå½“åœ¨ç±»çº§åˆ«ä½¿ç”¨æ—¶ï¼Œæ–¹æ³•çº§åˆ«çš„ <code>produces</code> å±æ€§ä¼šè¦†ç›–è€Œä¸æ˜¯æ‰©å±•ç±»çº§åˆ«çš„å£°æ˜ã€‚</p><h4 id="å‚æ•°ã€è¯·æ±‚å¤´" tabindex="-1"><a class="header-anchor" href="#å‚æ•°ã€è¯·æ±‚å¤´"><span>å‚æ•°ã€è¯·æ±‚å¤´</span></a></h4><p>å¯ä»¥æ ¹æ®è¯·æ±‚å‚æ•°æ¡ä»¶ç¼©å°è¯·æ±‚æ˜ å°„èŒƒå›´ã€‚å¯ä»¥æµ‹è¯•æ˜¯å¦å­˜åœ¨è¯·æ±‚å‚æ•° (<code>myParam</code>)ã€æ˜¯å¦ç¼ºå°‘è¯·æ±‚å‚æ•° (<code>!myParam</code>) æˆ–ç‰¹å®šå€¼ (<code>myParam=myValue</code>)ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•æµ‹è¯•ç‰¹å®šå€¼ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/pets/{petId}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> params</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;myParam=myValue&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> findPet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> petId) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„è¯·æ±‚å¤´æ¡ä»¶ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/pets&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> headers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;myHeader=myValue&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> findPet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> petId) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="http-head-options" tabindex="-1"><a class="header-anchor" href="#http-head-options"><span>HTTP HEAD, OPTIONS</span></a></h4><p><code>@GetMapping</code>ï¼ˆå’Œ <code>@RequestMapping(method=HttpMethod.GET)</code>ï¼‰é€æ˜åœ°æ”¯æŒ HTTP HEAD ä»¥è¿›è¡Œè¯·æ±‚æ˜ å°„ã€‚æ§åˆ¶å™¨æ–¹æ³•ä¸éœ€è¦æ”¹å˜ã€‚åœ¨ <code>jakarta.servlet.http.HttpServlet</code> ä¸­åº”ç”¨çš„å“åº”åŒ…è£…å™¨ç¡®ä¿å°† <code>Content-Length</code> å¤´è®¾ç½®ä¸ºå†™å…¥çš„å­—èŠ‚æ•°ï¼ˆå®é™…ä¸Šæ²¡æœ‰å†™å…¥å“åº”ï¼‰ã€‚</p><p><code>@GetMapping</code>ï¼ˆå’Œ<code>@RequestMapping(method=HttpMethod.GET)</code>ï¼‰è¢«éšå¼æ˜ å°„å¹¶æ”¯æŒ HTTP HEADã€‚HTTP HEAD è¯·æ±‚çš„å¤„ç†æ–¹å¼å°±å¥½åƒå®ƒæ˜¯ HTTP GET ä¸€æ ·ï¼Œé™¤äº†ä¸å†™å…¥æ­£æ–‡ï¼Œè€Œæ˜¯è®¡ç®—å­—èŠ‚æ•°å¹¶è®¾ç½® <code>Content-Length</code> å¤´ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡å°† <code>Allow</code> å“åº”å¤´è®¾ç½®ä¸ºæ‰€æœ‰å…·æœ‰åŒ¹é… URL æ¨¡å¼çš„ <code>@RequestMapping</code> æ–¹æ³•ä¸­åˆ—å‡ºçš„ HTTP æ–¹æ³•åˆ—è¡¨æ¥å¤„ç† HTTP OPTIONSã€‚</p><p>å¯¹äºæ²¡æœ‰ HTTP æ–¹æ³•å£°æ˜çš„ <code>@RequestMapping</code> ï¼Œ<code>Allow</code> å¤´è®¾ç½®ä¸º <code>GET,HEAD,POST,PUT,PATCH,DELETE,OPTIONS</code>ã€‚æ§åˆ¶å™¨æ–¹æ³•åº”å§‹ç»ˆå£°æ˜æ”¯æŒçš„ HTTP æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ä½¿ç”¨ HTTP æ–¹æ³•ç‰¹å®šå˜ä½“ï¼š<code>@GetMapping</code>ã€<code>@PostMapping</code> ç­‰ï¼‰ã€‚</p><p>You can explicitly map the <code>@RequestMapping</code> method to HTTP HEAD and HTTP OPTIONS, but that is not necessary in the common case.</p><p>å¯ä»¥æ˜¾å¼åœ°å°† <code>@RequestMapping</code> æ–¹æ³•æ˜ å°„åˆ° HTTP HEAD å’Œ HTTP OPTIONSï¼Œä½†åœ¨å¸¸è§æƒ…å†µä¸‹è¿™ä¸æ˜¯å¿…éœ€çš„ã€‚</p><h4 id="è‡ªå®šä¹‰æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ³¨è§£"><span>è‡ªå®šä¹‰æ³¨è§£</span></a></h4><p>Spring MVC æ”¯æŒä½¿ç”¨<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-meta-annotations" target="_blank" rel="noopener noreferrer">ç»„åˆæ³¨è§£</a> è¿›è¡Œè¯·æ±‚æ˜ å°„ã€‚è¿™äº›æ³¨è§£æœ¬èº«æ˜¯ç”¨ <code>@RequestMapping</code> è¿›è¡Œå…ƒæ³¨è§£çš„ï¼Œå¹¶ä¸”ç»„åˆèµ·æ¥é‡æ–°å£°æ˜ <code>@RequestMapping</code> å±æ€§çš„ä¸€ä¸ªå­é›†ï¼ˆæˆ–å…¨éƒ¨ï¼‰ï¼Œå…·æœ‰æ›´æ˜ç¡®çš„ç›®çš„ã€‚</p><p><code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@PutMapping</code>ã€<code>@DeleteMapping</code> å’Œ <code>@PatchMapping</code> æ˜¯ç»„åˆæ³¨è§£çš„ç¤ºä¾‹ã€‚æä¾›å®ƒä»¬æ˜¯å› ä¸ºï¼Œå¯ä»¥è¯´ï¼Œå¤§å¤šæ•°æ§åˆ¶å™¨æ–¹æ³•åº”è¯¥æ˜ å°„åˆ°ç‰¹å®šçš„ HTTP æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>@RequestMapping</code>ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¸æ‰€æœ‰ HTTP æ–¹æ³•åŒ¹é…ã€‚å¦‚æœæ‚¨éœ€è¦ç»„åˆæ³¨è§£çš„ç¤ºä¾‹ï¼Œè¯·æŸ¥çœ‹è¿™äº›æ³¨è§£çš„å£°æ˜æ–¹å¼ã€‚</p><p>Spring MVC è¿˜æ”¯æŒå…·æœ‰è‡ªå®šä¹‰è¯·æ±‚åŒ¹é…é€»è¾‘çš„è‡ªå®šä¹‰è¯·æ±‚æ˜ å°„å±æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„é€‰é¡¹ï¼Œéœ€è¦ç»§æ‰¿ <code>RequestMappingHandlerMapping</code> å¹¶è¦†ç›– <code>getCustomMethodCondition</code> æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æ£€æŸ¥è‡ªå®šä¹‰å±æ€§å¹¶è¿”å›æ‚¨è‡ªå·±çš„ <code>RequestCondition</code>ã€‚</p><h4 id="æ˜¾ç¤ºæ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#æ˜¾ç¤ºæ³¨å†Œ"><span>æ˜¾ç¤ºæ³¨å†Œ</span></a></h4><p>æ‚¨å¯ä»¥ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å†Œå¤„ç†ç¨‹åºæ–¹æ³•ï¼Œæ‚¨å¯ä»¥å°†å…¶ç”¨äºåŠ¨æ€æ³¨å†Œæˆ–é«˜çº§æƒ…å†µï¼Œä¾‹å¦‚ä¸åŒ URL ä¸‹çš„åŒä¸€å¤„ç†ç¨‹åºçš„ä¸åŒå®ä¾‹ã€‚ä»¥ä¸‹ç¤ºä¾‹æ³¨å†Œäº†ä¸€ä¸ªå¤„ç†ç¨‹åºæ–¹æ³•</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setHandlerMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RequestMappingHandlerMapping</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> mapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">UserHandler</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> NoSuchMethodException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        RequestMappingInfo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> info</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestMappingInfo</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">paths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/user/{id}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">methods</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RequestMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">GET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Method</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> UserHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;getUser&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        mapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(info, handler, method);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>ä¸ºæ§åˆ¶å™¨æ³¨å…¥ç›®æ ‡å¤„ç†ç¨‹åºå’Œå¤„ç†ç¨‹åºæ˜ å°„ã€‚</p></li><li><p>å‡†å¤‡è¯·æ±‚æ˜ å°„å…ƒæ•°æ®ã€‚</p></li><li><p>è·å–å¤„ç†ç¨‹åºæ–¹æ³•ã€‚</p></li><li><p>æ·»åŠ æ³¨å†Œã€‚</p></li></ol><h2 id="å¤„ç†æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å¤„ç†æ–¹æ³•"><span>å¤„ç†æ–¹æ³•</span></a></h2><h3 id="è¯·æ±‚æ•°æ®" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚æ•°æ®"><span>è¯·æ±‚æ•°æ®</span></a></h3><ul><li><p><code>@RequestParam</code></p></li><li><p><code>@RequestBody</code></p></li><li><p><code>@PathVariable</code></p></li><li><p><code>@RequestHeader</code></p></li></ul><blockquote><p>æ›´å¤š Spring Web æ–¹æ³•å‚æ•°å¯ä»¥å‚è€ƒï¼š <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-arguments" target="_blank" rel="noopener noreferrer">Method Arguments</a></p></blockquote><h3 id="å“åº”æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å“åº”æ•°æ®"><span>å“åº”æ•°æ®</span></a></h3><ul><li><p><code>@ResponseBody</code></p></li><li><p><code>@ResponseStatus</code></p></li><li><p>ResponseEntity</p></li><li><p>HttpEntity</p></li></ul><blockquote><p>æ›´å¤š Spring Web æ–¹æ³•è¿”å›å€¼å¯ä»¥å‚è€ƒï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-return-types" target="_blank" rel="noopener noreferrer">Return Values</a></p></blockquote><h2 id="modelattribute" tabindex="-1"><a class="header-anchor" href="#modelattribute"><span>@ModelAttribute</span></a></h2><p>å¯ä»¥ä½¿ç”¨ <code>@ModelAttribute</code> æ³¨è§£ï¼š</p><ul><li>åœ¨ <code>@RequestMapping</code> æ–¹æ³•ä¸­çš„æ–¹æ³•å‚æ•°ä¸Šï¼Œç”¨äºæ¨¡å‹åˆ›å»ºæˆ–è®¿é—®å¯¹è±¡ï¼Œå¹¶é€šè¿‡ <code>WebDataBinder</code> å°†å…¶ç»‘å®šåˆ°è¯·æ±‚ã€‚</li><li>ä½œä¸º <code>@Controller</code> æˆ– <code>@ControllerAdvice</code> ç±»ä¸­çš„æ–¹æ³•çº§æ³¨è§£ï¼Œæœ‰åŠ©äºåœ¨ä»»ä½• <code>@RequestMapping</code> æ–¹æ³•è°ƒç”¨ä¹‹å‰åˆå§‹åŒ–æ¨¡å‹ã€‚</li><li>åœ¨ <code>@RequestMapping</code> æ–¹æ³•ä¸Šæ ‡è®°å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ¨¡å‹å±æ€§ã€‚</li></ul><p>æœ¬èŠ‚è®¨è®º <code>@ModelAttribute</code> æ–¹æ³•â€”â€”å‰é¢åˆ—è¡¨ä¸­çš„ç¬¬äºŒé¡¹ã€‚ä¸€ä¸ªæ§åˆ¶å™¨å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„ <code>@ModelAttribute</code> æ–¹æ³•ã€‚æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½åœ¨åŒä¸€æ§åˆ¶å™¨ä¸­çš„ <code>@RequestMapping</code> æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ã€‚<code>@ModelAttribute</code> æ–¹æ³•ä¹Ÿå¯ä»¥é€šè¿‡ <code>@ControllerAdvice</code> åœ¨æ§åˆ¶å™¨ä¹‹é—´å…±äº«ã€‚</p><p><code>@ModelAttribute</code> æ–¹æ³•å…·æœ‰çµæ´»çš„æ–¹æ³•ç­¾åã€‚å®ƒä»¬æ”¯æŒè®¸å¤šä¸ <code>@RequestMapping</code> æ–¹æ³•ç›¸åŒçš„å‚æ•°ï¼Œé™¤äº† <code>@ModelAttribute</code> æœ¬èº«æˆ–ä¸è¯·æ±‚ä¸»ä½“ç›¸å…³çš„ä»»ä½•å†…å®¹ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº† <code>@ModelAttribute</code> æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ModelAttribute</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> populateModel</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Model</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> model) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">accountRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findAccount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(number));</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // add more ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸‹ç¤ºä¾‹ä»…æ·»åŠ ä¸€ä¸ªå±æ€§ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ModelAttribute</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Account</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> addAccount</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> number) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> accountRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findAccount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(number);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜å¯ä»¥å°† <code>@ModelAttribute</code> ç”¨ä½œ <code>@RequestMapping</code> æ–¹æ³•ä¸Šçš„æ–¹æ³•çº§æ³¨è§£ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>@RequestMapping</code> æ–¹æ³•çš„è¿”å›å€¼è¢«è§£é‡Šä¸ºæ¨¡å‹å±æ€§ã€‚è¿™é€šå¸¸ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå®ƒæ˜¯ HTML æ§åˆ¶å™¨ä¸­çš„é»˜è®¤è¡Œä¸ºï¼Œé™¤éè¿”å›å€¼æ˜¯ä¸€ä¸ª String å¦åˆ™å°†è¢«è§£é‡Šä¸ºè§†å›¾åç§°ã€‚ <code>@ModelAttribute</code> è¿˜å¯ä»¥è‡ªå®šä¹‰æ¨¡å‹å±æ€§åç§°ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/accounts/{id}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ModelAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;myAccount&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Account</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> account</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="initbinder" tabindex="-1"><a class="header-anchor" href="#initbinder"><span>@InitBinder</span></a></h2><p><code>@Controller</code> æˆ– <code>@ControllerAdvice</code> ç±»å¯ä»¥ç”¨ <code>@InitBinder</code> æ–¹æ³•æ¥åˆå§‹åŒ– <code>WebDataBinder</code> çš„å®ä¾‹ï¼Œè€Œè¿™äº›æ–¹æ³•åˆå¯ä»¥ï¼š</p><ul><li>å°†è¯·æ±‚å‚æ•°ï¼ˆå³è¡¨å•æˆ–æŸ¥è¯¢æ•°æ®ï¼‰ç»‘å®šåˆ°æ¨¡å‹å¯¹è±¡ã€‚</li><li>å°†åŸºäºå­—ç¬¦ä¸²çš„è¯·æ±‚å€¼ï¼ˆä¾‹å¦‚è¯·æ±‚å‚æ•°ã€è·¯å¾„å˜é‡ã€æ ‡å¤´ã€cookie ç­‰ï¼‰è½¬æ¢ä¸ºæ§åˆ¶å™¨æ–¹æ³•å‚æ•°çš„ç›®æ ‡ç±»å‹ã€‚</li><li>åœ¨æ¸²æŸ“ HTML è¡¨å•æ—¶å°†æ¨¡å‹å¯¹è±¡å€¼æ ¼å¼åŒ–ä¸º <code>String</code> å€¼ã€‚</li></ul><p><code>@InitBinder</code> æ–¹æ³•å¯ä»¥æ³¨å†ŒæŒ‡å®šæ§åˆ¶å™¨ <code>java.beans.PropertyEditor</code> æˆ– Spring <code>Converter</code> å’Œ <code>Formatter</code> ç»„ä»¶ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-conversion" target="_blank" rel="noopener noreferrer">MVC é…ç½®</a> åœ¨å…¨å±€å…±äº«çš„ <code>FormattingConversionService</code> ä¸­æ³¨å†Œ <code>Converter</code> å’Œ <code>Formatter</code> ç±»å‹ã€‚</p><p><code>@InitBinder</code> æ–¹æ³•æ”¯æŒè®¸å¤šä¸ <code>@RequestMapping</code> æ–¹æ³•ç›¸åŒçš„å‚æ•°ï¼Œé™¤äº† <code>@ModelAttribute</code>ï¼ˆå‘½ä»¤å¯¹è±¡ï¼‰å‚æ•°ã€‚é€šå¸¸ï¼Œå®ƒä»¬ä½¿ç”¨ <code>WebDataBinder</code> å‚æ•°ï¼ˆç”¨äºæ³¨å†Œï¼‰å’Œ <code>void</code> è¿”å›å€¼å£°æ˜ã€‚ä¸‹é¢å±•ç¤ºäº†ä¸€ä¸ªç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FormController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">InitBinder</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> initBinder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">WebDataBinder</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        SimpleDateFormat</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dateFormat</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SimpleDateFormat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;yyyy-MM-dd&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        dateFormat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setLenient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerCustomEditor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Date</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CustomDateEditor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(dateFormat, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ï¼Œå½“æ‚¨é€šè¿‡å…±äº«çš„ <code>FormattingConversionService</code> ä½¿ç”¨åŸºäº <code>Formatter</code> çš„è®¾ç½®æ—¶ï¼Œæ‚¨å¯ä»¥é‡å¤ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•å¹¶æ³¨å†ŒæŒ‡å®šæ§åˆ¶å™¨çš„ <code>Formatter</code> å®ç°ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FormController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">InitBinder</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> initBinder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">WebDataBinder</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addCustomFormatter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DateFormatter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;yyyy-MM-dd&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ Web åº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ<em>æ•°æ®ç»‘å®š</em>æ¶‰åŠå°† HTTP è¯·æ±‚å‚æ•°ï¼ˆå³è¡¨å•æ•°æ®æˆ–æŸ¥è¯¢å‚æ•°ï¼‰ç»‘å®šåˆ°æ¨¡å‹å¯¹è±¡åŠå…¶åµŒå¥—å¯¹è±¡ä¸­çš„å±æ€§ã€‚</p><p>ä»…å…¬å¼€éµå¾ª <a href="https://www.oracle.com/java/technologies/javase/javabeans-spec.html" target="_blank" rel="noopener noreferrer">JavaBeans å‘½åçº¦å®š</a> çš„ <code>public</code> å±æ€§ç”¨äºæ•°æ®ç»‘å®šâ€”â€”ä¾‹å¦‚ï¼Œ<code>firstName</code> å±æ€§çš„ get/set æ–¹æ³•ï¼š<code>public String getFirstName()</code> å’Œ <code>public void setFirstName(String)</code>ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å…è®¸ç»‘å®šåˆ°æ¨¡å‹å¯¹è±¡å›¾ä¸­çš„æ‰€æœ‰å…¬å…±å±æ€§ã€‚è¿™æ„å‘³ç€æ‚¨éœ€è¦ä»”ç»†è€ƒè™‘æ¨¡å‹å…·æœ‰å“ªäº›å…¬å…±å±æ€§ï¼Œå› ä¸ºå®¢æˆ·ç«¯å¯ä»¥å°†ä»»ä½•å…¬å…±å±æ€§è·¯å¾„ä½œä¸ºç›®æ ‡ï¼Œç”šè‡³æ˜¯ä¸€äº›é¢„è®¡ä¸ä¼šé’ˆå¯¹ç»™å®šç”¨ä¾‹çš„å…¬å…±å±æ€§è·¯å¾„ã€‚</p><p>ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ª HTTP è¡¨å•æ•°æ®ç«¯ç‚¹ï¼Œæ¶æ„å®¢æˆ·ç«¯å¯ä»¥ä¸ºå­˜åœ¨äºæ¨¡å‹å¯¹è±¡å›¾ä¸­ä½†ä¸å±äºæµè§ˆå™¨ä¸­æ˜¾ç¤ºçš„ HTML è¡¨å•çš„å±æ€§æä¾›å€¼ã€‚è¿™å¯èƒ½å¯¼è‡´åœ¨æ¨¡å‹å¯¹è±¡åŠå…¶ä»»ä½•åµŒå¥—å¯¹è±¡ä¸Šè®¾ç½®æ•°æ®ï¼Œè¿™äº›æ•°æ®é¢„è®¡ä¸ä¼šæ›´æ–°ã€‚</p><p>èçš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ª<em>ä¸“ç”¨æ¨¡å‹å¯¹è±¡</em>ï¼Œå®ƒåªå…¬å¼€ä¸è¡¨å•æäº¤ç›¸å…³çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”¨äºæ›´æ”¹ç”¨æˆ·ç”µå­é‚®ä»¶åœ°å€çš„è¡¨å•ä¸Šï¼Œæ¨¡å‹å¯¹è±¡åº”å£°æ˜æœ€å°‘çš„ä¸€ç»„å±æ€§ï¼Œä¾‹å¦‚ä»¥ä¸‹ <code>ChangeEmailForm</code>ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ChangeEmailForm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> oldEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> newEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setOldEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> oldEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">oldEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> oldEmailAddress;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getOldEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">oldEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setNewEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> newEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EmailAddress </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> newEmailAddress;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getNewEmailAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EmailAddress;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ‚¨ä¸èƒ½æˆ–ä¸æƒ³ä¸ºæ¯ä¸ªæ•°æ®ç»‘å®šç”¨ä¾‹ä½¿ç”¨<em>ä¸“ç”¨æ¨¡å‹å¯¹è±¡</em>ï¼Œåˆ™å¿…é¡»é™åˆ¶å…è®¸ç”¨äºæ•°æ®ç»‘å®šçš„å±æ€§ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ <code>WebDataBinder</code> ä¸Šçš„ <code>setAllowedFields()</code> æ–¹æ³•æ³¨å†Œ<em>å…è®¸çš„å­—æ®µæ¨¡å¼</em> æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><p>ä¾‹å¦‚ï¼Œè¦åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­æ³¨å†Œå…è®¸çš„å­—æ®µæ¨¡å¼ï¼Œæ‚¨å¯ä»¥åœ¨ <code>@Controller</code> æˆ– <code>@ControllerAdvice</code> ç»„ä»¶ä¸­å®ç° <code>@InitBinder</code> æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ChangeEmailController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">InitBinder</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> initBinder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">WebDataBinder</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        binder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAllowedFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;oldEmailAddress&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;newEmailAddress&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // @RequestMapping methods, etc.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº†æ³¨å†Œå…è®¸çš„æ¨¡å¼å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>DataBinder</code>åŠå…¶å­ç±»ä¸­çš„ <code>setDisallowedFields()</code> æ–¹æ³•æ³¨å†Œ <em>å…è®¸çš„å­—æ®µæ¨¡å¼</em>ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œâ€œå…è®¸åˆ—è¡¨â€æ¯”â€œæ‹’ç»åˆ—è¡¨â€æ›´å®‰å…¨ã€‚å› æ­¤ï¼Œ<code>setAllowedFields()</code> åº”è¯¥ä¼˜äº <code>setDisallowedFields()</code>ã€‚</p><p>è¯·æ³¨æ„ï¼ŒåŒ¹é…å…è®¸çš„å­—æ®µæ¨¡å¼æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼›ç„¶è€Œï¼Œä¸ä¸å…è®¸çš„å­—æ®µæ¨¡å¼åŒ¹é…æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚æ­¤å¤–ï¼ŒåŒ¹é…ä¸å…è®¸çš„æ¨¡å¼çš„å­—æ®µå°†ä¸ä¼šè¢«æ¥å—ï¼Œå³ä½¿å®ƒä¹Ÿæ°å¥½åŒ¹é…å…è®¸åˆ—è¡¨ä¸­çš„æ¨¡å¼ã€‚</p><h2 id="è¡¨å•å¤„ç†" tabindex="-1"><a class="header-anchor" href="#è¡¨å•å¤„ç†"><span>è¡¨å•å¤„ç†</span></a></h2><h3 id="åˆ›å»ºå¤„ç†è¡¨å•çš„-controller" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¤„ç†è¡¨å•çš„-controller"><span>åˆ›å»ºå¤„ç†è¡¨å•çš„ Controller</span></a></h3><p><code>GreetingController</code> é€šè¿‡è¿”å›è§†å›¾çš„åç§°å¤„ç† <code>/greeting</code> çš„ GET è¯·æ±‚ï¼Œè¿™æ„å‘³ç€è¿”å›çš„å†…å®¹æ˜¯åä¸º <code>greeting.html</code> çš„è§†å›¾å†…å®¹ã€‚</p><p><code>greetingForm()</code> æ–¹æ³•æ˜¯é€šè¿‡ä½¿ç”¨ <code>@GetMapping</code> ä¸“é—¨æ˜ å°„åˆ° GET è¯·æ±‚çš„ï¼Œè€Œ <code>greetingSubmit()</code> æ˜¯é€šè¿‡ <code>@PostMapping</code> æ˜ å°„åˆ° POST è¯·æ±‚çš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.stereotype.Controller</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.ui.Model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.ModelAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GreetingController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/greeting&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> greetingForm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Model</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;greeting&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Greeting</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;greeting&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/greeting&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> greetingSubmit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ModelAttribute</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Greeting</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> greeting</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Model</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;greeting&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, greeting);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;result&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®šä¹‰éœ€è¦æäº¤çš„è¡¨å•å®ä½“" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰éœ€è¦æäº¤çš„è¡¨å•å®ä½“"><span>å®šä¹‰éœ€è¦æäº¤çš„è¡¨å•å®ä½“</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> lombok.Data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Greeting</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æäº¤è¡¨å•å‰ç«¯ä»£ç " tabindex="-1"><a class="header-anchor" href="#æäº¤è¡¨å•å‰ç«¯ä»£ç "><span>æäº¤è¡¨å•å‰ç«¯ä»£ç </span></a></h3><p>æäº¤å®ä½“çš„é¡µé¢å¿…é¡»ä¾èµ–æŸç§è§†å›¾æŠ€æœ¯ï¼Œé€šè¿‡å°†è§†å›¾åç§°è½¬æ¢ä¸ºæ¨¡æ¿è¿›è¡Œæ¸²æŸ“ï¼Œä»è€Œå¯¹HTMLè¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨äº† Thymeleaf æ¨¡æ¿å¼•æ“ä½œä¸ºè§†å›¾ï¼Œå®ƒè§£æ <code>greeting.html</code> çš„å„ç§æ¨¡æ¿è¡¨è¾¾å¼ä»¥æ¸²æŸ“è¡¨å•ã€‚</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;!</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DOCTYPE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> xmlns:th</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://www.thymeleaf.org&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Getting Started: Handling Form Submission&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">meta</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> http-equiv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Content-Type&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;text/html; charset=UTF-8&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Form&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">form</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;#&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@{/greeting}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;${greeting}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;post&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Id: &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;*{id}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Message: &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;*{content}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;submit&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Submit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt; &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;reset&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Reset&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">form</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ–‡ä»¶ä¸Šä¼ " tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶ä¸Šä¼ "><span>æ–‡ä»¶ä¸Šä¼ </span></a></h2><h3 id="åˆ›å»ºæ–‡ä»¶ä¸Šä¼ å¤„ç†-controller" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæ–‡ä»¶ä¸Šä¼ å¤„ç†-controller"><span>åˆ›å»ºæ–‡ä»¶ä¸Šä¼ å¤„ç† Controller</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.io.IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.stream.Collectors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.annotation.Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.core.io.Resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.http.HttpHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.http.ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.stereotype.Controller</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.ui.Model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.ExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.PathVariable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.RequestParam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.ResponseBody</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.multipart.MultipartFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.servlet.mvc.method.annotation.MvcUriComponentsBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.servlet.mvc.support.RedirectAttributes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.example.uploadingfiles.storage.StorageFileNotFoundException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.example.uploadingfiles.storage.StorageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FileUploadController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StorageService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> storageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> FileUploadController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">StorageService</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> storageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">		this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">storageService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> storageService;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> listUploadedFiles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Model</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">		model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;files&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">storageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				path </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> MvcUriComponentsBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fromMethodName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">FileUploadController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">						&quot;serveFile&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getFileName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toUri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">collect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Collectors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;uploadForm&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/files/{filename:.+}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ResponseBody</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> serveFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> filename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">		Resource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> storageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadAsResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(filename);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ok</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">header</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">HttpHeaders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">CONTENT_DISPOSITION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">				&quot;attachment; filename=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getFilename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(file);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleFileUpload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;file&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MultipartFile</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">			RedirectAttributes</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> redirectAttributes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">		storageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">store</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(file);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">		redirectAttributes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addFlashAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;message&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">				&quot;You successfully uploaded &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getOriginalFilename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;redirect:/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">StorageFileNotFoundException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleStorageFileNotFound</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">StorageFileNotFoundException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> exc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">notFound</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>FileUploadController</code> ç±»ä½¿ç”¨ <code>@Controller</code> æ³¨è§£ï¼Œä»¥ä¾¿ Spring å¯ä»¥æ‰«æå¹¶æ³¨å†Œå®ƒã€‚ æ¯ä¸ªæ–¹æ³•éƒ½æ ‡æœ‰ <code>@GetMapping</code> æˆ– <code>@PostMapping</code> ï¼Œå°†è·¯å¾„å’Œ HTTP æ“ä½œæ˜ å°„åˆ°æŒ‡å®šçš„æ§åˆ¶å™¨ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼š</p><ul><li><p>GET <code>/</code>ï¼šä» <code>StorageService</code> ä¸­æŸ¥æ‰¾å½“å‰ä¸Šä¼ æ–‡ä»¶çš„åˆ—è¡¨ï¼Œå¹¶å°†å…¶åŠ è½½åˆ° Thymeleaf æ¨¡æ¿ä¸­ã€‚ å®ƒä½¿ç”¨ <code>MvcUriComponentsBuilder</code> è®¡ç®—æŒ‡å‘å®é™…èµ„æºçš„é“¾æ¥ã€‚</p></li><li><p>GET <code>/files/{filename}</code>ï¼šåŠ è½½èµ„æºï¼ˆå¦‚æœå­˜åœ¨ï¼‰å¹¶ä½¿ç”¨ Content-Disposition å“åº”æ ‡å¤´å°†å…¶å‘é€åˆ°æµè§ˆå™¨è¿›è¡Œä¸‹è½½ã€‚</p></li><li><p>POST <code>/</code>ï¼šå¤„ç†ä¸€ä¸ªå¤šéƒ¨åˆ†çš„æ¶ˆæ¯æ–‡ä»¶ï¼Œå¹¶å°†å…¶äº¤ç»™ <code>StorageService</code> è¿›è¡Œä¿å­˜ã€‚</p></li></ul><h3 id="å®šä¹‰å­˜å‚¨æ–‡ä»¶çš„-service" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰å­˜å‚¨æ–‡ä»¶çš„-service"><span>å®šä¹‰å­˜å‚¨æ–‡ä»¶çš„ Service</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.core.io.Resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.multipart.MultipartFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.nio.file.Path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.stream.Stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StorageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> store</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MultipartFile</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">	Stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> loadAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">	Path</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> filename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">	Resource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> loadAsResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> filename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deleteAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€ä¸ªåŠ å•çš„ <code>StorageService</code> å®ç°ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.annotation.Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.core.io.Resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.core.io.UrlResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.stereotype.Service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.util.FileSystemUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.util.StringUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.web.multipart.MultipartFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.io.IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.io.InputStream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.net.MalformedURLException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.nio.file.Files</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.nio.file.Path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.nio.file.Paths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.nio.file.StandardCopyOption</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.stream.Stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FileSystemStorageServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StorageService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Path</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> rootLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> FileSystemStorageServiceImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">StorageProperties</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">rootLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Paths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deleteAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        FileSystemUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deleteRecursively</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">rootLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            Files</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createDirectories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(rootLocation);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StorageException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Could not initialize storage&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Path</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> filename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> rootLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(filename);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> loadAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Files</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">walk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">rootLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(path </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">rootLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">rootLocation</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">::</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">relativize);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StorageException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Failed to read stored files&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Resource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> loadAsResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> filename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Path</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(filename);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Resource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> resource</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UrlResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toUri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">exists</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isReadable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> resource;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StorageFileNotFoundException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Could not read file: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> filename);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MalformedURLException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StorageFileNotFoundException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Could not read file: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> filename, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> store</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MultipartFile</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> filename</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> StringUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cleanPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getOriginalFilename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isEmpty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StorageException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Failed to store empty file &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> filename);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">filename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">contains</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;..&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // This is a security check</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StorageException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    &quot;Cannot store file with relative path outside current directory &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> filename);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InputStream</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> inputStream</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getInputStream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                Files</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">copy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(inputStream, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">rootLocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(filename), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">StandardCopyOption</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">REPLACE_EXISTING</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StorageException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Failed to store file &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> filename, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»ºæ–‡ä»¶ä¸Šä¼ è¡¨å•" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæ–‡ä»¶ä¸Šä¼ è¡¨å•"><span>åˆ›å»ºæ–‡ä»¶ä¸Šä¼ è¡¨å•</span></a></h3><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> xmlns:th</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://www.thymeleaf.org&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;${message}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;${message}&quot;</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">form</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;POST&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> enctype</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;multipart/form-data&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;File to upload:&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;file&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;file&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;submit&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Upload&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">td</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">form</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ul</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">li</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:each</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;file : ${files}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">a</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:href</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;${file}&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> th:text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;${file}&quot;</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">li</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ul</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–‡ä»¶ä¸Šä¼ é™åˆ¶" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶ä¸Šä¼ é™åˆ¶"><span>æ–‡ä»¶ä¸Šä¼ é™åˆ¶</span></a></h3><p>å¦‚æœä½¿ç”¨ Spring Bootï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å±æ€§è®¾ç½®æ¥è°ƒæ•´å…¶è‡ªåŠ¨é…ç½®çš„ <code>MultipartConfigElement</code>ã€‚</p><p>å°†ä»¥ä¸‹å±æ€§æ·»åŠ åˆ°ç°æœ‰å±æ€§è®¾ç½®ä¸­ï¼ˆåœ¨ <code>src/main/resources/application.properties</code> ä¸­ï¼‰ï¼š</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" data-title="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">spring.servlet.multipart.max-file-size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">128KB</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">spring.servlet.multipart.max-request-size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">128KB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>spring.servlet.multipart.max-file-size</code> è®¾ç½®ä¸º 128KBï¼Œè¡¨ç¤ºæ€»æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 128KBã€‚</li><li><code>spring.servlet.multipart.max-request-size</code> è®¾ç½®ä¸º 128KBï¼Œè¿™æ„å‘³ç€ <code>multipart/form-data</code> çš„æ€»è¯·æ±‚å¤§å°ä¸èƒ½è¶…è¿‡ 128KBã€‚</li></ul><h2 id="å¼‚å¸¸å¤„ç†" tabindex="-1"><a class="header-anchor" href="#å¼‚å¸¸å¤„ç†"><span>å¼‚å¸¸å¤„ç†</span></a></h2><h3 id="exceptionhandler" tabindex="-1"><a class="header-anchor" href="#exceptionhandler"><span>@ExceptionHandler</span></a></h3><p><code>@Controller</code> å’Œ <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-controller-advice" target="_blank" rel="noopener noreferrer">@ControllerAdvice</a> ç±»å¯ä»¥ç”¨ <code>@ExceptionHandler</code> æ–¹æ³•æ¥å¤„ç†æ¥è‡ªæ§åˆ¶å™¨æ–¹æ³•çš„å¼‚å¸¸ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Controller</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SimpleController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ExceptionHandler</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¼‚å¸¸å¯èƒ½ä¸æ­£åœ¨ä¼ æ’­çš„é¡¶çº§å¼‚å¸¸ï¼ˆä¾‹å¦‚ï¼ŒæŠ›å‡ºç›´æ¥çš„ <code>IOException</code>ï¼‰æˆ–åŒ…è£…å™¨å¼‚å¸¸ä¸­çš„åµŒå¥—åŸå› ï¼ˆä¾‹å¦‚ï¼ŒåŒ…è£…åœ¨ <code>IllegalStateException</code> ä¸­çš„ <code>IOException</code>ï¼‰ç›¸åŒ¹é…ã€‚ä» 5.3 å¼€å§‹ï¼Œè¿™å¯ä»¥åŒ¹é…ä»»æ„åŸå› çº§åˆ«ï¼Œè€Œä»¥å‰åªè€ƒè™‘ç›´æ¥åŸå› ã€‚</p><p>å¯¹äºåŒ¹é…çš„å¼‚å¸¸ç±»å‹ï¼Œæœ€å¥½å°†ç›®æ ‡å¼‚å¸¸å£°æ˜ä¸ºæ–¹æ³•å‚æ•°ï¼Œå¦‚å‰é¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚å½“å¤šä¸ªå¼‚å¸¸æ–¹æ³•åŒ¹é…æ—¶ï¼Œæ ¹å¼‚å¸¸åŒ¹é…é€šå¸¸ä¼˜å…ˆäºåŸå› å¼‚å¸¸åŒ¹é…ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œ<code>ExceptionDepthComparator</code> ç”¨äºæ ¹æ®æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹çš„æ·±åº¦å¯¹å¼‚å¸¸è¿›è¡Œæ’åºã€‚</p><p>æˆ–è€…ï¼Œæ³¨è§£å£°æ˜å¯ä»¥ç¼©å°è¦åŒ¹é…çš„å¼‚å¸¸ç±»å‹ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">({</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">FileSystemException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> RemoteException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ex) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‚¨ç”šè‡³å¯ä»¥ä½¿ç”¨å…·æœ‰éå¸¸é€šç”¨çš„å‚æ•°ç­¾åçš„ç‰¹å®šå¼‚å¸¸ç±»å‹åˆ—è¡¨ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">({</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">FileSystemException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> RemoteException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ex) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šå¸¸å»ºè®®æ‚¨åœ¨å‚æ•°ç­¾åä¸­å°½å¯èƒ½å…·ä½“ï¼Œä»¥å‡å°‘æ ¹æœ¬å’ŒåŸå› å¼‚å¸¸ç±»å‹ä¹‹é—´ä¸åŒ¹é…çš„å¯èƒ½æ€§ã€‚è€ƒè™‘å°†ä¸€ä¸ªå¤šé‡åŒ¹é…æ–¹æ³•åˆ†è§£ä¸ºå•ç‹¬çš„ <code>@ExceptionHandler</code> æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•é€šè¿‡å…¶ç­¾ååŒ¹é…ä¸€ä¸ªç‰¹å®šçš„å¼‚å¸¸ç±»å‹ã€‚</p><p>åœ¨å¤š <code>@ControllerAdvice</code> å®‰æ’ä¸­ï¼Œå»ºè®®åœ¨å…·æœ‰ç›¸åº”é¡ºåºä¼˜å…ˆçº§çš„ <code>@ControllerAdvice</code> ä¸Šå£°æ˜æ‚¨çš„ä¸»è¦æ ¹å¼‚å¸¸æ˜ å°„ã€‚è™½ç„¶æ ¹å¼‚å¸¸åŒ¹é…ä¼˜äºåŸå› ï¼Œä½†è¿™æ˜¯åœ¨ç»™å®šæ§åˆ¶å™¨æˆ– <code>@ControllerAdvice</code> ç±»çš„æ–¹æ³•ä¸­å®šä¹‰çš„ã€‚è¿™æ„å‘³ç€ä¼˜å…ˆçº§è¾ƒé«˜çš„ <code>@ControllerAdvice</code> ä¸Šçš„åŸå› åŒ¹é…ä¼˜äºä¼˜å…ˆçº§è¾ƒä½çš„ <code>@ControllerAdvice</code> ä¸Šçš„ä»»ä½•åŒ¹é…ï¼ˆä¾‹å¦‚ï¼Œrootï¼‰ã€‚</p><p>æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œ <code>@ExceptionHandler</code> æ–¹æ³•å®ç°å¯ä»¥é€‰æ‹©é€šè¿‡ä»¥åŸå§‹å½¢å¼é‡æ–°æŠ›å‡ºç»™å®šå¼‚å¸¸å®ä¾‹æ¥é€€å‡ºå¤„ç†ã€‚è¿™åœ¨æ‚¨åªå¯¹æ ¹çº§åŒ¹é…æˆ–æ— æ³•é™æ€ç¡®å®šçš„ç‰¹å®šä¸Šä¸‹æ–‡ä¸­çš„åŒ¹é…æ„Ÿå…´è¶£çš„æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ã€‚é‡æ–°æŠ›å‡ºçš„å¼‚å¸¸é€šè¿‡å‰©ä½™çš„è§£æé“¾ä¼ æ’­ï¼Œå°±å¥½åƒç»™å®šçš„ <code>@ExceptionHandler</code> æ–¹æ³•ä¸€å¼€å§‹å°±ä¸ä¼šåŒ¹é…ä¸€æ ·ã€‚</p><p>Spring MVC ä¸­å¯¹ <code>@ExceptionHandler</code> æ–¹æ³•çš„æ”¯æŒå»ºç«‹åœ¨ <code>DispatcherServlet</code> çº§åˆ« <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-exceptionhandlers" target="_blank" rel="noopener noreferrer">HandlerExceptionResolver</a> æœºåˆ¶ä¸Šã€‚</p><blockquote><p>é™„å½•ï¼š</p><p><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-exceptionhandler-args" target="_blank" rel="noopener noreferrer"><code>@ExceptionHandler</code> æ”¯æŒçš„å‚æ•°</a></p><p><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-exceptionhandler-return-values" target="_blank" rel="noopener noreferrer"><code>@ExceptionHandler</code> æ”¯æŒè¿”å›å€¼</a></p></blockquote><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™"><span>å‚è€ƒèµ„æ–™</span></a></h2><ul><li><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/index.html" target="_blank" rel="noopener noreferrer">Spring Framework å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html" target="_blank" rel="noopener noreferrer">Spring Framework å®˜æ–¹æ–‡æ¡£ä¹‹ Web</a></li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/coder-xuyong/blog/edit/main/src/posts/java/spring/03-SpringWeb/02.SpringWebåº”ç”¨.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2024/12/30 15:51:18</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1299461580@qq.com">XuYong</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/pages/4a164d/" aria-label="Spring MVC ä¹‹è¿‡æ»¤å™¨"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Spring MVC ä¹‹è¿‡æ»¤å™¨</div></a><a class="route-link auto-link next" href="/pages/65351b/" aria-label="Spring Web ç»¼è¿°"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Spring Web ç»¼è¿°<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">coder-xuyong çš„å°ç ´ç«™</div><div class="vp-copyright">Copyright Â© 2025 xuyong </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-jTfCtTcD.js" defer></script>
  </body>
</html>
